(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-406c5e6c"],{"4d39":function(t,e,a){"use strict";a.r(e);var s,r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("base-header",{staticClass:"pb-6",attrs:{type:"company"}},[a("b-row",{staticClass:"py-4",attrs:{"align-v":"center"}},[a("b-col",[a("h6",{staticClass:"h2 text-white d-inline-block mb-0 mr-5"},[t._v("\n          Entity Management - Reporting\n        ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"mab_spinner light right"})])],1)],1),a("div",{staticClass:"container-fluid mt--6"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("b-card",[a("b-card-text",[a("h3",[t._v("Device Placement")]),a("b-row",[a("b-col",{attrs:{md:""}},[a("base-input",{attrs:{label:"Year"}},[a("el-select",{on:{change:t.loadReport},model:{value:t.report_params.year,callback:function(e){t.$set(t.report_params,"year",e)},expression:"report_params.year"}},[t._l(t.years,(function(t,e){return[a("el-option",{key:e,attrs:{label:t,value:t}})]}))],2)],1)],1),a("b-col",{attrs:{md:""}},[a("base-input",{attrs:{label:"Entities"}},[a("el-select",{attrs:{"value-key":"id",multiple:"",filterable:"","collapse-tags":""},on:{change:t.loadReport},model:{value:t.report_params.company_ids,callback:function(e){t.$set(t.report_params,"company_ids",e)},expression:"report_params.company_ids"}},[t._l(t.companies,(function(t,e){return[a("el-option",{key:e,attrs:{label:t.company_name,value:t.id}})]}))],2)],1)],1),a("b-col",{attrs:{md:""}},[a("base-input",{attrs:{label:"Detailed"}},[a("b-form-checkbox",{attrs:{value:!0,"unchecked-value":!1,size:"lg"},on:{change:t.loadReport},model:{value:t.report_params.detailed,callback:function(e){t.$set(t.report_params,"detailed",e)},expression:"report_params.detailed"}},[t._v("\n                    Detailed Report\n                  ")])],1)],1),a("b-col",{attrs:{md:""}},[a("base-input",{attrs:{label:"Export"}},[a("base-button",{staticClass:"btn",attrs:{disabled:!t.userCan("Report","Entities")||t.loading||0==t.report_params.company_ids.length,size:"sm",type:"primary",icon:""},nativeOn:{click:function(e){return t.getPdfReport()}}},[t._v("\n                    Export to PDF\n                  ")])],1)],1)],1),a("b-row",[a("b-col",{attrs:{md:""}},[t.report_params.detailed?a("h3",[t._v("Details")]):t._e(),t.report_params.detailed?a("b-table-simple",{attrs:{striped:"",responsive:""}},[a("b-thead",[a("b-tr",[a("b-th",{staticClass:"text-left"},[t._v("Distributor")]),a("b-th",{staticClass:"text-left"},[t._v("Subsidiary")]),a("b-th",{staticClass:"text-left"},[t._v("Node Type")]),a("b-th",{staticClass:"text-right"},[t._v("Qty")]),a("b-th",{staticClass:"text-left"},[t._v("Field")]),a("b-th",{staticClass:"text-left"},[t._v("Node Address")]),a("b-th",{staticClass:"text-right"},[t._v("Node EST")])],1)],1),a("b-tbody",[t._l(t.details,(function(e){return[a("b-tr",[a("b-td",[t._v(t._s(e.parent_co))]),a("b-td",[t._v(t._s(e.subsidiary))]),a("b-td",[t._v(t._s(e.node_type))]),a("b-td",{staticClass:"text-right"},[t._v(t._s(e.node_count))]),a("b-td",[t._v(t._s(e.field_name))]),a("b-td",[t._v(t._s(e.node_address))]),a("b-td",{staticClass:"text-right"},[t._v(t._s(e.node_est))])],1)]}))],2)],1):t._e()],1)],1),a("b-row",[a("b-col",{attrs:{md:""}},[t.summary&&t.totals?a("h3",{attrs:{responsive:""}},[t._v("Summary")]):t._e(),t.summary&&t.totals?a("b-table-simple",{attrs:{striped:"",responsive:""}},[a("b-thead",[a("b-tr",[a("b-th",{staticClass:"text-left"},[t._v("Distributor")]),a("b-th",{staticClass:"text-left"},[t._v("Subsidiary")]),t.totals.sm_total?a("b-th",{staticClass:"text-right"},[t._v("Soil Moisture")]):t._e(),t.totals.nt_total?a("b-th",{staticClass:"text-right"},[t._v("Nutrients")]):t._e(),t.totals.wl_total?a("b-th",{staticClass:"text-right"},[t._v("Well Controls")]):t._e(),t.totals.mt_total?a("b-th",{staticClass:"text-right"},[t._v("Meters")]):t._e(),a("b-th",{staticClass:"text-right"},[t._v("Line Total")])],1)],1),a("b-tbody",[t._l(t.summary,(function(e){return[a("b-tr",[a("b-td",[t._v(t._s(e.parent_co))]),a("b-td",[t._v(t._s(e.subsidiary))]),"Data"==e.row_type?[t.totals.sm_total?a("b-td",{staticClass:"text-right"},[a("strong",[t._v(t._s(e.sm_count))])]):t._e(),t.totals.nt_total?a("b-td",{staticClass:"text-right"},[a("strong",[t._v(t._s(e.nutrients_count))])]):t._e(),t.totals.wl_total?a("b-td",{staticClass:"text-right"},[a("strong",[t._v(t._s(e.wells_count))])]):t._e(),t.totals.mt_total?a("b-td",{staticClass:"text-right"},[a("strong",[t._v(t._s(e.meters_count))])]):t._e()]:"Subtotal"==e.row_type||"Total"==e.row_type?[a("b-td",{staticClass:"text-right",attrs:{colspan:t.popcols}},[t._v(t._s(e.row_type))])]:t._e(),a("b-td",{staticClass:"text-right"},[t._v(t._s(e.line_total))])],2)]}))],2)],1):t._e()],1)],1)],1)],1)],1)])])],1)},i=[],o=a("bd86"),n=(a("6611"),a("450d"),a("e772")),l=a.n(n),d=(a("7f7f"),a("1f1a"),a("4e4b")),c=a.n(d),_=a("714b"),p=(a("3d20"),a("8fe0")),u={mixins:[p["a"]],components:(s={},Object(o["a"])(s,c.a.name,c.a),Object(o["a"])(s,l.a.name,l.a),Object(o["a"])(s,"Modal",_["a"]),s),data:function(){return{loading:!1,initial:!0,summary:[],totals:[],popcols:0,details:[],years:[],companies:[],report_params:{type:"json",company_ids:[],year:"Total",detailed:!1,mode:"dist",initial:!0}}},methods:{loadReport:function(){var t=this;this.$axios.post("/api/company_report",this.report_params).then((function(e){t.loading=!1,t.report_params.initial=!1,t.summary=e.data.summary,t.totals=e.data.totals,t.popcols=0,t.popcols+=t.totals.sm_total>0?1:0,t.popcols+=t.totals.nt_total>0?1:0,t.popcols+=t.totals.wl_total>0?1:0,t.popcols+=t.totals.mt_total>0?1:0,e.data.details&&(t.details=e.data.details),e.data.years&&(t.years=e.data.years),t.companies=e.data.companies,t.initial&&(t.report_params.company_ids=e.data.cc_ids,t.initial=!1)}))},getPdfReport:function(){var t=this,e=Object.assign({},this.report_params);e.type="pdf",this.$axios.post("/api/company_report",e).then((function(e){t.loading=!1,e.data.url&&window.open(e.data.url)}))}},created:function(){this.loadReport()}},b=u,m=a("2877"),h=Object(m["a"])(b,r,i,!1,null,null,null);e["default"]=h.exports},"8fe0":function(t,e,a){"use strict";a("a481");e["a"]={methods:{calcLastReadingColor:function(t){var e="black";return"undefined"!==typeof t.date_diff&&"N/A"!=t.date_diff&&(t.date_diff.h<3&&(e="green"),t.date_diff.h>=3&&t.date_diff.h<6&&(e="orange"),t.date_diff.h>=6&&(e="red"),(t.date_diff.d>0||t.date_diff.days>0)&&(e="red"),(t.date_diff.y>0||t.date_diff.m>0||t.date_diff.d>0||t.date_diff.days>0)&&(e="red")),e},isAdmin:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.$store.getters.isAdmin(t)},isDistributor:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.$store.getters.isDistributor(t)},isRestricted:function(){return this.$store.getters.isRestricted()},userCan:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return this.$store.getters.userCan(t,e,a,s)},userLimits:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return this.$store.getters.userLimits(t,e,a)},convertNodeTypeToGraphRouteName:function(t){return"Soil Moisture"==t?"soil_moisture_graph":"Nutrients"==t?"nutrients_graph":"Wells"==t?"well_controls_graph":"Water Meter"==t?"meters_graph":""},convertNodeTypeToSubsystem:function(t){return"Soil Moisture"==t?"Soil Moisture":"Nutrients"==t?"Nutrients":"Wells"==t?"Well Controls":"Water Meter"==t?"Meters":""},convertToInches:function(t){return t=t.replace("mm",""),t=parseInt(parseInt(t)/25)+'"',t},convertToIndex:function(t){return t=t.replace("mm",""),t=parseInt(parseInt(t)/100),t},truncateString:function(t){return t.length<=24?t:t.substring(0,21)+"..."}}}}}]);
//# sourceMappingURL=chunk-406c5e6c.b6d7f6af.js.map