(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a5b6f08"],{2829:function(e,t,a){},d5ce:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("base-header",{staticClass:"pb-6",attrs:{type:"cultivar"}},[a("b-row",{staticClass:"py-4",attrs:{"align-v":"center"}},[a("b-col",[a("h6",{staticClass:"h2 text-white d-inline-block mb-0 mr-5"},[e._v("Soil Moisture - "+e._s(e.model.field_name)+" - Manage Cultivar")]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"mab_spinner light right"})])],1)],1),a("div",{staticClass:"container-fluid mt--6"},[a("b-modal",{attrs:{centered:"","no-close-on-esc":"","no-close-on-backdrop":"",size:"lg"},scopedSlots:e._u([{key:"modal-header",fn:function(t){t.close;return[a("h6",{staticClass:"modal-title"},[e._v("Cultivar Templates")])]}},{key:"default",fn:function(t){t.hide;return[a("b-row",{staticClass:"nomargin"},[a("b-col",[a("b-form-select",{model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}},[a("b-form-select-option",{attrs:{value:5}},[e._v("5")]),a("b-form-select-option",{attrs:{value:10,selected:""}},[e._v("10")]),a("b-form-select-option",{attrs:{value:25}},[e._v("25")]),a("b-form-select-option",{attrs:{value:50}},[e._v("50")])],1)],1),a("b-col",{attrs:{md:""}}),a("b-col",[a("base-input",{attrs:{"prepend-icon":"fas fa-search",placeholder:"Search..."},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}})],1)],1),a("b-row",[a("b-col",{attrs:{md:""}},[a("b-table",{attrs:{striped:"",bordered:"",outlined:"",small:"",stacked:"md",responsive:"","show-empty":"","primary-key":"id","per-page":e.perPage,"current-page":e.currentPage,filter:e.filterText,fields:e.templateTableColumns,items:e.loadedTemplates,busy:e.loading},on:{"update:busy":function(t){e.loading=t}},scopedSlots:e._u([{key:"cell()",fn:function(t){return[e._v(e._s(t.value))]}},{key:"cell(actions)",fn:function(t){return[a("div",{staticClass:"d-flex justify-content-center"},[a("b-button",{staticClass:"btn",attrs:{disabled:!e.userCan("Edit","Cultivar Stages",t.item.id,"O")||e.loading,variant:"outline-primary",size:"sm",icon:""},on:{click:function(a){return e.activateCultivarTemplate(t.index,t.item)}}},[e._v("\n                  Load\n                  ")]),a("b-button",{staticClass:"btn",attrs:{disabled:!e.userCan("Delete","Cultivar Templates",t.item.id,"O")||e.loading,variant:"outline-primary",size:"sm",icon:""},on:{click:function(a){return e.removeCultivarTemplate(t.index,t.item)}}},[e._v("\n                  Remove\n                  ")])],1)]}},{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center"},[a("div",{staticClass:"mab_spinner"})])]},proxy:!0},{key:"empty",fn:function(t){return[a("div",{staticClass:"text-center"},[e._v("\n                  No templates found\n                ")])]}}],null,!0)})],1)],1),a("b-row",[a("b-col",{attrs:{md:""}},[e._v("\n            Showing "+e._s(Math.min(1+e.perPage*(e.currentPage-1),e.totalRows))+" to "+e._s(Math.min(e.perPage*(e.currentPage-1)+e.perPage,e.totalRows))+" of "+e._s(e.totalRows)+" templates\n          ")]),a("b-col",{attrs:{md:""}},[a("b-pagination",{attrs:{"total-rows":e.totalRows,"per-page":e.perPage,align:"right"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)]}},{key:"modal-footer",fn:function(t){t.ok,t.cancel,t.hide;return[a("b-button",{staticClass:"ml-auto",attrs:{variant:"outline-primary"},on:{click:e.closeBrowseTemplatesModal}},[e._v("\n          Close\n        ")])]}}]),model:{value:e.browseTemplatesModalVisible,callback:function(t){e.browseTemplatesModalVisible=t},expression:"browseTemplatesModalVisible"}}),a("b-modal",{attrs:{centered:"","no-close-on-esc":"","no-close-on-backdrop":""},scopedSlots:e._u([{key:"modal-header",fn:function(t){t.close;return[a("h6",{staticClass:"modal-title"},[e._v("Save Cultivar Template")])]}},{key:"default",fn:function(t){t.hide;return[a("validation-observer",{ref:"savetpl",attrs:{slim:""}},[a("base-input",{attrs:{label:"Template Name",name:"Template Name",rules:"required",vid:"template_name",placeholder:"Template Name"},model:{value:e.saveTemplateName,callback:function(t){e.saveTemplateName=t},expression:"saveTemplateName"}})],1),a("b-row",[a("b-col",[e._v("\n          "+e._s(e.templateSaveStatus)+"\n          ")])],1)]}},{key:"modal-footer",fn:function(t){t.ok,t.cancel,t.hide;return[a("b-button",{staticClass:"ml-auto",attrs:{variant:"outline-primary"},on:{click:e.closeSaveTemplatesModal}},[e._v("\n          Close\n        ")]),a("b-button",{attrs:{variant:"primary",disabled:!e.saveTemplateName},on:{click:e.saveCultivarTemplate}},[e._v("\n          Save\n        ")])]}}]),model:{value:e.saveTemplatesModalVisible,callback:function(t){e.saveTemplatesModalVisible=t},expression:"saveTemplatesModalVisible"}}),a("b-modal",{attrs:{"modal-class":"modal-fullscreen",centered:"","no-close-on-esc":"","no-close-on-backdrop":"","hide-footer":""},scopedSlots:e._u([{key:"modal-header",fn:function(t){t.close;return[a("h6",{staticClass:"modal-title"},[e._v(e._s(e.visualEditorTitle))]),a("button",{staticClass:"close",attrs:{"aria-label":"Close"},on:{click:e.confirmVisualEditorClose}},[e._v("Ã—")])]}},{key:"default",fn:function(t){t.hide;return[a("b-overlay",{attrs:{show:e.loading,rounded:"sm",variant:"white",opacity:"0.5",blur:"1px"}},[a("highcharts",{ref:"hchart",staticClass:"hc",attrs:{options:e.chartOptions,updateArgs:e.chartUpdateArgs}}),a("validation-observer",{ref:"plotterstage",attrs:{slim:""}},[a("b-row",{attrs:{"align-h":"center"}},[a("b-col",{attrs:{cols:"6",md:"6",lg:"3"}},[a("b-row",[a("b-col",[a("base-input",[a("el-select",{attrs:{placeholder:"Stage",disabled:!e.stageSeriesData.length},on:{change:e.visualEditorStageSelected},model:{value:e.selectedStageIndex,callback:function(t){e.selectedStageIndex=t},expression:"selectedStageIndex"}},[e._l(e.stageSeriesData,(function(t,r){return[r<e.stageSeriesData.length-1?a("el-option",{key:t.index,attrs:{label:t.name,value:t.index}}):e._e()]}))],2)],1)],1)],1),a("b-row",[a("b-col",[a("base-input",{attrs:{name:"stage name",rules:"required",vid:"stage_name"}},[a("b-input-group",{attrs:{prepend:"Name"}},[a("b-form-input",{attrs:{placeholder:"Stage Name",disabled:!e.stageSeriesData.length},model:{value:e.currentSelectedStage.name,callback:function(t){e.$set(e.currentSelectedStage,"name",t)},expression:"currentSelectedStage.name"}})],1)],1)],1)],1)],1),a("b-col",{attrs:{cols:"6",md:"6",lg:"3"}},[a("b-row",[a("b-col",[a("base-input",{attrs:{name:"upper",rules:{required:!0,regex:/^\d+(\.\d{1,2})?$/},vid:"stage_upper"}},[a("b-input-group",{attrs:{prepend:"Upper %",append:e.getEffectiveUpper}},[a("b-form-input",{attrs:{placeholder:"Upper %",disabled:!e.stageSeriesData.length},model:{value:e.currentSelectedStage.upper,callback:function(t){e.$set(e.currentSelectedStage,"upper",t)},expression:"currentSelectedStage.upper"}})],1)],1)],1)],1),a("b-row",[a("b-col",[a("base-input",{attrs:{name:"lower",rules:{required:!0,regex:/^\d+(\.\d{1,2})?$/},vid:"stage_lower"}},[a("b-input-group",{attrs:{prepend:"Lower %",append:e.getEffectiveLower}},[a("b-form-input",{attrs:{placeholder:"Lower %",disabled:!e.stageSeriesData.length},model:{value:e.currentSelectedStage.lower,callback:function(t){e.$set(e.currentSelectedStage,"lower",t)},expression:"currentSelectedStage.lower"}})],1)],1)],1)],1)],1),a("b-col",{attrs:{cols:"12",sm:"6",md:"6",lg:"3"}},[a("b-row",[a("b-col",{attrs:{cols:"6",sm:"12",md:"12",lg:"12"}},[a("base-input",{attrs:{name:"duration",rules:"required|integer|min_value:1"}},[a("b-input-group",{attrs:{prepend:"Days"}},[a("b-form-input",{attrs:{type:"number",min:"1",placeholder:"Duration",disabled:!e.stageSeriesData.length},model:{value:e.currentSelectedStage.duration,callback:function(t){e.$set(e.currentSelectedStage,"duration",t)},expression:"currentSelectedStage.duration"}})],1)],1)],1),a("b-col",{attrs:{cols:"6",sm:"12",md:"12",lg:"12"}},[a("base-input",{attrs:{name:"start date",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.focus,n=t.blur;return a("flat-picker",{staticClass:"form-control datepicker",attrs:{config:{minDate:e.calcMinDate(e.currentSelectedStage?e.currentSelectedStage.index:null),maxDate:e.calcMaxDate(e.currentSelectedStage?e.currentSelectedStage.index:null)},placeholder:"Start Date",disabled:!e.stageSeriesData.length},on:{"on-open":r,"on-close":n},model:{value:e.currentSelectedStage.x,callback:function(t){e.$set(e.currentSelectedStage,"x",t)},expression:"currentSelectedStage.x"}})}}],null,!0)})],1)],1)],1),a("b-col",{staticClass:"text-center text-lg-right text-md-right text-sm-right",attrs:{cols:"12",sm:"6",md:"6",lg:"3"}},[a("b-row",[a("b-col",{attrs:{cols:"6",sm:"12",md:"12",lg:"12"}},[a("b-button-group",{staticClass:"mb-lg-4 mb-md-2 mb-sm-2 mb-2"},[a("b-button",{attrs:{variant:"outline-primary",disabled:!e.stageSeriesData.length||!e.userCan("Edit","Cultivar Stages")},on:{click:e.visualEditorUpdateStage}},[e._v("\n                        Update\n                      ")]),a("b-button",{attrs:{variant:"primary",disabled:!e.stageSeriesData.length||!e.userCan("Edit","Cultivar Stages")},on:{click:e.applyGraphDataToStages}},[e._v("\n                        Apply\n                      ")])],1)],1),a("b-col",{attrs:{cols:"6",sm:"12",md:"12",lg:"12"}},[a("b-button-group",{staticClass:"mb-lg-4 mb-md-2 mb-sm-2 mb-2"},[a("b-button",{attrs:{variant:"outline-primary",disabled:!e.userCan("View","Cultivar Templates")},on:{click:e.showBrowseTemplatesModal}},[e._v("\n                        Load Template\n                      ")]),a("b-button",{attrs:{variant:"outline-primary",disabled:!e.stageSeriesData.length||!e.userCan("Add","Cultivar Templates")},on:{click:e.showSaveTemplatesModal}},[e._v("\n                        Save Template\n                      ")])],1)],1)],1)],1)],1)],1)],1)]}}]),model:{value:e.visualEditorModalVisible,callback:function(t){e.visualEditorModalVisible=t},expression:"visualEditorModalVisible"}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("validation-observer",{ref:"form",attrs:{slim:""}},[a("card",{attrs:{"body-classes":"px-0 py-0"}},[a("template",{slot:"header"},[a("h3",{staticClass:"mb-2"},[e._v("Cultivar Configuration")]),a("base-button",{staticClass:"btn",attrs:{disabled:!e.userCan("Graph","Soil Moisture"),type:"primary",size:"sm",icon:""},nativeOn:{click:function(t){return e.goToGraph.apply(null,arguments)}}},[e._v("\n                Graph\n              ")])],1),a("div",{staticClass:"card-body"},[a("b-row",{attrs:{"align-v":"center"}},[a("b-col",{attrs:{md:""}},[a("base-input",{attrs:{name:"cultivar name",rules:"required",label:"Cultivar Name",placeholder:"Cultivar Name",vid:"crop_name"},on:{change:e.syncFields},model:{value:e.model.crop_name,callback:function(t){e.$set(e.model,"crop_name",t)},expression:"model.crop_name"}})],1),a("b-col",{attrs:{md:""}},[a("base-input",{attrs:{label:"Cultivar Type",name:"cultivar type",rules:"required",vid:"crop_type"}},[a("el-select",{attrs:{filterable:"",placeholder:"Select Crop Type"},on:{change:e.syncFields},model:{value:e.model.crop_type,callback:function(t){e.$set(e.model,"crop_type",t)},expression:"model.crop_type"}},[a("el-option",{attrs:{label:"Permanent",value:"Permanent"}}),a("el-option",{attrs:{label:"Seasonal",value:"Seasonal"}})],1)],1)],1)],1),a("b-row",{attrs:{"align-v":"center"}},[a("b-col",{attrs:{md:""}},[a("base-input",{attrs:{name:"ni",rules:{required:!0,regex:/^\d+(\.\d{1,2})?$/},label:"NI",placeholder:"NI",vid:"ni"},on:{change:e.syncFields},model:{value:e.model.ni,callback:function(t){e.$set(e.model,"ni",t)},expression:"model.ni"}})],1),a("b-col",{attrs:{md:""}},[a("base-input",{attrs:{name:"nr",rules:{required:!0,regex:/^\d+(\.\d{1,2})?$/},label:"NR",placeholder:"NR",vid:"nr"},on:{change:e.syncFields},model:{value:e.model.nr,callback:function(t){e.$set(e.model,"nr",t)},expression:"model.nr"}})],1)],1),a("b-row",{attrs:{"align-v":"center"}},[a("b-col",{attrs:{md:""}},[a("base-input",{attrs:{name:"full",rules:{required:!0,regex:/^\d+(\.\d{1,2})?$/},label:"Full",placeholder:"100",vid:"full"},on:{change:e.syncFields},model:{value:e.model.full,callback:function(t){e.$set(e.model,"full",t)},expression:"model.full"}})],1),a("b-col",{attrs:{md:""}},[a("base-input",{attrs:{name:"refill",rules:{required:!0,regex:/^\d+(\.\d{1,2})?$/},label:"Refill",placeholder:"100",vid:"refill"},on:{change:e.syncFields},model:{value:e.model.refill,callback:function(t){e.$set(e.model,"refill",t)},expression:"model.refill"}})],1)],1),a("b-row",{attrs:{"align-v":"center"}},[a("b-col",{attrs:{md:""}},[a("base-input",{attrs:{name:"irrigation type",rules:"required",label:"Irrigation Type",placeholder:"Irrigation Type",vid:"irrigation_type"},on:{change:e.syncFields},model:{value:e.model.irrigation_type,callback:function(t){e.$set(e.model,"irrigation_type",t)},expression:"model.irrigation_type"}})],1),a("b-col",{attrs:{md:""}},[a("base-input",{attrs:{label:"Graph Model",name:"graph model",rules:"required",vid:"graph_model"}},[a("el-select",{attrs:{filterable:"",placeholder:"Graph Model"},on:{change:e.syncFields},model:{value:e.model.graph_model,callback:function(t){e.$set(e.model,"graph_model",t)},expression:"model.graph_model"}},[a("el-option",{attrs:{label:"Average",value:"ave"}}),a("el-option",{attrs:{label:"Sum",value:"sum"}})],1)],1)],1)],1)],1)],2)],1),a("card",{attrs:{"body-classes":"px-0 py-0"}},[a("template",{slot:"header"},[a("h3",{staticClass:"mb-2"},[e._v("Cultivar Growth Stages")]),a("b-row",[a("b-col",{attrs:{md:""}},[a("base-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",modifiers:{hover:!0,top:!0}}],staticClass:"btn",attrs:{type:"primary",size:"sm",title:"Manage the cultivar's stages visually.",icon:""},nativeOn:{click:function(t){return e.openVisualEditor()}}},[e._v("\n                  Visual Editor\n                ")])],1)],1)],1),a("div",{staticClass:"card-body"},[a("validation-observer",{ref:"updatestage",attrs:{slim:""}},e._l(e.stages,(function(t,r){return a("b-row",{key:t.id,attrs:{"align-v":"center"}},[a("b-col",{attrs:{md:""}},[a("base-input",{attrs:{name:"stage name",rules:"required",label:"Stage Name"},model:{value:t.stage_name,callback:function(a){e.$set(t,"stage_name",a)},expression:"stage.stage_name"}})],1),a("b-col",{attrs:{md:""}},[a("base-input",{attrs:{label:"Start Date",name:"start date",rules:"required",vid:"stage_start_date"},scopedSlots:e._u([{key:"default",fn:function(n){var i=n.focus,o=n.blur;return a("flat-picker",{staticClass:"form-control datepicker",attrs:{config:{minDate:e.calcMinDate(r),maxDate:e.calcMaxDate(r)}},on:{"on-open":i,"on-close":o},model:{value:t.stage_start_date,callback:function(a){e.$set(t,"stage_start_date",a)},expression:"stage.stage_start_date"}})}}],null,!0)})],1),a("b-col",{attrs:{md:""}},[a("base-input",{attrs:{name:"duration",rules:"required|integer",label:"Duration",placeholder:"",vid:"duration"},model:{value:t.duration,callback:function(a){e.$set(t,"duration",e._n(a))},expression:"stage.duration"}})],1),a("b-col",{attrs:{md:""}},[a("base-input",{attrs:{name:"lower",rules:{required:!0,regex:/^\d+(\.\d{1,2})?$/},label:"Lower %",placeholder:"0",vid:"lower"},model:{value:t.lower,callback:function(a){e.$set(t,"lower",e._n(a))},expression:"stage.lower"}})],1),a("b-col",{attrs:{md:""}},[a("base-input",{attrs:{name:"upper",rules:{required:!0,regex:/^\d+(\.\d{1,2})?$/},label:"Upper %",placeholder:"100",vid:"upper"},model:{value:t.upper,callback:function(a){e.$set(t,"upper",e._n(a))},expression:"stage.upper"}})],1),a("b-col",{attrs:{md:""}},[a("base-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",modifiers:{hover:!0,top:!0}}],staticClass:"btn",attrs:{disabled:!e.userCan("Edit","Cultivar Stages",t.id,"O"),type:"primary",size:"sm",title:"Save/update the existing stage's values.",icon:""},nativeOn:{click:function(a){return e.updateStage(t)}}},[e._v("\n                    Update\n                  ")])],1)],1)})),1),a("validation-observer",{ref:"addstage",attrs:{slim:""}},[a("b-row",{attrs:{"align-v":"center"}},[a("b-col",{attrs:{md:""}},[a("base-input",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",modifiers:{hover:!0,top:!0}}],attrs:{name:"stage name",rules:"required",label:"Stage Name",vid:"stage_name",title:"A descriptive name for the stage."},model:{value:e.new_stage.stage_name,callback:function(t){e.$set(e.new_stage,"stage_name",t)},expression:"new_stage.stage_name"}})],1),a("b-col",{attrs:{md:""}},[a("base-input",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",modifiers:{hover:!0,top:!0}}],attrs:{name:"start date",rules:"required",label:"Start Date",title:"Date at which the stage starts.",vid:"start_date"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.focus,n=t.blur;return a("flat-picker",{staticClass:"form-control datepicker",attrs:{config:{minDate:e.calcNewMinDate()}},on:{"on-open":r,"on-close":n},model:{value:e.new_stage.start_date,callback:function(t){e.$set(e.new_stage,"start_date",t)},expression:"new_stage.start_date"}})}}])})],1),a("b-col",{attrs:{md:""}},[a("base-input",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",modifiers:{hover:!0,top:!0}}],attrs:{name:"duration",rules:"required|integer",label:"Duration",placeholder:"",vid:"duration",title:"The stage length (in days)."},model:{value:e.new_stage.duration,callback:function(t){e.$set(e.new_stage,"duration",e._n(t))},expression:"new_stage.duration"}})],1),a("b-col",{attrs:{md:""}},[a("base-input",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",modifiers:{hover:!0,top:!0}}],attrs:{name:"lower",rules:{required:!0,regex:/^\d+(\.\d{1,2})?$/},label:"Lower %",placeholder:"0",vid:"lower",title:"The stage's lower value."},model:{value:e.new_stage.lower,callback:function(t){e.$set(e.new_stage,"lower",e._n(t))},expression:"new_stage.lower"}})],1),a("b-col",{attrs:{md:""}},[a("base-input",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",modifiers:{hover:!0,top:!0}}],attrs:{name:"upper",rules:{required:!0,regex:/^\d+(\.\d{1,2})?$/},label:"Upper %",placeholder:"100",vid:"upper",title:"The stage's upper value."},model:{value:e.new_stage.upper,callback:function(t){e.$set(e.new_stage,"upper",e._n(t))},expression:"new_stage.upper"}})],1),a("b-col",{attrs:{md:""}},[a("base-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",modifiers:{hover:!0,top:!0}}],staticClass:"btn",attrs:{disabled:!e.userCan("Add","Cultivar Stages"),type:"primary",size:"sm",title:"Add a new cultivar stage onto the end of the list.",icon:""},nativeOn:{click:function(t){return e.addStage()}}},[e._v("\n                    Add Stage\n                  ")])],1)],1),a("b-row",[a("b-col",{attrs:{md:""}},[a("base-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",modifiers:{hover:!0,top:!0}}],staticClass:"btn",attrs:{disabled:!e.userCan("Delete","Cultivar Stages"),type:"primary",size:"sm",title:"Removes the most recently added cultivar stage",icon:""},nativeOn:{click:function(t){return e.deleteLastStage()}}},[e._v("\n                  Delete Last Stage\n                  ")])],1)],1)],1)],1)],2)],1)])],1)],1)},n=[],i=(a("20d6"),a("ac6a"),a("bd86")),o=(a("6611"),a("450d"),a("e772")),s=a.n(o),l=(a("7f7f"),a("1f1a"),a("4e4b")),u=a.n(l),d=a("c38f"),c=a.n(d),h=(a("0952"),a("ea7f")),m=a.n(h),g=a("3d20"),f=a.n(g);function p(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function v(e){return p(1,arguments),e instanceof Date||"object"===typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function b(e){p(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"===typeof e||"[object Number]"===t?new Date(e):("string"!==typeof e&&"[object String]"!==t||"undefined"===typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function w(e){if(p(1,arguments),!v(e)&&"number"!==typeof e)return!1;var t=b(e);return!isNaN(Number(t))}var y={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},S=function(e,t,a){var r,n=y[e];return r="string"===typeof n?n:1===t?n.one:n.other.replace("{{count}}",t.toString()),null!==a&&void 0!==a&&a.addSuffix?a.comparison&&a.comparison>0?"in "+r:r+" ago":r},T=S;function x(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.width?String(t.width):e.defaultWidth,r=e.formats[a]||e.formats[e.defaultWidth];return r}}var C={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},D={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},k={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},M={date:x({formats:C,defaultWidth:"full"}),time:x({formats:D,defaultWidth:"full"}),dateTime:x({formats:k,defaultWidth:"full"})},_=M,U={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},E=function(e,t,a,r){return U[e]},N=E;function P(e){return function(t,a){var r,n=a||{},i=n.context?String(n.context):"standalone";if("formatting"===i&&e.formattingValues){var o=e.defaultFormattingWidth||e.defaultWidth,s=n.width?String(n.width):o;r=e.formattingValues[s]||e.formattingValues[o]}else{var l=e.defaultWidth,u=n.width?String(n.width):e.defaultWidth;r=e.values[u]||e.values[l]}var d=e.argumentCallback?e.argumentCallback(t):t;return r[d]}}var q={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Y={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},O={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},$={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},F={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},L={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},A=function(e,t){var a=Number(e),r=a%100;if(r>20||r<10)switch(r%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},H={ordinalNumber:A,era:P({values:q,defaultWidth:"wide"}),quarter:P({values:Y,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:P({values:O,defaultWidth:"wide"}),day:P({values:$,defaultWidth:"wide"}),dayPeriod:P({values:F,defaultWidth:"wide",formattingValues:L,defaultFormattingWidth:"wide"})},G=H;function W(e){return function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.width,n=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=t.match(n);if(!i)return null;var o,s=i[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(l)?B(l,(function(e){return e.test(s)})):I(l,(function(e){return e.test(s)}));o=e.valueCallback?e.valueCallback(u):u,o=a.valueCallback?a.valueCallback(o):o;var d=t.slice(s.length);return{value:o,rest:d}}}function I(e,t){for(var a in e)if(e.hasOwnProperty(a)&&t(e[a]))return a}function B(e,t){for(var a=0;a<e.length;a++)if(t(e[a]))return a}function R(e){return function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;var n=r[0],i=t.match(e.parsePattern);if(!i)return null;var o=e.valueCallback?e.valueCallback(i[0]):i[0];o=a.valueCallback?a.valueCallback(o):o;var s=t.slice(n.length);return{value:o,rest:s}}}var Q=/^(\d+)(th|st|nd|rd)?/i,z=/\d+/i,X={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},V={any:[/^b/i,/^(a|c)/i]},j={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},J={any:[/1/i,/2/i,/3/i,/4/i]},K={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Z={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ee={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},te={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ae={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},re={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ne={ordinalNumber:R({matchPattern:Q,parsePattern:z,valueCallback:function(e){return parseInt(e,10)}}),era:W({matchPatterns:X,defaultMatchWidth:"wide",parsePatterns:V,defaultParseWidth:"any"}),quarter:W({matchPatterns:j,defaultMatchWidth:"wide",parsePatterns:J,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:W({matchPatterns:K,defaultMatchWidth:"wide",parsePatterns:Z,defaultParseWidth:"any"}),day:W({matchPatterns:ee,defaultMatchWidth:"wide",parsePatterns:te,defaultParseWidth:"any"}),dayPeriod:W({matchPatterns:ae,defaultMatchWidth:"any",parsePatterns:re,defaultParseWidth:"any"})},ie=ne,oe={code:"en-US",formatDistance:T,formatLong:_,formatRelative:N,localize:G,match:ie,options:{weekStartsOn:0,firstWeekContainsDate:1}},se=oe;function le(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function ue(e,t){p(2,arguments);var a=b(e).getTime(),r=le(t);return new Date(a+r)}function de(e,t){p(2,arguments);var a=le(t);return ue(e,-a)}var ce=864e5;function he(e){p(1,arguments);var t=b(e),a=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),n=a-r;return Math.floor(n/ce)+1}function me(e){p(1,arguments);var t=1,a=b(e),r=a.getUTCDay(),n=(r<t?7:0)+r-t;return a.setUTCDate(a.getUTCDate()-n),a.setUTCHours(0,0,0,0),a}function ge(e){p(1,arguments);var t=b(e),a=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(a+1,0,4),r.setUTCHours(0,0,0,0);var n=me(r),i=new Date(0);i.setUTCFullYear(a,0,4),i.setUTCHours(0,0,0,0);var o=me(i);return t.getTime()>=n.getTime()?a+1:t.getTime()>=o.getTime()?a:a-1}function fe(e){p(1,arguments);var t=ge(e),a=new Date(0);a.setUTCFullYear(t,0,4),a.setUTCHours(0,0,0,0);var r=me(a);return r}var pe=6048e5;function ve(e){p(1,arguments);var t=b(e),a=me(t).getTime()-fe(t).getTime();return Math.round(a/pe)+1}function be(e,t){p(1,arguments);var a=t||{},r=a.locale,n=r&&r.options&&r.options.weekStartsOn,i=null==n?0:le(n),o=null==a.weekStartsOn?i:le(a.weekStartsOn);if(!(o>=0&&o<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=b(e),l=s.getUTCDay(),u=(l<o?7:0)+l-o;return s.setUTCDate(s.getUTCDate()-u),s.setUTCHours(0,0,0,0),s}function we(e,t){p(1,arguments);var a=b(e),r=a.getUTCFullYear(),n=t||{},i=n.locale,o=i&&i.options&&i.options.firstWeekContainsDate,s=null==o?1:le(o),l=null==n.firstWeekContainsDate?s:le(n.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var u=new Date(0);u.setUTCFullYear(r+1,0,l),u.setUTCHours(0,0,0,0);var d=be(u,t),c=new Date(0);c.setUTCFullYear(r,0,l),c.setUTCHours(0,0,0,0);var h=be(c,t);return a.getTime()>=d.getTime()?r+1:a.getTime()>=h.getTime()?r:r-1}function ye(e,t){p(1,arguments);var a=t||{},r=a.locale,n=r&&r.options&&r.options.firstWeekContainsDate,i=null==n?1:le(n),o=null==a.firstWeekContainsDate?i:le(a.firstWeekContainsDate),s=we(e,t),l=new Date(0);l.setUTCFullYear(s,0,o),l.setUTCHours(0,0,0,0);var u=be(l,t);return u}var Se=6048e5;function Te(e,t){p(1,arguments);var a=b(e),r=be(a,t).getTime()-ye(a,t).getTime();return Math.round(r/Se)+1}function xe(e,t){var a=e<0?"-":"",r=Math.abs(e).toString();while(r.length<t)r="0"+r;return a+r}var Ce={y:function(e,t){var a=e.getUTCFullYear(),r=a>0?a:1-a;return xe("yy"===t?r%100:r,t.length)},M:function(e,t){var a=e.getUTCMonth();return"M"===t?String(a+1):xe(a+1,2)},d:function(e,t){return xe(e.getUTCDate(),t.length)},a:function(e,t){var a=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return"am"===a?"a.m.":"p.m."}},h:function(e,t){return xe(e.getUTCHours()%12||12,t.length)},H:function(e,t){return xe(e.getUTCHours(),t.length)},m:function(e,t){return xe(e.getUTCMinutes(),t.length)},s:function(e,t){return xe(e.getUTCSeconds(),t.length)},S:function(e,t){var a=t.length,r=e.getUTCMilliseconds(),n=Math.floor(r*Math.pow(10,a-3));return xe(n,t.length)}},De=Ce,ke={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Me={G:function(e,t,a){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return a.era(r,{width:"abbreviated"});case"GGGGG":return a.era(r,{width:"narrow"});case"GGGG":default:return a.era(r,{width:"wide"})}},y:function(e,t,a){if("yo"===t){var r=e.getUTCFullYear(),n=r>0?r:1-r;return a.ordinalNumber(n,{unit:"year"})}return De.y(e,t)},Y:function(e,t,a,r){var n=we(e,r),i=n>0?n:1-n;if("YY"===t){var o=i%100;return xe(o,2)}return"Yo"===t?a.ordinalNumber(i,{unit:"year"}):xe(i,t.length)},R:function(e,t){var a=ge(e);return xe(a,t.length)},u:function(e,t){var a=e.getUTCFullYear();return xe(a,t.length)},Q:function(e,t,a){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return xe(r,2);case"Qo":return a.ordinalNumber(r,{unit:"quarter"});case"QQQ":return a.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,a){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return xe(r,2);case"qo":return a.ordinalNumber(r,{unit:"quarter"});case"qqq":return a.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,a){var r=e.getUTCMonth();switch(t){case"M":case"MM":return De.M(e,t);case"Mo":return a.ordinalNumber(r+1,{unit:"month"});case"MMM":return a.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,a){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return xe(r+1,2);case"Lo":return a.ordinalNumber(r+1,{unit:"month"});case"LLL":return a.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,a,r){var n=Te(e,r);return"wo"===t?a.ordinalNumber(n,{unit:"week"}):xe(n,t.length)},I:function(e,t,a){var r=ve(e);return"Io"===t?a.ordinalNumber(r,{unit:"week"}):xe(r,t.length)},d:function(e,t,a){return"do"===t?a.ordinalNumber(e.getUTCDate(),{unit:"date"}):De.d(e,t)},D:function(e,t,a){var r=he(e);return"Do"===t?a.ordinalNumber(r,{unit:"dayOfYear"}):xe(r,t.length)},E:function(e,t,a){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return a.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(r,{width:"short",context:"formatting"});case"EEEE":default:return a.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,a,r){var n=e.getUTCDay(),i=(n-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return xe(i,2);case"eo":return a.ordinalNumber(i,{unit:"day"});case"eee":return a.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(n,{width:"short",context:"formatting"});case"eeee":default:return a.day(n,{width:"wide",context:"formatting"})}},c:function(e,t,a,r){var n=e.getUTCDay(),i=(n-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return xe(i,t.length);case"co":return a.ordinalNumber(i,{unit:"day"});case"ccc":return a.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(n,{width:"narrow",context:"standalone"});case"cccccc":return a.day(n,{width:"short",context:"standalone"});case"cccc":default:return a.day(n,{width:"wide",context:"standalone"})}},i:function(e,t,a){var r=e.getUTCDay(),n=0===r?7:r;switch(t){case"i":return String(n);case"ii":return xe(n,t.length);case"io":return a.ordinalNumber(n,{unit:"day"});case"iii":return a.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(r,{width:"short",context:"formatting"});case"iiii":default:return a.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,a){var r=e.getUTCHours(),n=r/12>=1?"pm":"am";switch(t){case"a":case"aa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,a){var r,n=e.getUTCHours();switch(r=12===n?ke.noon:0===n?ke.midnight:n/12>=1?"pm":"am",t){case"b":case"bb":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,a){var r,n=e.getUTCHours();switch(r=n>=17?ke.evening:n>=12?ke.afternoon:n>=4?ke.morning:ke.night,t){case"B":case"BB":case"BBB":return a.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,a){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),a.ordinalNumber(r,{unit:"hour"})}return De.h(e,t)},H:function(e,t,a){return"Ho"===t?a.ordinalNumber(e.getUTCHours(),{unit:"hour"}):De.H(e,t)},K:function(e,t,a){var r=e.getUTCHours()%12;return"Ko"===t?a.ordinalNumber(r,{unit:"hour"}):xe(r,t.length)},k:function(e,t,a){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?a.ordinalNumber(r,{unit:"hour"}):xe(r,t.length)},m:function(e,t,a){return"mo"===t?a.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):De.m(e,t)},s:function(e,t,a){return"so"===t?a.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):De.s(e,t)},S:function(e,t){return De.S(e,t)},X:function(e,t,a,r){var n=r._originalDate||e,i=n.getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return Ue(i);case"XXXX":case"XX":return Ee(i);case"XXXXX":case"XXX":default:return Ee(i,":")}},x:function(e,t,a,r){var n=r._originalDate||e,i=n.getTimezoneOffset();switch(t){case"x":return Ue(i);case"xxxx":case"xx":return Ee(i);case"xxxxx":case"xxx":default:return Ee(i,":")}},O:function(e,t,a,r){var n=r._originalDate||e,i=n.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+_e(i,":");case"OOOO":default:return"GMT"+Ee(i,":")}},z:function(e,t,a,r){var n=r._originalDate||e,i=n.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+_e(i,":");case"zzzz":default:return"GMT"+Ee(i,":")}},t:function(e,t,a,r){var n=r._originalDate||e,i=Math.floor(n.getTime()/1e3);return xe(i,t.length)},T:function(e,t,a,r){var n=r._originalDate||e,i=n.getTime();return xe(i,t.length)}};function _e(e,t){var a=e>0?"-":"+",r=Math.abs(e),n=Math.floor(r/60),i=r%60;if(0===i)return a+String(n);var o=t||"";return a+String(n)+o+xe(i,2)}function Ue(e,t){if(e%60===0){var a=e>0?"-":"+";return a+xe(Math.abs(e)/60,2)}return Ee(e,t)}function Ee(e,t){var a=t||"",r=e>0?"-":"+",n=Math.abs(e),i=xe(Math.floor(n/60),2),o=xe(n%60,2);return r+i+a+o}var Ne=Me;function Pe(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}}function qe(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}}function Ye(e,t){var a,r=e.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return Pe(e,t);switch(n){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",Pe(n,t)).replace("{{time}}",qe(i,t))}var Oe={p:qe,P:Ye},$e=Oe;function Fe(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}var Le=["D","DD"],Ae=["YY","YYYY"];function He(e){return-1!==Le.indexOf(e)}function Ge(e){return-1!==Ae.indexOf(e)}function We(e,t,a){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(a,"`; see: https://git.io/fxCyr"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(a,"`; see: https://git.io/fxCyr"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(a,"`; see: https://git.io/fxCyr"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(a,"`; see: https://git.io/fxCyr"))}var Ie=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Be=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Re=/^'([^]*?)'?$/,Qe=/''/g,ze=/[a-zA-Z]/;function Xe(e,t,a){p(2,arguments);var r=String(t),n=a||{},i=n.locale||se,o=i.options&&i.options.firstWeekContainsDate,s=null==o?1:le(o),l=null==n.firstWeekContainsDate?s:le(n.firstWeekContainsDate);if(!(l>=1&&l<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var u=i.options&&i.options.weekStartsOn,d=null==u?0:le(u),c=null==n.weekStartsOn?d:le(n.weekStartsOn);if(!(c>=0&&c<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!i.localize)throw new RangeError("locale must contain localize property");if(!i.formatLong)throw new RangeError("locale must contain formatLong property");var h=b(e);if(!w(h))throw new RangeError("Invalid time value");var m=Fe(h),g=de(h,m),f={firstWeekContainsDate:l,weekStartsOn:c,locale:i,_originalDate:h},v=r.match(Be).map((function(e){var t=e[0];if("p"===t||"P"===t){var a=$e[t];return a(e,i.formatLong,f)}return e})).join("").match(Ie).map((function(a){if("''"===a)return"'";var r=a[0];if("'"===r)return Ve(a);var o=Ne[r];if(o)return!n.useAdditionalWeekYearTokens&&Ge(a)&&We(a,t,e),!n.useAdditionalDayOfYearTokens&&He(a)&&We(a,t,e),o(g,a,i.localize,f);if(r.match(ze))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return a})).join("");return v}function Ve(e){return e.match(Re)[1].replace(Qe,"'")}function je(e,t){if(null==e)throw new TypeError("assign requires that input parameter not be null or undefined");for(var a in t=t||{},t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}function Je(e,t,a){p(2,arguments);var r=a||{},n=r.locale,i=n&&n.options&&n.options.weekStartsOn,o=null==i?0:le(i),s=null==r.weekStartsOn?o:le(r.weekStartsOn);if(!(s>=0&&s<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var l=b(e),u=le(t),d=l.getUTCDay(),c=u%7,h=(c+7)%7,m=(h<s?7:0)+u-d;return l.setUTCDate(l.getUTCDate()+m),l}function Ke(e,t){p(2,arguments);var a=le(t);a%7===0&&(a-=7);var r=1,n=b(e),i=n.getUTCDay(),o=a%7,s=(o+7)%7,l=(s<r?7:0)+a-i;return n.setUTCDate(n.getUTCDate()+l),n}function Ze(e,t){p(2,arguments);var a=b(e),r=le(t),n=ve(a)-r;return a.setUTCDate(a.getUTCDate()-7*n),a}function et(e,t,a){p(2,arguments);var r=b(e),n=le(t),i=Te(r,a)-n;return r.setUTCDate(r.getUTCDate()-7*i),r}var tt=36e5,at=6e4,rt=1e3,nt={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},it={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function ot(e,t,a){var r=t.match(e);if(!r)return null;var n=parseInt(r[0],10);return{value:a?a(n):n,rest:t.slice(r[0].length)}}function st(e,t){var a=t.match(e);if(!a)return null;if("Z"===a[0])return{value:0,rest:t.slice(1)};var r="+"===a[1]?1:-1,n=a[2]?parseInt(a[2],10):0,i=a[3]?parseInt(a[3],10):0,o=a[5]?parseInt(a[5],10):0;return{value:r*(n*tt+i*at+o*rt),rest:t.slice(a[0].length)}}function lt(e,t){return ot(nt.anyDigitsSigned,e,t)}function ut(e,t,a){switch(e){case 1:return ot(nt.singleDigit,t,a);case 2:return ot(nt.twoDigits,t,a);case 3:return ot(nt.threeDigits,t,a);case 4:return ot(nt.fourDigits,t,a);default:return ot(new RegExp("^\\d{1,"+e+"}"),t,a)}}function dt(e,t,a){switch(e){case 1:return ot(nt.singleDigitSigned,t,a);case 2:return ot(nt.twoDigitsSigned,t,a);case 3:return ot(nt.threeDigitsSigned,t,a);case 4:return ot(nt.fourDigitsSigned,t,a);default:return ot(new RegExp("^-?\\d{1,"+e+"}"),t,a)}}function ct(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function ht(e,t){var a,r=t>0,n=r?t:1-t;if(n<=50)a=e||100;else{var i=n+50,o=100*Math.floor(i/100),s=e>=i%100;a=e+o-(s?100:0)}return r?a:1-a}var mt=[31,28,31,30,31,30,31,31,30,31,30,31],gt=[31,29,31,30,31,30,31,31,30,31,30,31];function ft(e){return e%400===0||e%4===0&&e%100!==0}var pt={G:{priority:140,parse:function(e,t,a,r){switch(t){case"G":case"GG":case"GGG":return a.era(e,{width:"abbreviated"})||a.era(e,{width:"narrow"});case"GGGGG":return a.era(e,{width:"narrow"});case"GGGG":default:return a.era(e,{width:"wide"})||a.era(e,{width:"abbreviated"})||a.era(e,{width:"narrow"})}},set:function(e,t,a,r){return t.era=a,e.setUTCFullYear(a,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["R","u","t","T"]},y:{priority:130,parse:function(e,t,a,r){var n=function(e){return{year:e,isTwoDigitYear:"yy"===t}};switch(t){case"y":return ut(4,e,n);case"yo":return a.ordinalNumber(e,{unit:"year",valueCallback:n});default:return ut(t.length,e,n)}},validate:function(e,t,a){return t.isTwoDigitYear||t.year>0},set:function(e,t,a,r){var n=e.getUTCFullYear();if(a.isTwoDigitYear){var i=ht(a.year,n);return e.setUTCFullYear(i,0,1),e.setUTCHours(0,0,0,0),e}var o="era"in t&&1!==t.era?1-a.year:a.year;return e.setUTCFullYear(o,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","u","w","I","i","e","c","t","T"]},Y:{priority:130,parse:function(e,t,a,r){var n=function(e){return{year:e,isTwoDigitYear:"YY"===t}};switch(t){case"Y":return ut(4,e,n);case"Yo":return a.ordinalNumber(e,{unit:"year",valueCallback:n});default:return ut(t.length,e,n)}},validate:function(e,t,a){return t.isTwoDigitYear||t.year>0},set:function(e,t,a,r){var n=we(e,r);if(a.isTwoDigitYear){var i=ht(a.year,n);return e.setUTCFullYear(i,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),be(e,r)}var o="era"in t&&1!==t.era?1-a.year:a.year;return e.setUTCFullYear(o,0,r.firstWeekContainsDate),e.setUTCHours(0,0,0,0),be(e,r)},incompatibleTokens:["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:{priority:130,parse:function(e,t,a,r){return dt("R"===t?4:t.length,e)},set:function(e,t,a,r){var n=new Date(0);return n.setUTCFullYear(a,0,4),n.setUTCHours(0,0,0,0),me(n)},incompatibleTokens:["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:{priority:130,parse:function(e,t,a,r){return dt("u"===t?4:t.length,e)},set:function(e,t,a,r){return e.setUTCFullYear(a,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["G","y","Y","R","w","I","i","e","c","t","T"]},Q:{priority:120,parse:function(e,t,a,r){switch(t){case"Q":case"QQ":return ut(t.length,e);case"Qo":return a.ordinalNumber(e,{unit:"quarter"});case"QQQ":return a.quarter(e,{width:"abbreviated",context:"formatting"})||a.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return a.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(e,{width:"wide",context:"formatting"})||a.quarter(e,{width:"abbreviated",context:"formatting"})||a.quarter(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,a){return t>=1&&t<=4},set:function(e,t,a,r){return e.setUTCMonth(3*(a-1),1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:{priority:120,parse:function(e,t,a,r){switch(t){case"q":case"qq":return ut(t.length,e);case"qo":return a.ordinalNumber(e,{unit:"quarter"});case"qqq":return a.quarter(e,{width:"abbreviated",context:"standalone"})||a.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return a.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(e,{width:"wide",context:"standalone"})||a.quarter(e,{width:"abbreviated",context:"standalone"})||a.quarter(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,a){return t>=1&&t<=4},set:function(e,t,a,r){return e.setUTCMonth(3*(a-1),1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:{priority:110,parse:function(e,t,a,r){var n=function(e){return e-1};switch(t){case"M":return ot(nt.month,e,n);case"MM":return ut(2,e,n);case"Mo":return a.ordinalNumber(e,{unit:"month",valueCallback:n});case"MMM":return a.month(e,{width:"abbreviated",context:"formatting"})||a.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return a.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(e,{width:"wide",context:"formatting"})||a.month(e,{width:"abbreviated",context:"formatting"})||a.month(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,a){return t>=0&&t<=11},set:function(e,t,a,r){return e.setUTCMonth(a,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]},L:{priority:110,parse:function(e,t,a,r){var n=function(e){return e-1};switch(t){case"L":return ot(nt.month,e,n);case"LL":return ut(2,e,n);case"Lo":return a.ordinalNumber(e,{unit:"month",valueCallback:n});case"LLL":return a.month(e,{width:"abbreviated",context:"standalone"})||a.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return a.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(e,{width:"wide",context:"standalone"})||a.month(e,{width:"abbreviated",context:"standalone"})||a.month(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,a){return t>=0&&t<=11},set:function(e,t,a,r){return e.setUTCMonth(a,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:{priority:100,parse:function(e,t,a,r){switch(t){case"w":return ot(nt.week,e);case"wo":return a.ordinalNumber(e,{unit:"week"});default:return ut(t.length,e)}},validate:function(e,t,a){return t>=1&&t<=53},set:function(e,t,a,r){return be(et(e,a,r),r)},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:{priority:100,parse:function(e,t,a,r){switch(t){case"I":return ot(nt.week,e);case"Io":return a.ordinalNumber(e,{unit:"week"});default:return ut(t.length,e)}},validate:function(e,t,a){return t>=1&&t<=53},set:function(e,t,a,r){return me(Ze(e,a,r),r)},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:{priority:90,subPriority:1,parse:function(e,t,a,r){switch(t){case"d":return ot(nt.date,e);case"do":return a.ordinalNumber(e,{unit:"date"});default:return ut(t.length,e)}},validate:function(e,t,a){var r=e.getUTCFullYear(),n=ft(r),i=e.getUTCMonth();return n?t>=1&&t<=gt[i]:t>=1&&t<=mt[i]},set:function(e,t,a,r){return e.setUTCDate(a),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:{priority:90,subPriority:1,parse:function(e,t,a,r){switch(t){case"D":case"DD":return ot(nt.dayOfYear,e);case"Do":return a.ordinalNumber(e,{unit:"date"});default:return ut(t.length,e)}},validate:function(e,t,a){var r=e.getUTCFullYear(),n=ft(r);return n?t>=1&&t<=366:t>=1&&t<=365},set:function(e,t,a,r){return e.setUTCMonth(0,a),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:{priority:90,parse:function(e,t,a,r){switch(t){case"E":case"EE":case"EEE":return a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return a.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return a.day(e,{width:"wide",context:"formatting"})||a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,a){return t>=0&&t<=6},set:function(e,t,a,r){return e=Je(e,a,r),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["D","i","e","c","t","T"]},e:{priority:90,parse:function(e,t,a,r){var n=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return ut(t.length,e,n);case"eo":return a.ordinalNumber(e,{unit:"day",valueCallback:n});case"eee":return a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"});case"eeeee":return a.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return a.day(e,{width:"wide",context:"formatting"})||a.day(e,{width:"abbreviated",context:"formatting"})||a.day(e,{width:"short",context:"formatting"})||a.day(e,{width:"narrow",context:"formatting"})}},validate:function(e,t,a){return t>=0&&t<=6},set:function(e,t,a,r){return e=Je(e,a,r),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:{priority:90,parse:function(e,t,a,r){var n=function(e){var t=7*Math.floor((e-1)/7);return(e+r.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return ut(t.length,e,n);case"co":return a.ordinalNumber(e,{unit:"day",valueCallback:n});case"ccc":return a.day(e,{width:"abbreviated",context:"standalone"})||a.day(e,{width:"short",context:"standalone"})||a.day(e,{width:"narrow",context:"standalone"});case"ccccc":return a.day(e,{width:"narrow",context:"standalone"});case"cccccc":return a.day(e,{width:"short",context:"standalone"})||a.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return a.day(e,{width:"wide",context:"standalone"})||a.day(e,{width:"abbreviated",context:"standalone"})||a.day(e,{width:"short",context:"standalone"})||a.day(e,{width:"narrow",context:"standalone"})}},validate:function(e,t,a){return t>=0&&t<=6},set:function(e,t,a,r){return e=Je(e,a,r),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:{priority:90,parse:function(e,t,a,r){var n=function(e){return 0===e?7:e};switch(t){case"i":case"ii":return ut(t.length,e);case"io":return a.ordinalNumber(e,{unit:"day"});case"iii":return a.day(e,{width:"abbreviated",context:"formatting",valueCallback:n})||a.day(e,{width:"short",context:"formatting",valueCallback:n})||a.day(e,{width:"narrow",context:"formatting",valueCallback:n});case"iiiii":return a.day(e,{width:"narrow",context:"formatting",valueCallback:n});case"iiiiii":return a.day(e,{width:"short",context:"formatting",valueCallback:n})||a.day(e,{width:"narrow",context:"formatting",valueCallback:n});case"iiii":default:return a.day(e,{width:"wide",context:"formatting",valueCallback:n})||a.day(e,{width:"abbreviated",context:"formatting",valueCallback:n})||a.day(e,{width:"short",context:"formatting",valueCallback:n})||a.day(e,{width:"narrow",context:"formatting",valueCallback:n})}},validate:function(e,t,a){return t>=1&&t<=7},set:function(e,t,a,r){return e=Ke(e,a,r),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:{priority:80,parse:function(e,t,a,r){switch(t){case"a":case"aa":case"aaa":return a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return a.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(e,{width:"wide",context:"formatting"})||a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,a,r){return e.setUTCHours(ct(a),0,0,0),e},incompatibleTokens:["b","B","H","k","t","T"]},b:{priority:80,parse:function(e,t,a,r){switch(t){case"b":case"bb":case"bbb":return a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return a.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(e,{width:"wide",context:"formatting"})||a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,a,r){return e.setUTCHours(ct(a),0,0,0),e},incompatibleTokens:["a","B","H","k","t","T"]},B:{priority:80,parse:function(e,t,a,r){switch(t){case"B":case"BB":case"BBB":return a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return a.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(e,{width:"wide",context:"formatting"})||a.dayPeriod(e,{width:"abbreviated",context:"formatting"})||a.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,t,a,r){return e.setUTCHours(ct(a),0,0,0),e},incompatibleTokens:["a","b","t","T"]},h:{priority:70,parse:function(e,t,a,r){switch(t){case"h":return ot(nt.hour12h,e);case"ho":return a.ordinalNumber(e,{unit:"hour"});default:return ut(t.length,e)}},validate:function(e,t,a){return t>=1&&t<=12},set:function(e,t,a,r){var n=e.getUTCHours()>=12;return n&&a<12?e.setUTCHours(a+12,0,0,0):n||12!==a?e.setUTCHours(a,0,0,0):e.setUTCHours(0,0,0,0),e},incompatibleTokens:["H","K","k","t","T"]},H:{priority:70,parse:function(e,t,a,r){switch(t){case"H":return ot(nt.hour23h,e);case"Ho":return a.ordinalNumber(e,{unit:"hour"});default:return ut(t.length,e)}},validate:function(e,t,a){return t>=0&&t<=23},set:function(e,t,a,r){return e.setUTCHours(a,0,0,0),e},incompatibleTokens:["a","b","h","K","k","t","T"]},K:{priority:70,parse:function(e,t,a,r){switch(t){case"K":return ot(nt.hour11h,e);case"Ko":return a.ordinalNumber(e,{unit:"hour"});default:return ut(t.length,e)}},validate:function(e,t,a){return t>=0&&t<=11},set:function(e,t,a,r){var n=e.getUTCHours()>=12;return n&&a<12?e.setUTCHours(a+12,0,0,0):e.setUTCHours(a,0,0,0),e},incompatibleTokens:["h","H","k","t","T"]},k:{priority:70,parse:function(e,t,a,r){switch(t){case"k":return ot(nt.hour24h,e);case"ko":return a.ordinalNumber(e,{unit:"hour"});default:return ut(t.length,e)}},validate:function(e,t,a){return t>=1&&t<=24},set:function(e,t,a,r){var n=a<=24?a%24:a;return e.setUTCHours(n,0,0,0),e},incompatibleTokens:["a","b","h","H","K","t","T"]},m:{priority:60,parse:function(e,t,a,r){switch(t){case"m":return ot(nt.minute,e);case"mo":return a.ordinalNumber(e,{unit:"minute"});default:return ut(t.length,e)}},validate:function(e,t,a){return t>=0&&t<=59},set:function(e,t,a,r){return e.setUTCMinutes(a,0,0),e},incompatibleTokens:["t","T"]},s:{priority:50,parse:function(e,t,a,r){switch(t){case"s":return ot(nt.second,e);case"so":return a.ordinalNumber(e,{unit:"second"});default:return ut(t.length,e)}},validate:function(e,t,a){return t>=0&&t<=59},set:function(e,t,a,r){return e.setUTCSeconds(a,0),e},incompatibleTokens:["t","T"]},S:{priority:30,parse:function(e,t,a,r){var n=function(e){return Math.floor(e*Math.pow(10,3-t.length))};return ut(t.length,e,n)},set:function(e,t,a,r){return e.setUTCMilliseconds(a),e},incompatibleTokens:["t","T"]},X:{priority:10,parse:function(e,t,a,r){switch(t){case"X":return st(it.basicOptionalMinutes,e);case"XX":return st(it.basic,e);case"XXXX":return st(it.basicOptionalSeconds,e);case"XXXXX":return st(it.extendedOptionalSeconds,e);case"XXX":default:return st(it.extended,e)}},set:function(e,t,a,r){return t.timestampIsSet?e:new Date(e.getTime()-a)},incompatibleTokens:["t","T","x"]},x:{priority:10,parse:function(e,t,a,r){switch(t){case"x":return st(it.basicOptionalMinutes,e);case"xx":return st(it.basic,e);case"xxxx":return st(it.basicOptionalSeconds,e);case"xxxxx":return st(it.extendedOptionalSeconds,e);case"xxx":default:return st(it.extended,e)}},set:function(e,t,a,r){return t.timestampIsSet?e:new Date(e.getTime()-a)},incompatibleTokens:["t","T","X"]},t:{priority:40,parse:function(e,t,a,r){return lt(e)},set:function(e,t,a,r){return[new Date(1e3*a),{timestampIsSet:!0}]},incompatibleTokens:"*"},T:{priority:20,parse:function(e,t,a,r){return lt(e)},set:function(e,t,a,r){return[new Date(a),{timestampIsSet:!0}]},incompatibleTokens:"*"}},vt=pt,bt=10,wt=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,yt=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,St=/^'([^]*?)'?$/,Tt=/''/g,xt=/\S/,Ct=/[a-zA-Z]/;function Dt(e,t,a,r){p(3,arguments);var n=String(e),i=String(t),o=r||{},s=o.locale||se;if(!s.match)throw new RangeError("locale must contain match property");var l=s.options&&s.options.firstWeekContainsDate,u=null==l?1:le(l),d=null==o.firstWeekContainsDate?u:le(o.firstWeekContainsDate);if(!(d>=1&&d<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=s.options&&s.options.weekStartsOn,h=null==c?0:le(c),m=null==o.weekStartsOn?h:le(o.weekStartsOn);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===i)return""===n?b(a):new Date(NaN);var g,f={firstWeekContainsDate:d,weekStartsOn:m,locale:s},v=[{priority:bt,subPriority:-1,set:kt,index:0}],w=i.match(yt).map((function(e){var t=e[0];if("p"===t||"P"===t){var a=$e[t];return a(e,s.formatLong,f)}return e})).join("").match(wt),y=[];for(g=0;g<w.length;g++){var S=w[g];!o.useAdditionalWeekYearTokens&&Ge(S)&&We(S,i,e),!o.useAdditionalDayOfYearTokens&&He(S)&&We(S,i,e);var T=S[0],x=vt[T];if(x){var C=x.incompatibleTokens;if(Array.isArray(C)){for(var D=void 0,k=0;k<y.length;k++){var M=y[k].token;if(-1!==C.indexOf(M)||M===T){D=y[k];break}}if(D)throw new RangeError("The format string mustn't contain `".concat(D.fullToken,"` and `").concat(S,"` at the same time"))}else if("*"===x.incompatibleTokens&&y.length)throw new RangeError("The format string mustn't contain `".concat(S,"` and any other token at the same time"));y.push({token:T,fullToken:S});var _=x.parse(n,S,s.match,f);if(!_)return new Date(NaN);v.push({priority:x.priority,subPriority:x.subPriority||0,set:x.set,validate:x.validate,value:_.value,index:v.length}),n=_.rest}else{if(T.match(Ct))throw new RangeError("Format string contains an unescaped latin alphabet character `"+T+"`");if("''"===S?S="'":"'"===T&&(S=Mt(S)),0!==n.indexOf(S))return new Date(NaN);n=n.slice(S.length)}}if(n.length>0&&xt.test(n))return new Date(NaN);var U=v.map((function(e){return e.priority})).sort((function(e,t){return t-e})).filter((function(e,t,a){return a.indexOf(e)===t})).map((function(e){return v.filter((function(t){return t.priority===e})).sort((function(e,t){return t.subPriority-e.subPriority}))})).map((function(e){return e[0]})),E=b(a);if(isNaN(E))return new Date(NaN);var N=de(E,Fe(E)),P={};for(g=0;g<U.length;g++){var q=U[g];if(q.validate&&!q.validate(N,q.value,f))return new Date(NaN);var Y=q.set(N,P,q.value,f);Y[0]?(N=Y[0],je(P,Y[1])):N=Y}return N}function kt(e,t){if(t.timestampIsSet)return e;var a=new Date(0);return a.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),a.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),a}function Mt(e){return e.match(St)[1].replace(Tt,"'")}function _t(e,t){p(2,arguments);var a=b(e),r=le(t);return isNaN(r)?new Date(NaN):r?(a.setDate(a.getDate()+r),a):a}function Ut(e,t){p(2,arguments);var a=b(e),r=le(t);if(isNaN(r))return new Date(NaN);if(!r)return a;var n=a.getDate(),i=new Date(a.getTime());i.setMonth(a.getMonth()+r+1,0);var o=i.getDate();return n>=o?i:(a.setFullYear(i.getFullYear(),i.getMonth(),n),a)}function Et(e,t){if(p(2,arguments),!t||"object"!==typeof t)return new Date(NaN);var a=t.years?le(t.years):0,r=t.months?le(t.months):0,n=t.weeks?le(t.weeks):0,i=t.days?le(t.days):0,o=t.hours?le(t.hours):0,s=t.minutes?le(t.minutes):0,l=t.seconds?le(t.seconds):0,u=b(e),d=r||a?Ut(u,r+12*a):u,c=i||n?_t(d,i+7*n):d,h=s+60*o,m=l+60*h,g=1e3*m,f=new Date(c.getTime()+g);return f}var Nt,Pt=a("8fe0"),qt={mixins:[Pt["a"]],components:(Nt={flatPicker:c.a},Object(i["a"])(Nt,u.a.name,u.a),Object(i["a"])(Nt,s.a.name,s.a),Nt),data:function(){return{loading:!1,model:{cm_id:"",crop_name:"",crop_type:"",irrigation_type:"",graph_model:"ave",node_address:"",field_id:this.$route.params.field_id,ni:"",nr:"",full:"",refill:"",company_id:null},new_stage:{stage_name:"New Stage",start_date:"",duration:"",lower:0,upper:100},visualEditorStartDate:null,visualEditorModalVisible:!1,saveTemplatesModalVisible:!1,browseTemplatesModalVisible:!1,templateTableColumns:[{key:"name",label:"Template",sortable:!0,tdClass:"valign"},{key:"created_at",label:"Date Created",sortable:!0,tdClass:"valign"},{key:"actions",label:"Actions"}],loadedTemplates:[],loadedTemplateName:"",loadedTemplateId:null,saveTemplateName:"",templateSaveStatus:"",templateLoaded:!1,totalRows:1,currentPage:1,perPage:10,filterText:"",stages:[],stageSeriesData:[],pendingChanges:!1,chartUpdateArgs:[!0,!0,{duration:1e3}],averageSeriesData:[],graphYMax:100,graphYMin:0,defaultStage:{index:0,name:"",lower:0,upper:100,duration:"",x:(new Date).getTime()},currentSelectedStage:{index:null,name:"",lower:null,upper:null,duration:null,x:(new Date).getTime()},prevSelectedStage:null,nextSelectedStage:null,selectedStageIndex:null}},computed:{chartOptions:function(){var e=this;return{credits:{enabled:!1},chart:{zoomType:"x",panning:!0,panKey:"shift"},series:[{type:"areasplinerange",name:"Stages",dataLabels:{enabled:!0,formatter:function(){return this.y==this.point.high||this.y==this.point.low?m.a.numberFormat(this.y,2):void 0}},point:{events:{select:function(t){var a=t.target.index;e.selectedStageIndex=a,e.setStageObjectValues(e.currentSelectedStage,t.target),e.prevSelectedStage="undefined"!==typeof e.stageSeriesData[a-1]?e.stageSeriesData[a-1]:null,e.nextSelectedStage="undefined"!==typeof e.stageSeriesData[a+1]?e.stageSeriesData[a+1]:null},unselect:function(e){return!1}}},allowPointSelect:!0,cursor:"pointer",data:this.stageSeriesData,marker:{states:{select:{fillColor:"#FFA500"}},radius:7},fillColor:{linearGradient:[0,0,0,300],stops:[[0,m.a.getOptions().colors[0]],[1,m.a.color(m.a.getOptions().colors[0]).setOpacity(0).get("rgba")]]}},{type:"spline",name:"Average",data:this.averageSeriesData,color:"#000000"}],tooltip:{formatter:function(e){if(this.series){if("Stages"==this.series.name){var t="<div>";return t+="Stage: <strong>"+this.point.name+"</strong><br>",t+="Start: <strong>"+Xe(new Date(this.point.x),"yyyy-MM-dd")+"</strong><br>",t+="Duration: <strong>"+this.point.duration+"</strong><br>",t+="Upper %: <strong>"+this.point.upper+"</strong><br>",t+="Lower %: <strong>"+this.point.lower+"</strong><br>",t+="</div>",t}if("Average"==this.series.name){var a="<div>",r="N/A";if(this.point.stage&&this.point.model){var n=this.point.model.full-this.point.model.refill,i=this.point.model.refill+n*this.point.stage.upper/100,o=this.point.model.refill+n*this.point.stage.lower/100;r=m.a.numberFormat((this.point.y-o)/(i-o)*100)}return a+=m.a.dateFormat("%Y-%m-%d %H:%M:%S",this.point.x)+"<br>",a+="Average: <strong>"+this.point.y+"%</strong><br>",a+="Status: <strong>"+r+"%</strong><br>",a+="</div>",a}}return e.defaultFormatter.call(this,e)},distance:50,shape:"rect"},xAxis:{title:{text:""},type:"datetime",softMin:this.xAxisSoftMin,crosshair:!0,tickInterval:1},yAxis:{tickInterval:1,title:{text:""},min:this.graphYMin,max:this.graphYMax,minPadding:0,maxPadding:0,plotLines:[{value:this.model.full,color:"#00F",width:2,label:{x:0,align:"right",formatter:function(){return"Full: "+e.model.full}}},{value:this.model.refill,color:"#D26761",width:2,label:{x:0,align:"right",formatter:function(){return"Refill: "+e.model.refill}}}]},exporting:{enabled:!1},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom"},plotOptions:{series:{keys:["id","name","x","low","high","lower","upper","duration","stage"],states:{inactive:{opacity:1}},allowPointSelect:!1,boostThreshold:0,turboThreshold:0,stickyTracking:!1}},title:{text:""}}},visualEditorTitle:function(){var e="Cultivar Visual Editor";return this.loadedTemplateName&&(e+=": "+this.loadedTemplateName),this.pendingChanges&&(e+="*"),e},getEffectiveUpper:function(){if(this.model&&this.currentSelectedStage){var e=this.model.full-this.model.refill;return e?"("+m.a.numberFormat(this.model.refill+e*(this.currentSelectedStage.upper/100),2)+")":""}return""},getEffectiveLower:function(){if(this.model&&this.currentSelectedStage){var e=this.model.full-this.model.refill;return e?"("+m.a.numberFormat(this.model.refill+e*(this.currentSelectedStage.lower/100),2)+")":""}return""}},watch:{stageSeriesData:{handler:function(e){this.chartOptions.series[0].data=e},deep:!0},averageSeriesData:{handler:function(e){this.chartOptions.series[1].data=e,this.$refs.hchart.chart.redraw()},deep:!0},graphYMin:{handler:function(e){this.chartOptions.yAxis.min=parseFloat(e)},deep:!0},graphYMax:{handler:function(e){this.chartOptions.yAxis.max=parseFloat(e)},deep:!0},saveTemplateName:{handler:function(e){this.templateSaveStatus=this.loadedTemplateName!=e?"A new template will be created.":"Existing template will be updated."}},visualEditorStartDate:{handler:function(e){var t=Dt(e,"yyyy-MM-dd",new Date);t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),this.xAxisSoftMin=t.getTime(),this.visualEditorLoadGraphData()}}},mounted:function(){this.loadCultivarData()},methods:{loadCultivarData:function(){var e=this;this.loading=!0,this.$axios.get(this.$store.state.baseUrl+"/api/ManageCultivars/"+this.$route.params.field_id).then((function(t){e.loading=!1,e.model=t.data.fields,e.stages=t.data.stages,e.setNextStageStartDate()}))},loadCultivarStageTemplates:function(){var e=this;this.loading=!0,this.$axios.get(this.$store.state.baseUrl+"/api/loadCultiTemplates/"+this.model.company_id).then((function(t){e.loading=!1,e.loadedTemplates=t.data.templates,e.totalRows=e.loadedTemplates.length}))},openVisualEditor:function(){this.visualEditorModalVisible=!0,this.visualEditorSetStartDate()},confirmVisualEditorClose:function(e){var t=this;e&&e.preventDefault(),this.pendingChanges?f.a.fire({title:"Close Editor?",text:"Please confirm",showCancelButton:!0,confirmButtonText:"Close",buttonsStyling:!1,customClass:{cancelButton:"btn btn-outline-primary",confirmButton:"btn btn-primary"}}).then((function(e){e.value&&t.closeVisualEditor()})):this.closeVisualEditor()},closeVisualEditor:function(){this.pendingChanges=!1,this.templateLoaded=!1,this.loadedTemplateName="",this.stageSeriesData=[],this.visualEditorModalVisible=!1,this.visualEditorStartDate=null,this.setStageObjectValues(this.currentSelectedStage,this.defaultStage)},visualEditorLoadGraphData:function(){var e=this;this.visualEditorStartDate&&(this.loading=!0,this.$axios.post(this.$store.state.baseUrl+"/api/Graph",{unit_of_measure:this.$store.state.user_obj.unit_of_measure,type:"ave",node_address:this.model.node_address,sub_days:0,custom_start_date:this.visualEditorStartDate}).then((function(t){e.loading=!1,e.stages.length&&e.visualEditorSetGraphStageData(e.stages),t.data&&e.visualEditorSetAverageStageData(t.data.graph.series[0].data)})))},visualEditorSetAverageStageData:function(e){var t=this;if(e.length&&this.stageSeriesData.length){this.averageSeriesData=[];var a=this.model.refill,r=this.model.full;e.forEach((function(n,i){var o=null;t.stageSeriesData.every((function(e){return!(n.x>=e.x&&n.x<=e.x+24*e.duration*3600*1e3)||(o=e,!1)})),e[i]["stage"]=o,e[i]["model"]=t.model,a=n.y<a?n.y:a,r=n.y>r?n.y:r,t.averageSeriesData.push(e[i])})),this.graphYMax=parseFloat(r)+1,this.graphYMin=parseFloat(a)-1}return e},visualEditorSetGraphStageData:function(e){var t=this;if(e.length&&this.visualEditorStartDate){var a=e[e.length-1],r=Dt(this.visualEditorStartDate,"yyyy-MM-dd",new Date);r.setMinutes(r.getMinutes()-r.getTimezoneOffset());var n=r.getTime(),i=100,o=0,s=parseFloat(this.model.full),l=parseFloat(this.model.refill),u=s-l;this.stageSeriesData=[],e.forEach((function(e,a){var r=parseFloat(l+u*(e.lower/100)),s=parseFloat(l+u*(e.upper/100));t.stageSeriesData.push({index:a,name:e.stage_name,x:n,low:r,high:s,lower:parseFloat(e.lower),upper:parseFloat(e.upper),duration:parseInt(e.duration),id:e.id,selected:!1}),n+=24*parseInt(e.duration)*3600*1e3,i=r<i?r:i,o=s>o?s:o})),this.stageSeriesData.push({index:this.stageSeriesData.length,name:a.stage_name+" End",x:n,low:parseFloat(l+u*(a.lower/100)),high:parseFloat(l+u*(a.upper/100)),lower:parseFloat(a.lower),upper:parseFloat(a.upper),duration:0,id:null,visible:!1,selected:!1}),i=l<i?l:i,o=s>o?s:o,this.graphYMax=parseFloat(o)+1,this.graphYMin=parseFloat(i)-1,this.stageSeriesData[0].selected=!0,this.selectedStageIndex=0,this.setStageObjectValues(this.currentSelectedStage,this.stageSeriesData[0])}return this.stageSeriesData},visualEditorGetGraphStageData:function(){var e=this.$refs.hchart.chart.series[0],t=[],a=this.visualEditorStartDate;return e.data.length>0&&a.length&&(e.data.forEach((function(e,r){t.push({id:e.id,stage_name:e.name,stage_start_date:a,lower:parseFloat(m.a.numberFormat(e.lower,2)),upper:parseFloat(m.a.numberFormat(e.upper,2)),duration:e.duration});var n=Dt(a,"yyyy-MM-dd",new Date);n=Et(n,{days:e.duration}),a=Xe(n,"yyyy-MM-dd")})),t.pop()),t},visualEditorStageSelected:function(e){var t=this.$refs.hchart.chart.series[0];t.data.length&&t.data.forEach((function(t){t.index==e&&t.select(!0,!1)}))},visualEditorUpdateStage:function(){var e=this;this.$refs.plotterstage.validate().then((function(t){if(t){var a=e.graphYMax,r=e.graphYMin,n=parseFloat(e.model.full),i=parseFloat(e.model.refill),o=n-i;e.stageSeriesData.forEach((function(t,n){if(e.currentSelectedStage.index==n){e.pendingChanges=!0;var s=e.stageSeriesData[n],l="undefined"!==typeof e.stageSeriesData[n-1]?e.stageSeriesData[n-1]:null,u=("undefined"!==typeof e.stageSeriesData[n+1]&&e.stageSeriesData[n+1],new Date(e.currentSelectedStage.x).getTime()),d=parseInt(t.x),c=u-d,h=parseInt(e.currentSelectedStage.duration),m=parseInt(t.duration),g=h-m;if(s.name=e.currentSelectedStage.name,s.high=parseFloat(i+o*(e.currentSelectedStage.upper/100)),s.low=parseFloat(i+o*(e.currentSelectedStage.lower/100)),s.upper=parseFloat(e.currentSelectedStage.upper),s.lower=parseFloat(e.currentSelectedStage.lower),s.duration=parseInt(e.currentSelectedStage.duration),s.x=new Date(e.currentSelectedStage.x).getTime(),r=s.low<r?s.low:r,a=s.high>a?s.high:a,s.index==e.stageSeriesData.length-2){var f=e.stageSeriesData.length-1;e.stageSeriesData[f].low=s.low,e.stageSeriesData[f].high=s.high,e.stageSeriesData[f].upper=s.upper,e.stageSeriesData[f].lower=s.lower}for(var p=0;p<e.stageSeriesData.length;p++)e.stageSeriesData[p].selected=!1;if(s.selected=!0,g){g*=864e5;for(p=e.currentSelectedStage.index+1;p<e.stageSeriesData.length;p++)e.stageSeriesData[p].x+=g}if(c){for(p=e.currentSelectedStage.index+1;p<e.stageSeriesData.length;p++)e.stageSeriesData[p].x+=c;if(l){var v=Math.floor(c/864e5);l.duration+=v}}}})),r=i<r?i:r,a=n>a?n:a,e.graphYMax=parseFloat(a)+1,e.graphYMin=parseFloat(r)-1}}))},showBrowseTemplatesModal:function(){this.loadCultivarStageTemplates(),this.browseTemplatesModalVisible=!0},activateCultivarTemplate:function(e,t){var a=null;try{a=JSON.parse(t.template)}catch(r){console.log(r.name+":"+r.message)}a&&(this.visualEditorSetGraphStageData(a),this.closeBrowseTemplatesModal(),this.templateLoaded=!0,this.loadedTemplateName=t.name,this.loadedTemplateId=t.id)},removeCultivarTemplate:function(e,t){var a=this;f.a.fire({title:"Remove Template?",text:"Template will be permanently deleted",showCancelButton:!0,confirmButtonText:"Remove Template",buttonsStyling:!1,customClass:{cancelButton:"btn btn-outline-primary",confirmButton:"btn btn-primary"}}).then((function(e){e.value&&(a.loading=!0,a.$axios.post(a.$store.state.baseUrl+"/api/removeCultiTemplate",{id:t.id}).then((function(e){if(a.loading=!1,"template_removed"==e.data.status){var r=a.loadedTemplates.findIndex((function(e){return e.id===t.id}));r>=0&&a.loadedTemplates.splice(r,1),a.$notify({title:"Success",message:"Template Removed",type:"success",verticalAlign:"top",horizontalAlign:"right"})}})))}))},closeBrowseTemplatesModal:function(){this.browseTemplatesModalVisible=!1},showSaveTemplatesModal:function(){this.saveTemplatesModalVisible=!0,this.saveTemplateName=this.loadedTemplateName},saveCultivarTemplate:function(){var e=this;this.$refs.savetpl.validate().then((function(t){if(t){var a=e.visualEditorGetGraphStageData();a.forEach((function(e){e.stage_start_date=null,e.id=null})),e.loading=!0,e.$axios.post(e.$store.state.baseUrl+"/api/saveCultiTemplate",{template_name:e.saveTemplateName,stages:JSON.stringify(a),new:e.saveTemplateName!=e.loadedTemplateName?"yes":"no",company_id:e.model.company_id,id:e.loadedTemplateId}).then((function(t){e.loading=!1,"template_saved"==t.data.status?(e.pendingChanges=!1,e.closeSaveTemplatesModal(),e.loadCultivarStageTemplates(),e.$notify({title:"Success",message:"Template Saved",type:"success",verticalAlign:"top",horizontalAlign:"right"})):"template_save_error"==t.data.status&&(e.closeSaveTemplatesModal(),e.$notify({title:"Failed",message:"Failed to save template. Contact your admin.",type:"warning",verticalAlign:"top",horizontalAlign:"right"}))}))}}))},closeSaveTemplatesModal:function(){this.saveTemplatesModalVisible=!1},applyGraphDataToStages:function(){var e=this;f.a.fire({title:"Apply Changes?",text:"Current growth stages will be completely replaced.",showCancelButton:!0,confirmButtonText:"Apply Changes",buttonsStyling:!1,customClass:{cancelButton:"btn btn-outline-primary",confirmButton:"btn btn-primary"}}).then((function(t){if(t.value){var a=e.visualEditorGetGraphStageData();e.updateOrCreateCultivarStages(a),e.closeVisualEditor(),e.refreshStages(),e.$notify({title:"Success",message:"Stages Applied",type:"success",verticalAlign:"top",horizontalAlign:"right"})}}))},updateOrCreateCultivarStages:function(e){var t=this;if(e.length){var a=this.templateLoaded||0==this.stages.length?"yes":"no",r=this.templateLoaded&&this.stages.length>0?"yes":"no";this.loading=!0,this.$axios.post(this.$store.state.baseUrl+"/api/stagesSet",{cm_id:this.model.cm_id,company_id:this.model.company_id,stages:e,new:a,replace:r}).then((function(e){t.loading=!1,"stages_set"==e.data.status&&(t.loading=!0,t.$axios.get(t.$store.state.baseUrl+"/api/ManageCultivars/"+t.$route.params.field_id).then((function(e){t.loading=!1,t.stages=e.data.stages,t.$notify({title:"Success",message:"Stages Applied",type:"success",verticalAlign:"top",horizontalAlign:"right"})})))}))}},visualEditorSetStartDate:function(){this.visualEditorStartDate=this.stages.length&&this.stages[0].stage_start_date?this.stages[0].stage_start_date:Xe(new Date,"yyyy-MM-dd")},calcMinDate:function(e){if(e&&"undefined"!==typeof this.stages[e]){var t=Dt(this.stages[e].stage_start_date,"yyyy-MM-dd",new Date);return t.getTime()}return null},calcMaxDate:function(e){if(e&&"undefined"!==typeof this.stages[e]){if(e==this.stages.length-1)return null;var t=Dt(this.stages[e+1].stage_start_date,"yyyy-MM-dd",new Date);return t.getTime()}return null},calcNewMinDate:function(e){if(this.stages.length){var t=Dt(this.stages[this.stages.length-1].stage_start_date,"yyyy-MM-dd",new Date);return t=Et(t,{days:parseInt(this.stages[this.stages.length-1].duration)}),Xe(t,"yyyy-MM-dd")}return null},setNextStageStartDate:function(){if(this.stages.length){var e=Dt(this.stages[this.stages.length-1].stage_start_date,"yyyy-MM-dd",new Date);e=Et(e,{days:parseInt(this.stages[this.stages.length-1].duration)}),this.new_stage.start_date=Xe(e,"yyyy-MM-dd")}else this.new_stage.start_date=Xe(new Date,"yyyy-MM-dd")},addStage:function(){var e=this;this.$refs.addstage.validate().then((function(t){t&&(e.loading=!0,e.$axios.post(e.$store.state.baseUrl+"/api/stageAdd",{cm_id:e.model.cm_id,stage_name:e.new_stage.stage_name,stage_start_date:e.new_stage.start_date,duration:e.new_stage.duration,lower:e.new_stage.lower,upper:e.new_stage.upper,company_id:e.model.company_id}).then((function(t){e.loading=!1,"stage_added"==t.data.status&&(e.$notify({title:"Success",message:"New stage added",type:"success",verticalAlign:"top",horizontalAlign:"right"}),e.refreshStages())})).catch((function(t){e.loading=!1,t.response.data.errors&&e.$refs.form.setErrors(t.response.data.errors)})))}))},updateStage:function(e){var t=this;this.$refs.updatestage.validate().then((function(a){a&&(t.loading=!0,t.$axios.post(t.$store.state.baseUrl+"/api/stagesUpdate",{stage:e,stages:t.stages,company_id:t.model.company_id}).then((function(e){t.loading=!1,"stages_updated"==e.data.status&&(t.$notify({title:"Updated",message:"Stage was updated",type:"success",verticalAlign:"top",horizontalAlign:"right"}),t.refreshStages())})).catch((function(e){t.loading=!1,e.response.data.errors&&t.$refs.form.setErrors(e.response.data.errors)})))}))},deleteLastStage:function(){var e=this;this.loading=!0,this.stages.length&&this.$axios.post(this.$store.state.baseUrl+"/api/stageDeleteLast",{cm_id:this.model.cm_id}).then((function(t){e.loading=!1,"stage_deleted"==t.data.status&&(e.$notify({title:"Deleted",message:"Last stage was deleted",type:"success",verticalAlign:"top",horizontalAlign:"right"}),e.refreshStages())})).catch((function(t){e.loading=!1,t.response.data.errors&&e.$refs.form.setErrors(t.response.data.errors)}))},refreshStages:function(){var e=this;this.loading=!0,this.$axios.get(this.$store.state.baseUrl+"/api/ManageCultivars/"+this.$route.params.field_id).then((function(t){e.loading=!1,e.stages=t.data.stages,e.setNextStageStartDate()}))},setStageObjectValues:function(e,t){e.index=t.index,e.name=t.name,e.lower=t.lower,e.upper=t.upper,e.duration=t.duration,e.x=t.x},syncFields:function(){var e=this;this.$refs.form.validate().then((function(t){t?(e.loading=!0,e.$axios.post(e.$store.state.baseUrl+"/api/CultivarSave",e.model).then((function(t){e.loading=!1,t.data&&"cultivar_updated"==t.data.message&&e.$notify({title:"Saved",message:"Changes were saved",type:"success",verticalAlign:"top",horizontalAlign:"right"})})).catch((function(t){e.loading=!1,t.response.data.errors&&e.$refs.form.setErrors(t.response.data.errors)}))):e.$notify({title:"Required",message:"Please fill in all fields",type:"danger",verticalAlign:"top",horizontalAlign:"right",duration:1e3,clean:!0})}))},goToGraph:function(){this.$router.push({name:"soil_moisture_graph",params:{node_address:this.model.node_address}})}}},Yt=qt,Ot=(a("e90c"),a("2877")),$t=Object(Ot["a"])(Yt,r,n,!1,null,null,null);t["default"]=$t.exports},e90c:function(e,t,a){"use strict";a("2829")}}]);
//# sourceMappingURL=chunk-0a5b6f08.9d4593d8.js.map