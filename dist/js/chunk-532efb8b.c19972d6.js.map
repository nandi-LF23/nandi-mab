{"version":3,"sources":["webpack:///./src/views/Pages/Map.vue?367f","webpack:///src/views/Pages/Map.vue","webpack:///./src/views/Pages/Map.vue?0d84","webpack:///./src/views/Pages/Map.vue","webpack:///./src/views/Pages/Map.vue?c0f0"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","on","toggleBurger","scopedSlots","_u","key","fn","attrs","visibleMarkers","$event","doTextSearch","model","value","callback","$$v","fieldNameSearch","expression","directives","name","rawName","filterFields","staticStyle","nodeFilterTypes","filterNodeType","stopPropagation","preventDefault","apply","arguments","nodeFilterType","proxy","_l","marker","index","join","infoFilterType","class","node_address","selectedNode","focusMarker","_v","_s","field_name","style","calcLastReadingColor","date_time","node_type","status","_e","full","refill","goToGraph","battLevel","charging","mapboxObj","$store","state","mapBoxAccessToken","mapStyle","startPos","mapLoaded","scaleMarkers","refInFor","position","toggleMarkerPopup","slot","calcMarkerIconColor","markerScale","calcMarkerBorderColor","popupClosed","userCan","id","togglePump","$set","pump_status","last_reading","formatUOM","measurement_type","inner","idx","base_node_address","Math","abs","latt","lng","includes","sm1","sm2","sm3","sm4","sm5","sm6","sm7","sm8","sm9","sm10","sm11","sm12","sm13","sm14","sm15","t1","t2","t3","t4","t5","t6","t7","t8","t9","t10","t11","t12","t13","t14","t15","getters","getUOMEntity","getUOM","infoFilterTypes","toggleLegendModal","close","hide","domProps","renderSvgIcon","ok","cancel","showLegendModal","staticRenderFns","mixins","components","MglMap","MglMarker","MglPopup","FocusMenu","BVIndicator","SMStatusGraph","SMStatusIndicator","SMLevelsIndicator","SoilTempIndicator","MeterReading","data","loading","startZoom","map","markers","toggleVisible","visiblePopups","mapActions","fieldsData","bounds","refreshTimer","bInitialQuery","text","created","mounted","methods","e","MapboxGL","component","actions","loadFieldsData","is_refresh","$axios","post","then","resp","swal","title","showCancelButton","confirmButtonText","buttonsStyling","customClass","cancelButton","confirmButton","catch","setupMap","document","resizeTheMap","setTimeout","getZoom","saveMapSettings","getCenter","dispatch","settings","focusMarkersEase","easeTo","center","duration","animate","easing","essential","focusMarkersFly","flyTo","zoom","filterLabels","getStyle","layers","forEach","layer","populateMarkers","item","date_diff","node_id","field_id","graph_type","graph_start_date","parseFloat","bp","pulse_1","nutrient_lower","nutrient_upper","nutrient_gauge","marker_outline_color","m","resultCount","calcBounds","fitBounds","linear","maxZoom","padding","showAllMarkers","length","_bounds","reading","type","color","formatNodeType","get","message","verticalAlign","horizontalAlign","$router","push","params","beforeRouteLeave","to","from","next"],"mappings":"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","file":"js/chunk-532efb8b.c19972d6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"map_container\"},[_c('FocusMenu',{ref:\"focusmenu\",on:{\"focusMenuChanged\":_vm.toggleBurger},scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('div',{staticClass:\"search_wrapper clearfix\"},[_c('b-form-input',{staticClass:\"form-control-flush fields_search\",attrs:{\"disabled\":!_vm.visibleMarkers,\"placeholder\":\"Search...\"},on:{\"input\":function($event){return _vm.doTextSearch()}},model:{value:(_vm.fieldNameSearch),callback:function ($$v) {_vm.fieldNameSearch=$$v},expression:\"fieldNameSearch\"}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.fieldNameSearch),expression:\"fieldNameSearch\"}],staticClass:\"fields_search_clear_btn\",on:{\"click\":function($event){_vm.fieldNameSearch='';_vm.filterFields();}}})],1),_c('b-form-group',{staticClass:\"type_filter_menu\"},[_c('b-form-checkbox-group',{staticStyle:{\"width\":\"100%\"},attrs:{\"options\":_vm.nodeFilterTypes,\"size\":\"sm\",\"buttons\":\"\",\"button-variant\":\"primary\"},on:{\"change\":_vm.filterNodeType,\"click\":function($event){$event.stopPropagation();$event.preventDefault();return (function () {}).apply(null, arguments)}},model:{value:(_vm.nodeFilterType),callback:function ($$v) {_vm.nodeFilterType=$$v},expression:\"nodeFilterType\"}})],1)]},proxy:true}])},[_vm._l((_vm.markers),function(marker,index){return [(marker.visible)?_c('div',{key:_vm.nodeFilterType.join('')+_vm.infoFilterType.join('')+index,staticClass:\"field_record\",class:marker.node_address == _vm.selectedNode ? 'field_record_selected' : '',on:{\"click\":function($event){return _vm.focusMarker(marker)}}},[_c('div',{staticClass:\"field_name\"},[_vm._v(_vm._s(marker.field_name))]),_c('div',{staticClass:\"node_address\"},[_vm._v(_vm._s(marker.node_address))]),_c('div',{staticClass:\"last_reading_date\",style:('color:' + _vm.calcLastReadingColor(marker))},[_vm._v(_vm._s(marker.date_time))]),(marker.node_type=='sm' && marker.status)?_c('div',{staticClass:\"field_sm_status\"},[_vm._v(\"Status: \"+_vm._s(marker.status)+\"%\")]):_vm._e(),_c('div',{staticClass:\"indicators\"},[(marker.node_type=='sm' && marker.status)?_c('SMStatusGraph',{attrs:{\"full\":marker.full,\"status\":marker.status,\"refill\":marker.refill,\"size\":'35%',\"tooltip\":'F: ' + marker.full + '%, S: ' + marker.status + '%, R: ' + marker.refill + '%',\"label\":'S.M'},on:{\"clicked\":function($event){return _vm.goToGraph(marker)}}}):_c('div',{staticStyle:{\"width\":\"35%\"}}),_c('BVIndicator',{attrs:{\"level\":marker.battLevel,\"size\":'35%',\"charging\":marker.charging,\"tooltip\":'Level: ' + marker.battLevel + '%'}})],1)]):_vm._e()]})],2),_c('MglMap',{attrs:{\"repaint\":true,\"mapboxGl\":_vm.mapboxObj,\"accessToken\":_vm.$store.state.mapBoxAccessToken,\"mapStyle\":_vm.mapStyle,\"attributionControl\":false,\"center\":_vm.startPos,\"logoPosition\":\"bottom-right\"},on:{\"update:mapStyle\":function($event){_vm.mapStyle=$event},\"update:map-style\":function($event){_vm.mapStyle=$event},\"load\":_vm.mapLoaded,\"zoom\":_vm.scaleMarkers,\"zoomend\":_vm.filterFields,\"dragend\":_vm.filterFields}},[_vm._l((_vm.markers),function(marker){return [(marker.visible)?_c('MglMarker',{key:marker.node_address,ref:marker.node_address,refInFor:true,attrs:{\"coordinates\":marker.position,\"anchor\":\"top\"},on:{\"click\":function($event){return _vm.toggleMarkerPopup(marker)}}},[_c('div',{staticClass:\"field_marker\",attrs:{\"slot\":\"marker\"},slot:\"marker\"},[_c('div',{staticClass:\"marker\",style:('color:' + _vm.calcMarkerIconColor(marker, marker.status, marker.node_type) + '; transform:scale(' + _vm.markerScale + '); transform-origin:top center;' + _vm.calcMarkerBorderColor(marker))},[(marker.node_type=='well')?[_c('svg',{attrs:{\"stroke-linejoin\":\"bevel\",\"fill-rule\":\"evenodd\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"overflow\":\"visible\",\"width\":\"100%\",\"height\":\"100%\",\"viewBox\":\"0 0 165 187.5\"}},[_c('path',{attrs:{\"stroke-width\":\"0\",\"d\":\"M.001 187.5v-7.499h7.484v-52.499h7.482v-7.501h7.482V67.5H7.484v-7.499h14.965V39.002L7.484 45.001H0V30h7.484v.001l74.829-30 74.83 30h7.483v15.001h-7.484l-.001-.001-14.964-5.998.001 20.998h7.857v-.002h7.482V75H165v7.499h-7.483v.001h-7.482v-15h-7.857v52.501h7.482v7.501h7.483v52.499h7.482v7.499H.001zm119.728-59.998v-7.501h7.482V67.5h-14.967v7.501h-26.04v15h18.558l-7.484 30h-29.93l-7.483-30h18.857v-15h-26.34V67.5H37.416v52.501h7.482v7.501h74.831zM52.382 60.001v-7.499h59.862v7.499h14.967V33.002L82.313 15.001l-44.897 18v27h14.966z\",\"fill\":\"currentColor\",\"stroke\":\"white\",\"font-family\":\"Times New Roman\",\"font-size\":\"16\"}})])]:(marker.node_type=='meter')?[_c('svg',{attrs:{\"stroke-linejoin\":\"bevel\",\"fill-rule\":\"evenodd\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"overflow\":\"visible\",\"width\":\"100%\",\"height\":\"100%\",\"viewBox\":\"0 0 225 150\"}},[_c('path',{attrs:{\"stroke-width\":\"0\",\"d\":\"M43.746 105.001H22.499V120H0V29.999h22.499V45h21.246C55.326 18.519 81.762 0 112.498 0c30.735 0 57.171 18.519 68.752 45h21.249V29.999h22.499V120h-22.499v-14.999h-21.25C169.669 131.482 143.233 150 112.498 150c-30.736 0-57.172-18.518-68.752-44.999zM179.998 75c0-37.26-30.24-67.5-67.5-67.5-37.26 0-67.5 30.24-67.5 67.5 0 37.26 30.24 67.5 67.5 67.5 37.26 0 67.5-30.24 67.5-67.5zm-127.5 0c0-33.12 26.88-60 60-60 33.12 0 60 26.88 60 60 0 33.12-26.88 60-60 60-33.12 0-60-26.88-60-60zm37.5 22.5V82.501H74.999V97.5h14.999zm30-.001V82.5h-14.999v14.999h14.999zm30 0V82.5h-14.999v14.999h14.999zm.001-30V52.5H74.998v14.999h75.001z\",\"fill\":\"currentColor\",\"stroke\":\"white\",\"font-family\":\"Times New Roman\",\"font-size\":\"16\"}})])]:(marker.node_type=='sm')?[_c('svg',{attrs:{\"stroke-width\":\".501\",\"stroke-linejoin\":\"bevel\",\"fill-rule\":\"evenodd\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"overflow\":\"visible\",\"width\":\"100%\",\"height\":\"100%\",\"viewBox\":\"0 0 90 187.5\"}},[_c('g',{attrs:{\"stroke-linecap\":\"round\",\"stroke\":\"none\",\"fill\":\"none\",\"font-size\":\"16\"}},[_c('path',{attrs:{\"d\":\"m37.499 187.5-15-15V45l-7.5-7.5V7.499H0V0h74.999v7.499H59.998v7.502h22.5v-7.5h7.501V37.5h-7.501V30h-22.5l.001 7.5-7.5 7.5v127.5l-15 15Z\",\"fill\":\"currentColor\"}}),_c('path',{attrs:{\"d\":\"m7.177 124.653 15.222-1.48c.916 5.109 2.776 8.861 5.576 11.258 2.801 2.396 6.579 3.595 11.338 3.595 5.038 0 8.835-1.066 11.39-3.198 2.554-2.132 3.83-4.625 3.832-7.48-.002-1.831-.538-3.39-1.613-4.677-1.074-1.285-2.95-2.404-5.629-3.355-1.831-.635-6.008-1.762-12.527-3.383-8.386-2.079-14.27-4.635-17.653-7.665-4.757-4.263-7.135-9.461-7.135-15.592 0-3.946 1.119-7.637 3.356-11.072 2.237-3.437 5.462-6.053 9.673-7.85 4.211-1.796 9.294-2.695 15.247-2.695 9.726 0 17.046 2.132 21.962 6.395 4.915 4.264 7.496 9.954 7.743 17.072l-15.645.687c-.669-3.981-2.104-6.844-4.307-8.588-2.202-1.744-5.506-2.617-9.911-2.617-4.544 0-8.104.935-10.677 2.802-1.657 1.198-2.483 2.801-2.483 4.81 0 1.832.774 3.4 2.325 4.704 1.973 1.655 6.766 3.381 14.376 5.179 7.612 1.797 13.241 3.656 16.888 5.576 3.647 1.922 6.501 4.547 8.562 7.875 2.061 3.33 3.092 7.444 3.092 12.342 0 4.439-1.232 8.598-3.699 12.474-2.466 3.877-5.956 6.757-10.466 8.641-4.51 1.885-10.13 2.828-16.861 2.828-9.796 0-17.319-2.264-22.569-6.792-5.25-4.527-8.386-11.126-9.407-19.794Z\",\"fill-rule\":\"nonzero\",\"stroke-linejoin\":\"round\",\"stroke-width\":\".375\",\"fill\":\"#fff\",\"stroke-miterlimit\":\"79.84\"}})])])]:(marker.node_type=='nut')?[_c('svg',{attrs:{\"stroke-width\":\".501\",\"stroke-linejoin\":\"bevel\",\"fill-rule\":\"evenodd\",\"xmlns\":\"http://www.w3.org/2000/svg\",\"overflow\":\"visible\",\"width\":\"100%\",\"height\":\"100%\",\"viewBox\":\"0 0 90 187.5\"}},[_c('g',{attrs:{\"stroke-linecap\":\"round\",\"stroke\":\"none\",\"fill\":\"none\",\"font-size\":\"16\"}},[_c('path',{attrs:{\"d\":\"m37.499 187.5-15-15V45l-7.5-7.5V7.499H0V0h74.999v7.499H59.998v7.502h22.5v-7.5h7.501V37.5h-7.501V30h-22.5l.001 7.5-7.5 7.5v127.5l-15 15Z\",\"fill\":\"currentColor\"}}),_c('path',{attrs:{\"d\":\"M9.001 147.09V75.155h14.132l29.441 48.039V75.155h13.493v71.935H51.494l-28.999-46.909v46.909H9.001Z\",\"fill-rule\":\"nonzero\",\"stroke-linejoin\":\"round\",\"stroke-width\":\".375\",\"fill\":\"#fff\",\"stroke-miterlimit\":\"79.84\"}})])])]:_vm._e()],2)]),_c('MglPopup',{attrs:{\"closeButton\":true,\"anchor\":\"bottom\",\"maxWidth\":\"auto\",\"closeOnClick\":false},on:{\"close\":_vm.popupClosed}},[_c('div',{staticClass:\"marker_info_wrap\"},[(marker.node_type=='well')?_c('div',{staticClass:\"pump_control\"},[_c('div',{staticClass:\"field_name\"},[_vm._v(_vm._s(marker.field_name))]),_c('div',{staticClass:\"node_address\"},[_vm._v(_vm._s(marker.node_address))]),_c('div',{staticClass:\"last_reading_date\"},[_vm._v(_vm._s(marker.date_time))]),_c('div',{staticClass:\"pump_control_inner\"},[_c('b-form-checkbox',{attrs:{\"disabled\":!_vm.userCan('Toggle', 'Well Controls', marker.id, 'O'),\"switch\":\"\",\"size\":\"lg\"},on:{\"change\":function($event){return _vm.togglePump(marker)}},model:{value:(marker.pump_status),callback:function ($$v) {_vm.$set(marker, \"pump_status\", $$v)},expression:\"marker.pump_status\"}},[_vm._v(\"\\n                  \"+_vm._s(marker.pump_status ? 'Pump: On' : 'Pump: Off')+\"\\n                \")])],1)]):_vm._e(),(marker.node_type=='meter')?_c('div',{staticClass:\"meter_control\"},[_c('div',{staticClass:\"field_name\"},[_vm._v(_vm._s(marker.field_name))]),_c('div',{staticClass:\"node_address\"},[_vm._v(_vm._s(marker.node_address))]),_c('div',{staticClass:\"last_reading_date\"},[_vm._v(_vm._s(marker.date_time))]),_c('MeterReading',{attrs:{\"reading\":marker.last_reading,\"suffix\":_vm.formatUOM(marker.measurement_type)}})],1):_vm._e(),(marker.node_type=='sm')?_c('div',{staticClass:\"sm_control\"},[_vm._l((_vm.markers),function(inner,idx){return [(\n                  inner.base_node_address == marker.base_node_address &&\n                  inner.node_type == 'sm' &&\n                  inner.date_time != '1970-01-01 00:00:00' &&\n                  (Math.abs(inner.latt - marker.latt) < 0.00001) &&\n                  (Math.abs(inner.lng  - marker.lng ) < 0.00001)\n                )?_c('div',{key:idx,staticClass:\"sm_control_item\",class:inner.node_address == _vm.selectedNode ? 'selected_node' : ''},[_c('div',{staticClass:\"field_name\"},[_vm._v(_vm._s(inner.field_name))]),_c('div',{staticClass:\"node_address\"},[_vm._v(_vm._s(inner.node_address))]),_c('div',{staticClass:\"last_reading_date\"},[_vm._v(_vm._s(inner.date_time))]),_c('div',{staticClass:\"marker_info_horz\"},[(_vm.infoFilterType.includes('sm_status') && inner.status)?_c('SMStatusIndicator',{attrs:{\"size\":'5em',\"full\":inner.full,\"status\":inner.status,\"refill\":inner.refill,\"accordion\":true,\"showNumbers\":true}}):_vm._e(),(_vm.infoFilterType.includes('sm_levels') && inner.sm1)?_c('SMLevelsIndicator',{attrs:{\"size\":'5em',\"tooltip\":'S.M Levels',\"sm1\":inner.sm1,\"sm2\":inner.sm2,\"sm3\":inner.sm3,\"sm4\":inner.sm4,\"sm5\":inner.sm5,\"sm6\":inner.sm6,\"sm7\":inner.sm7,\"sm8\":inner.sm8,\"sm9\":inner.sm9,\"sm10\":inner.sm10,\"sm11\":inner.sm11,\"sm12\":inner.sm12,\"sm13\":inner.sm13,\"sm14\":inner.sm14,\"sm15\":inner.sm15}}):_vm._e(),(_vm.infoFilterType.includes('soil_temp') && inner.t1)?_c('SoilTempIndicator',{attrs:{\"size\":'5em',\"tooltip\":'Soil Temperatures',\"t1\":inner.t1,\"t2\":inner.t2,\"t3\":inner.t3,\"t4\":inner.t4,\"t5\":inner.t5,\"t6\":inner.t6,\"t7\":inner.t7,\"t8\":inner.t8,\"t9\":inner.t9,\"t10\":inner.t10,\"t11\":inner.t11,\"t12\":inner.t12,\"t13\":inner.t13,\"t14\":inner.t14,\"t15\":inner.t15,\"suffix\":_vm.$store.getters.getUOMEntity,\"uom\":_vm.$store.getters.getUOM}}):_vm._e()],1)]):_vm._e()]})],2):_vm._e(),(marker.node_type=='nut')?_c('div',{staticClass:\"sm_control\"},[_vm._l((_vm.markers),function(inner,idx){return [(\n                  inner.base_node_address == marker.base_node_address &&\n                  inner.node_type == 'nut' &&\n                  inner.date_time != '1970-01-01 00:00:00' && \n                  (Math.abs(inner.latt - marker.latt) < 0.0001) &&\n                  (Math.abs(inner.lng  - marker.lng ) < 0.0001)\n                  )?_c('div',{key:idx,staticClass:\"sm_control_item\",class:inner.node_address == _vm.selectedNode ? 'selected_node' : ''},[_c('div',{staticClass:\"field_name\"},[_vm._v(_vm._s(inner.field_name))]),_c('div',{staticClass:\"node_address\"},[_vm._v(_vm._s(inner.node_address))]),_c('div',{staticClass:\"last_reading_date\"},[_vm._v(_vm._s(inner.date_time))]),_c('div',{staticClass:\"marker_info_horz\"})]):_vm._e()]})],2):_vm._e()])])],1):_vm._e()]})],2),_c('b-form-group',{staticClass:\"info_filter_menu\"},[_c('b-form-checkbox-group',{attrs:{\"options\":_vm.infoFilterTypes,\"stacked\":\"\",\"buttons\":\"\",\"button-variant\":\"primary\",\"size\":\"sm\"},on:{\"change\":_vm.filterNodeType,\"click\":function($event){$event.stopPropagation();$event.preventDefault();return (function () {}).apply(null, arguments)}},model:{value:(_vm.infoFilterType),callback:function ($$v) {_vm.infoFilterType=$$v},expression:\"infoFilterType\"}})],1),_c('base-button',{staticClass:\"legend_btn\",attrs:{\"icon\":\"\",\"type\":\"primary\",\"size\":\"sm\"},on:{\"click\":function($event){return _vm.toggleLegendModal()}}},[_c('span',{staticClass:\"cirle\"},[_vm._v(\"?\")])]),_c('b-modal',{attrs:{\"dialog-class\":\"legend_modal\",\"centered\":\"\",\"hide-backdrop\":\"\",\"no-close-on-esc\":\"\",\"no-close-on-backdrop\":\"\"},scopedSlots:_vm._u([{key:\"modal-header\",fn:function(ref){\n                  var close = ref.close;\nreturn [_c('h6',{staticClass:\"modal-title\",attrs:{\"slot\":\"header\",\"id\":\"modal-title-default\"},slot:\"header\"},[_vm._v(\"Legend\")])]}},{key:\"default\",fn:function(ref){\n                  var hide = ref.hide;\nreturn [_c('div',{staticClass:\"legend_box\"},[_c('b-row',[_c('b-col',{attrs:{\"md\":\"\"}},[_c('h3',[_vm._v(\"Soil Moisture Probes\")]),_c('div',{staticClass:\"line\"},[_c('span',{staticClass:\"licon blue\",domProps:{\"innerHTML\":_vm._s(_vm.renderSvgIcon('sm'))}}),_vm._v(\" 75%+   Moisture \")]),_c('div',{staticClass:\"line\"},[_c('span',{staticClass:\"licon green\",domProps:{\"innerHTML\":_vm._s(_vm.renderSvgIcon('sm'))}}),_vm._v(\" 50-75% Moisture \")]),_c('div',{staticClass:\"line\"},[_c('span',{staticClass:\"licon orange\",domProps:{\"innerHTML\":_vm._s(_vm.renderSvgIcon('sm'))}}),_vm._v(\" 25-50% Moisture \")]),_c('div',{staticClass:\"line\"},[_c('span',{staticClass:\"licon red\",domProps:{\"innerHTML\":_vm._s(_vm.renderSvgIcon('sm'))}}),_vm._v(\" 0-25%  Moisture \")])]),_c('b-col',{attrs:{\"md\":\"\"}},[_c('h3',[_vm._v(\"Nutrient Probes\")]),_c('div',{staticClass:\"line\"},[_c('span',{staticClass:\"licon blue\",domProps:{\"innerHTML\":_vm._s(_vm.renderSvgIcon('nut'))}}),_vm._v(\" Coming Soon \")])])],1),_c('b-row',[_c('b-col',{attrs:{\"md\":\"\"}},[_c('h3',[_vm._v(\"Wells\")]),_c('div',{staticClass:\"line\"},[_c('span',{staticClass:\"licon green\",domProps:{\"innerHTML\":_vm._s(_vm.renderSvgIcon('well'))}}),_vm._v(\" Pump Running \")]),_c('div',{staticClass:\"line\"},[_c('span',{staticClass:\"licon red\",domProps:{\"innerHTML\":_vm._s(_vm.renderSvgIcon('well'))}}),_vm._v(\" Pump Idle \")])])],1),_c('b-row',[_c('b-col',{attrs:{\"md\":\"\"}},[_c('h3',[_vm._v(\"Meters\")]),_c('div',{staticClass:\"line\"},[_c('span',{staticClass:\"licon blue\",domProps:{\"innerHTML\":_vm._s(_vm.renderSvgIcon('meter'))}}),_vm._v(\" Water Meter \")])])],1)],1)]}},{key:\"modal-footer\",fn:function(ref){\n                  var ok = ref.ok;\n                  var cancel = ref.cancel;\n                  var hide = ref.hide;\nreturn [_c('base-button',{staticClass:\"ml-auto\",attrs:{\"type\":\"link\",\"variant\":\"outline-primary\"},on:{\"click\":function($event){return _vm.toggleLegendModal()}}},[_vm._v(\"Close\")])]}}]),model:{value:(_vm.showLegendModal),callback:function ($$v) {_vm.showLegendModal=$$v},expression:\"showLegendModal\"}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"mab_spinner light center large\"})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class='map_container'>\r\n    <FocusMenu @focusMenuChanged=\"toggleBurger\" ref='focusmenu'>\r\n\r\n      <template #header>\r\n        <div class='search_wrapper clearfix'>\r\n          <b-form-input \r\n            :disabled=\"!visibleMarkers\"\r\n            v-model=\"fieldNameSearch\"\r\n            @input=\"doTextSearch()\"\r\n            class=\"form-control-flush fields_search\"\r\n            placeholder=\"Search...\">\r\n          </b-form-input>\r\n          <div v-show=\"fieldNameSearch\" class='fields_search_clear_btn' @click=\"fieldNameSearch='';filterFields();\"></div>\r\n        </div>\r\n\r\n        <b-form-group class='type_filter_menu'>\r\n          <b-form-checkbox-group\r\n            v-model=\"nodeFilterType\"\r\n            :options=\"nodeFilterTypes\"\r\n            size=\"sm\"\r\n            style=\"width:100%\"\r\n            buttons\r\n            button-variant=\"primary\"\r\n            @change=\"filterNodeType\" v-on:click.stop.prevent=\"() => {}\">\r\n          </b-form-checkbox-group>\r\n        </b-form-group>\r\n      </template>\r\n\r\n      <template v-for=\"(marker, index) in markers\">\r\n        <div \r\n          :key=\"nodeFilterType.join('')+infoFilterType.join('')+index\"\r\n          v-if=\"marker.visible\"\r\n          class='field_record'\r\n          :class=\"marker.node_address == selectedNode ? 'field_record_selected' : ''\"\r\n          @click=\"focusMarker(marker)\">\r\n          <div class='field_name'>{{ marker.field_name }}</div>\r\n          <div class='node_address'>{{ marker.node_address }}</div>\r\n          <div class='last_reading_date' :style=\"'color:' + calcLastReadingColor(marker)\">{{ marker.date_time }}</div>\r\n          <div v-if=\"marker.node_type=='sm' && marker.status\" class='field_sm_status'>Status: {{ marker.status }}%</div>\r\n          <div class='indicators'>\r\n            <SMStatusGraph v-if=\"marker.node_type=='sm' && marker.status\"\r\n              :full=\"marker.full\"\r\n              :status=\"marker.status\"\r\n              :refill=\"marker.refill\"\r\n              :size=\"'35%'\"\r\n              :tooltip=\"'F: ' + marker.full + '%, S: ' + marker.status + '%, R: ' + marker.refill + '%'\"\r\n              :label=\"'S.M'\"\r\n              @clicked=\"goToGraph(marker)\" />\r\n            <div v-else style=\"width:35%\"></div>\r\n            <BVIndicator \r\n              :level=\"marker.battLevel\"\r\n              :size=\"'35%'\"\r\n              :charging=\"marker.charging\"\r\n              :tooltip=\"'Level: ' + marker.battLevel + '%'\"/>\r\n          </div>\r\n        </div>\r\n      </template>\r\n    </FocusMenu>\r\n\r\n    <MglMap \r\n      :repaint=\"true\"\r\n      :mapboxGl=\"mapboxObj\"\r\n      :accessToken=\"$store.state.mapBoxAccessToken\"\r\n      :mapStyle.sync=\"mapStyle\"\r\n      :attributionControl=\"false\"\r\n      :center=\"startPos\"\r\n      logoPosition=\"bottom-right\"\r\n      @load=\"mapLoaded\"\r\n      @zoom=\"scaleMarkers\" \r\n      @zoomend=\"filterFields\"\r\n      @dragend=\"filterFields\">\r\n\r\n      <template v-for=\"marker in markers\">\r\n\r\n        <MglMarker\r\n          @click=\"toggleMarkerPopup(marker)\"\r\n          v-if=\"marker.visible\"\r\n          :key=\"marker.node_address\"\r\n          :ref=\"marker.node_address\"\r\n          :coordinates=\"marker.position\" anchor=\"top\">\r\n\r\n          <div class='field_marker' slot=\"marker\">\r\n            <div class='marker' :style=\"'color:' + calcMarkerIconColor(marker, marker.status, marker.node_type) + '; transform:scale(' + markerScale + '); transform-origin:top center;' + calcMarkerBorderColor(marker)\">\r\n              <template v-if=\"marker.node_type=='well'\">\r\n                <svg stroke-linejoin=\"bevel\" fill-rule=\"evenodd\" xmlns=\"http://www.w3.org/2000/svg\" overflow=\"visible\" width=\"100%\" height=\"100%\" viewBox=\"0 0 165 187.5\"><path stroke-width=\"0\" d=\"M.001 187.5v-7.499h7.484v-52.499h7.482v-7.501h7.482V67.5H7.484v-7.499h14.965V39.002L7.484 45.001H0V30h7.484v.001l74.829-30 74.83 30h7.483v15.001h-7.484l-.001-.001-14.964-5.998.001 20.998h7.857v-.002h7.482V75H165v7.499h-7.483v.001h-7.482v-15h-7.857v52.501h7.482v7.501h7.483v52.499h7.482v7.499H.001zm119.728-59.998v-7.501h7.482V67.5h-14.967v7.501h-26.04v15h18.558l-7.484 30h-29.93l-7.483-30h18.857v-15h-26.34V67.5H37.416v52.501h7.482v7.501h74.831zM52.382 60.001v-7.499h59.862v7.499h14.967V33.002L82.313 15.001l-44.897 18v27h14.966z\" fill=\"currentColor\" stroke=\"white\" font-family=\"Times New Roman\" font-size=\"16\"/></svg>\r\n              </template>\r\n              <template v-else-if=\"marker.node_type=='meter'\">\r\n                <svg stroke-linejoin=\"bevel\" fill-rule=\"evenodd\" xmlns=\"http://www.w3.org/2000/svg\" overflow=\"visible\" width=\"100%\" height=\"100%\" viewBox=\"0 0 225 150\"><path stroke-width=\"0\" d=\"M43.746 105.001H22.499V120H0V29.999h22.499V45h21.246C55.326 18.519 81.762 0 112.498 0c30.735 0 57.171 18.519 68.752 45h21.249V29.999h22.499V120h-22.499v-14.999h-21.25C169.669 131.482 143.233 150 112.498 150c-30.736 0-57.172-18.518-68.752-44.999zM179.998 75c0-37.26-30.24-67.5-67.5-67.5-37.26 0-67.5 30.24-67.5 67.5 0 37.26 30.24 67.5 67.5 67.5 37.26 0 67.5-30.24 67.5-67.5zm-127.5 0c0-33.12 26.88-60 60-60 33.12 0 60 26.88 60 60 0 33.12-26.88 60-60 60-33.12 0-60-26.88-60-60zm37.5 22.5V82.501H74.999V97.5h14.999zm30-.001V82.5h-14.999v14.999h14.999zm30 0V82.5h-14.999v14.999h14.999zm.001-30V52.5H74.998v14.999h75.001z\" fill=\"currentColor\" stroke=\"white\" font-family=\"Times New Roman\" font-size=\"16\"/></svg>\r\n              </template>\r\n              <template v-else-if=\"marker.node_type=='sm'\">\r\n                <svg stroke-width=\".501\" stroke-linejoin=\"bevel\" fill-rule=\"evenodd\" xmlns=\"http://www.w3.org/2000/svg\" overflow=\"visible\" width=\"100%\" height=\"100%\" viewBox=\"0 0 90 187.5\"><g stroke-linecap=\"round\" stroke=\"none\" fill=\"none\" font-size=\"16\"><path d=\"m37.499 187.5-15-15V45l-7.5-7.5V7.499H0V0h74.999v7.499H59.998v7.502h22.5v-7.5h7.501V37.5h-7.501V30h-22.5l.001 7.5-7.5 7.5v127.5l-15 15Z\" fill=\"currentColor\"/><path d=\"m7.177 124.653 15.222-1.48c.916 5.109 2.776 8.861 5.576 11.258 2.801 2.396 6.579 3.595 11.338 3.595 5.038 0 8.835-1.066 11.39-3.198 2.554-2.132 3.83-4.625 3.832-7.48-.002-1.831-.538-3.39-1.613-4.677-1.074-1.285-2.95-2.404-5.629-3.355-1.831-.635-6.008-1.762-12.527-3.383-8.386-2.079-14.27-4.635-17.653-7.665-4.757-4.263-7.135-9.461-7.135-15.592 0-3.946 1.119-7.637 3.356-11.072 2.237-3.437 5.462-6.053 9.673-7.85 4.211-1.796 9.294-2.695 15.247-2.695 9.726 0 17.046 2.132 21.962 6.395 4.915 4.264 7.496 9.954 7.743 17.072l-15.645.687c-.669-3.981-2.104-6.844-4.307-8.588-2.202-1.744-5.506-2.617-9.911-2.617-4.544 0-8.104.935-10.677 2.802-1.657 1.198-2.483 2.801-2.483 4.81 0 1.832.774 3.4 2.325 4.704 1.973 1.655 6.766 3.381 14.376 5.179 7.612 1.797 13.241 3.656 16.888 5.576 3.647 1.922 6.501 4.547 8.562 7.875 2.061 3.33 3.092 7.444 3.092 12.342 0 4.439-1.232 8.598-3.699 12.474-2.466 3.877-5.956 6.757-10.466 8.641-4.51 1.885-10.13 2.828-16.861 2.828-9.796 0-17.319-2.264-22.569-6.792-5.25-4.527-8.386-11.126-9.407-19.794Z\" fill-rule=\"nonzero\" stroke-linejoin=\"round\" stroke-width=\".375\" fill=\"#fff\" stroke-miterlimit=\"79.84\"/></g></svg>\r\n\r\n              </template>\r\n              <template v-else-if=\"marker.node_type=='nut'\">\r\n                <svg stroke-width=\".501\" stroke-linejoin=\"bevel\" fill-rule=\"evenodd\" xmlns=\"http://www.w3.org/2000/svg\" overflow=\"visible\" width=\"100%\" height=\"100%\" viewBox=\"0 0 90 187.5\"><g stroke-linecap=\"round\" stroke=\"none\" fill=\"none\" font-size=\"16\"><path d=\"m37.499 187.5-15-15V45l-7.5-7.5V7.499H0V0h74.999v7.499H59.998v7.502h22.5v-7.5h7.501V37.5h-7.501V30h-22.5l.001 7.5-7.5 7.5v127.5l-15 15Z\" fill=\"currentColor\"/><path d=\"M9.001 147.09V75.155h14.132l29.441 48.039V75.155h13.493v71.935H51.494l-28.999-46.909v46.909H9.001Z\" fill-rule=\"nonzero\" stroke-linejoin=\"round\" stroke-width=\".375\" fill=\"#fff\" stroke-miterlimit=\"79.84\"/></g></svg>\r\n              </template>\r\n            </div>\r\n          </div>\r\n\r\n          <MglPopup :closeButton=\"true\" anchor=\"bottom\" maxWidth=\"auto\" :closeOnClick=\"false\" @close=\"popupClosed\">\r\n            <div class='marker_info_wrap'>\r\n\r\n              <div v-if=\"marker.node_type=='well'\" class='pump_control'>\r\n                <div class='field_name'>{{ marker.field_name }}</div>\r\n                <div class='node_address'>{{ marker.node_address }}</div>\r\n                <div class='last_reading_date'>{{ marker.date_time }}</div>\r\n                <div class='pump_control_inner'>\r\n                  <b-form-checkbox \r\n                    :disabled=\"!userCan('Toggle', 'Well Controls', marker.id, 'O')\"\r\n                    v-model=\"marker.pump_status\"\r\n                    switch\r\n                    size=\"lg\"\r\n                    @change=\"togglePump(marker)\">\r\n                    {{ marker.pump_status ? 'Pump: On' : 'Pump: Off' }}\r\n                  </b-form-checkbox>\r\n                </div>\r\n              </div>\r\n\r\n              <div v-if=\"marker.node_type=='meter'\" class='meter_control'>\r\n                <div class='field_name'>{{ marker.field_name }}</div>\r\n                <div class='node_address'>{{ marker.node_address }}</div>\r\n                <div class='last_reading_date'>{{ marker.date_time }}</div>\r\n                <MeterReading :reading=\"marker.last_reading\" :suffix=\"formatUOM(marker.measurement_type)\"></MeterReading>\r\n              </div>\r\n\r\n              <div v-if=\"marker.node_type=='sm'\" class='sm_control'>\r\n                <template v-for=\"(inner, idx) in markers\">\r\n                  <div v-if=\"\r\n                    inner.base_node_address == marker.base_node_address &&\r\n                    inner.node_type == 'sm' &&\r\n                    inner.date_time != '1970-01-01 00:00:00' &&\r\n                    (Math.abs(inner.latt - marker.latt) < 0.00001) &&\r\n                    (Math.abs(inner.lng  - marker.lng ) < 0.00001)\r\n                  \"\r\n                  :key=\"idx\"\r\n                  class='sm_control_item' :class=\"inner.node_address == selectedNode ? 'selected_node' : ''\">\r\n                    <div class='field_name'>{{ inner.field_name }}</div>\r\n                    <div class='node_address'>{{ inner.node_address }}</div>\r\n                    <div class='last_reading_date'>{{ inner.date_time }}</div>\r\n                    <div class='marker_info_horz'>\r\n                      <SMStatusIndicator v-if=\"infoFilterType.includes('sm_status') && inner.status\"\r\n                        :size=\"'5em'\"\r\n                        :full=\"inner.full\"\r\n                        :status=\"inner.status\"\r\n                        :refill=\"inner.refill\"\r\n                        :accordion=\"true\"\r\n                        :showNumbers=\"true\">\r\n                      </SMStatusIndicator>\r\n                  \r\n                      <SMLevelsIndicator v-if=\"infoFilterType.includes('sm_levels') && inner.sm1\"\r\n                        :size=\"'5em'\"\r\n                        :tooltip=\"'S.M Levels'\"\r\n                        :sm1=\"inner.sm1\" \r\n                        :sm2=\"inner.sm2\" \r\n                        :sm3=\"inner.sm3\" \r\n                        :sm4=\"inner.sm4\" \r\n                        :sm5=\"inner.sm5\" \r\n                        :sm6=\"inner.sm6\" \r\n                        :sm7=\"inner.sm7\" \r\n                        :sm8=\"inner.sm8\" \r\n                        :sm9=\"inner.sm9\" \r\n                        :sm10=\"inner.sm10\" \r\n                        :sm11=\"inner.sm11\" \r\n                        :sm12=\"inner.sm12\" \r\n                        :sm13=\"inner.sm13\" \r\n                        :sm14=\"inner.sm14\" \r\n                        :sm15=\"inner.sm15\">\r\n                      </SMLevelsIndicator>\r\n\r\n                      <SoilTempIndicator v-if=\"infoFilterType.includes('soil_temp') && inner.t1\"\r\n                        :size=\"'5em'\"\r\n                        :tooltip=\"'Soil Temperatures'\"\r\n                        :t1=\"inner.t1\" \r\n                        :t2=\"inner.t2\" \r\n                        :t3=\"inner.t3\" \r\n                        :t4=\"inner.t4\" \r\n                        :t5=\"inner.t5\" \r\n                        :t6=\"inner.t6\" \r\n                        :t7=\"inner.t7\" \r\n                        :t8=\"inner.t8\" \r\n                        :t9=\"inner.t9\" \r\n                        :t10=\"inner.t10\" \r\n                        :t11=\"inner.t11\" \r\n                        :t12=\"inner.t12\" \r\n                        :t13=\"inner.t13\" \r\n                        :t14=\"inner.t14\" \r\n                        :t15=\"inner.t15\"\r\n                        :suffix=\"$store.getters.getUOMEntity\"\r\n                        :uom=\"$store.getters.getUOM\">\r\n                      </SoilTempIndicator>\r\n                    </div>\r\n                  </div>\r\n                </template>\r\n              </div>\r\n\r\n              <div v-if=\"marker.node_type=='nut'\" class='sm_control'>\r\n                <template v-for=\"(inner, idx) in markers\">\r\n                  <div v-if=\"\r\n                    inner.base_node_address == marker.base_node_address &&\r\n                    inner.node_type == 'nut' &&\r\n                    inner.date_time != '1970-01-01 00:00:00' && \r\n                    (Math.abs(inner.latt - marker.latt) < 0.0001) &&\r\n                    (Math.abs(inner.lng  - marker.lng ) < 0.0001)\r\n                    \"\r\n                    :key=\"idx\"\r\n                    class='sm_control_item' :class=\"inner.node_address == selectedNode ? 'selected_node' : ''\">\r\n                    <div class='field_name'>{{ inner.field_name }}</div>\r\n                    <div class='node_address'>{{ inner.node_address }}</div>\r\n                    <div class='last_reading_date'>{{ inner.date_time }}</div>\r\n                    <div class='marker_info_horz'>\r\n                    </div>\r\n                  </div>\r\n                </template>\r\n              </div>\r\n\r\n            </div>\r\n          </MglPopup>\r\n        </MglMarker>\r\n      </template>\r\n    </MglMap>\r\n\r\n    <b-form-group class='info_filter_menu'>\r\n      <b-form-checkbox-group\r\n        v-model=\"infoFilterType\"\r\n        :options=\"infoFilterTypes\"\r\n        stacked\r\n        buttons\r\n        button-variant=\"primary\"\r\n        size=\"sm\"\r\n        @change=\"filterNodeType\" v-on:click.stop.prevent=\"() => {}\">\r\n      </b-form-checkbox-group>\r\n    </b-form-group>\r\n\r\n    <base-button icon type=\"primary\" class='legend_btn' size=\"sm\" @click='toggleLegendModal()'><span class='cirle'>?</span></base-button>\r\n\r\n    <b-modal v-model=\"showLegendModal\" dialog-class='legend_modal' centered hide-backdrop no-close-on-esc no-close-on-backdrop>\r\n\r\n      <template #modal-header=\"{ close }\">\r\n        <h6 slot=\"header\" class=\"modal-title\" id=\"modal-title-default\">Legend</h6>\r\n      </template>\r\n\r\n      <template #default=\"{ hide }\">\r\n        <div class='legend_box'>\r\n          <b-row>\r\n            <b-col md>\r\n              <h3>Soil Moisture Probes</h3>\r\n              <div class='line'><span class='licon blue'   v-html=\"renderSvgIcon('sm')\"></span> 75%+   Moisture </div>\r\n              <div class='line'><span class='licon green'  v-html=\"renderSvgIcon('sm')\"></span> 50-75% Moisture </div>\r\n              <div class='line'><span class='licon orange' v-html=\"renderSvgIcon('sm')\"></span> 25-50% Moisture </div>\r\n              <div class='line'><span class='licon red'    v-html=\"renderSvgIcon('sm')\"></span> 0-25%  Moisture </div>\r\n            </b-col>\r\n            <b-col md>\r\n              <h3>Nutrient Probes</h3>\r\n              <div class='line'><span class='licon blue'   v-html=\"renderSvgIcon('nut')\"></span> Coming Soon </div>\r\n            </b-col>\r\n          </b-row>\r\n          <b-row>\r\n            <b-col md>\r\n              <h3>Wells</h3>\r\n              <div class='line'><span class='licon green' v-html=\"renderSvgIcon('well')\"></span> Pump Running </div>\r\n              <div class='line'><span class='licon red' v-html=\"renderSvgIcon('well')\"></span> Pump Idle </div>\r\n            </b-col>\r\n          </b-row>\r\n          <b-row>\r\n            <b-col md>\r\n              <h3>Meters</h3>\r\n              <div class='line'><span class='licon blue' v-html=\"renderSvgIcon('meter')\"></span> Water Meter </div>\r\n            </b-col>\r\n          </b-row>\r\n        </div>\r\n      </template>\r\n\r\n      <template #modal-footer=\"{ ok, cancel, hide }\">\r\n        <base-button type=\"link\" class=\"ml-auto\" variant=\"outline-primary\" @click=\"toggleLegendModal()\">Close</base-button>\r\n      </template>\r\n    </b-modal>\r\n\r\n    <div v-show='loading' class='mab_spinner light center large'></div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport MapboxGL from \"mapbox-gl\";\r\nimport MABMapStyle from '../../assets/mapstyles/mab_mapstyle.min.js';\r\nimport { MglMap, MglMarker, MglPopup } from \"v-mapbox\";\r\nimport FocusMenu from '../../custom_components/FocusMenu';\r\nimport BVIndicator from '../../custom_components/BVIndicator';\r\nimport SMStatusGraph from '../../custom_components/SMStatusGraph';\r\nimport SMStatusIndicator from '../../custom_components/SMStatusIndicator';\r\nimport SMLevelsIndicator from '../../custom_components/SMLevelsIndicator';\r\nimport SoilTempIndicator from '../../custom_components/SoilTempIndicator';\r\nimport MeterReading from '../../custom_components/MeterReading';\r\nimport EasingFunctions from \"../../easingFunctions\";\r\nimport mab_utils from '../../util/mab-utils';\r\nimport swal from 'sweetalert2';\r\n\r\nexport default {\r\n\r\n  mixins: [ mab_utils ],\r\n\r\n  components: {\r\n    MglMap,\r\n    MglMarker,\r\n    MglPopup,\r\n    FocusMenu,\r\n    BVIndicator,\r\n    SMStatusGraph,\r\n    SMStatusIndicator,\r\n    SMLevelsIndicator,\r\n    SoilTempIndicator,\r\n    MeterReading\r\n  },\r\n\r\n  data()\r\n  {\r\n    return {\r\n      loading: false,\r\n      startPos: [0,0],\r\n      startZoom: 3,\r\n      mapboxObj: null,\r\n      map: null,\r\n      markers: [],\r\n      markerScale: 0,\r\n      toggleVisible: 0,\r\n      visibleMarkers: 0,\r\n      visiblePopups: [],\r\n      fieldNameSearch: '',\r\n      mapActions: null,\r\n      mapStyle: '', /* was NULL */\r\n      fieldsData: null,\r\n      bounds: null,\r\n      showLegendModal: false,\r\n      refreshTimer: null,\r\n      bInitialQuery: true,\r\n      selectedNode: null,\r\n\r\n      infoFilterType: ['sm_status', 'labels'],\r\n      infoFilterTypes: [\r\n        { text: 'S.M. Status', value: 'sm_status'  },\r\n        { text: 'S.M. Levels', value: 'sm_levels'  },\r\n        { text: 'Soil Temp',   value: 'soil_temp'  },\r\n        { text: 'Rain Gauge',  value: 'rain_gauge' },\r\n        { text: 'Wells',       value: 'wells'      },\r\n        { text: 'Weather S.',  value: 'weather_s'  },\r\n        { text: 'Labels',      value: 'labels'     },\r\n      ],\r\n\r\n      nodeFilterType: ['sm', 'nut', 'well', 'meter'],\r\n      nodeFilterTypes: [\r\n        { text: 'S.M', value: 'sm' },\r\n        { text: 'Nutrient', value: 'nut' },\r\n        { text: 'Well', value: 'well' },\r\n        { text: 'Meter', value: 'meter' },\r\n      ]\r\n    }\r\n  },\r\n\r\n  created(){\r\n    \r\n  },\r\n\r\n  // #2 (created == #1)\r\n  mounted()\r\n  {\r\n    this.mapStyle = MABMapStyle;\r\n  },\r\n\r\n  methods: {\r\n\r\n    // #3\r\n    mapLoaded(e)\r\n    {\r\n      e.map._isVue = true;\r\n      this.map = e.map;\r\n      MapboxGL._isVue = true;\r\n      this.mapboxObj = MapboxGL;\r\n      this.mapActions = e.component.actions;\r\n      this.loadFieldsData();\r\n    },\r\n\r\n    // #4\r\n    loadFieldsData(is_refresh = false)\r\n    {\r\n      this.loading = true;\r\n      this.$axios.post(\"/api/map_data\", {\r\n        is_refresh: is_refresh\r\n      }).then(resp => {\r\n        this.loading = false;\r\n        if(\r\n          resp.data &&\r\n          resp.data.nodes &&\r\n          resp.data.nodes.length\r\n        ){\r\n          this.fieldsData = resp.data.nodes;\r\n          this.populateMarkers();\r\n          this.calcBounds();\r\n          this.setupMap();\r\n          //this.resizeTheMap();\r\n\r\n          // bInitialQuery is for the first Ajax Query.\r\n          if(this.bInitialQuery){\r\n            if(this.$store.state.mapSettingsCache.visited){\r\n              this.focusMarkersFly();\r\n            } else {\r\n              this.focusMarkersEase();\r\n            }\r\n            this.bInitialQuery = false;\r\n            //this.refreshTimer = setInterval(() => { this.loadFieldsData(true); }, 60000*5);\r\n          } else {\r\n            // setInterval data refresh\r\n            this.doTextSearch();\r\n          }\r\n        } else {\r\n\r\n          swal.fire({\r\n            title: 'No nodes found',\r\n            text: 'Please add one or more nodes.',\r\n            showCancelButton: false,\r\n            confirmButtonText: 'OK',\r\n            buttonsStyling: false,\r\n            customClass: {\r\n              cancelButton: 'btn btn-outline-primary',\r\n              confirmButton: 'btn btn-primary'\r\n            }\r\n          });\r\n\r\n        }\r\n      }).catch(err => { this.loading = false; });\r\n    },\r\n\r\n    setupMap()\r\n    {\r\n      // handle resize when Argon menu collapses via click\r\n      document.querySelector('.sidenav-toggler').addEventListener('click', this.resizeTheMap);\r\n      // initial marker scale\r\n      this.scaleMarkers();\r\n    },\r\n\r\n    // named event handler: https://stackoverflow.com/questions/28056716/check-if-an-element-has-event-listener-on-it-no-jquery/47337711\r\n    resizeTheMap()\r\n    {\r\n      setTimeout(()=>{\r\n        this.map.resize();\r\n      }, 500);\r\n    },\r\n\r\n    scaleMarkers()\r\n    {\r\n      this.markerScale = this.map.getZoom() / 22;\r\n    },\r\n\r\n    saveMapSettings()\r\n    {\r\n      let settings = {\r\n        'visited': true,\r\n        'zoom': this.map.getZoom(),\r\n        'center': this.map.getCenter(),\r\n        'infoFilterType': this.infoFilterType,\r\n        'nodeFilterType': this.nodeFilterType\r\n      };\r\n      this.$store.dispatch('save_map_settings', settings);\r\n    },\r\n\r\n    focusMarkersEase()\r\n    {\r\n      this.mapActions.easeTo({\r\n        center: this.bounds.getCenter(),\r\n        duration:2000,\r\n        animate: true,\r\n        easing: EasingFunctions.easeInOutQuad,\r\n        essential: true\r\n      }).then(() => {\r\n        if(this.$store.state.mapSettingsCache.infoFilterType && this.$store.state.mapSettingsCache.nodeFilterType){\r\n          this.infoFilterType = this.$store.state.mapSettingsCache.infoFilterType;\r\n          this.nodeFilterType = this.$store.state.mapSettingsCache.nodeFilterType;\r\n        }\r\n        this.$refs.focusmenu.expandMenu();\r\n        this.filterFields();\r\n      });\r\n    },\r\n\r\n    focusMarkersFly()\r\n    {\r\n      this.mapActions.flyTo({\r\n        zoom: this.$store.state.mapSettingsCache.zoom,\r\n        center: this.$store.state.mapSettingsCache.center,\r\n        duration: 2000,\r\n        animate: true,\r\n        easing: EasingFunctions.easeInOutQuad,\r\n        essential: true\r\n      }).then(() => {\r\n        if(this.$store.state.mapSettingsCache.infoFilterType && this.$store.state.mapSettingsCache.nodeFilterType){\r\n          this.infoFilterType = this.$store.state.mapSettingsCache.infoFilterType;\r\n          this.nodeFilterType = this.$store.state.mapSettingsCache.nodeFilterType;\r\n        }\r\n        this.$refs.focusmenu.expandMenu();\r\n        this.filterFields();\r\n      });\r\n    },\r\n\r\n    toggleMarkerPopup(marker){\r\n      if(typeof this.visiblePopups[marker.node_address] === 'undefined' || this.visiblePopups[marker.node_address] === false){\r\n        this.visiblePopups[marker.node_address] = true;\r\n        this.selectedNode = marker.node_address;\r\n      } else if(this.visiblePopups[marker.node_address] === true) {\r\n        this.visiblePopups[marker.node_address] = false;\r\n        this.selectedNode = null;\r\n        setTimeout(() => {\r\n          this.$refs[marker.node_address][0].marker._popup.remove(); // emits @close event\r\n        }, 200);\r\n      }\r\n    },\r\n\r\n    popupClosed(){\r\n      this.selectedNode = null;\r\n    },\r\n\r\n    filterNodeType()\r\n    {\r\n      // reset text search when node filter type is changed\r\n      this.fieldNameSearch = '';\r\n      this.filterLabels();\r\n      this.filterFields();\r\n      //console.log(this.map.getStyle().layers);\r\n    },\r\n\r\n    filterLabels()\r\n    {\r\n      this.map.getStyle().layers.forEach((layer, idx) => {\r\n        if(layer.id.includes(\"-label\") || layer.id.includes(\"-shield\")){\r\n          if (this.infoFilterType.includes('labels')) {\r\n            this.map.setLayoutProperty(\r\n              layer.id,\r\n              'visibility',\r\n              'visible'\r\n            );\r\n          } else {\r\n            this.map.setLayoutProperty(\r\n              layer.id,\r\n              'visibility',\r\n              'none'\r\n            );\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n    // mapbox @onzoomend && @ondragend event\r\n    filterFields(e)\r\n    {\r\n      // Filter Markers\r\n      if(this.fieldNameSearch == ''){\r\n        let _bounds = this.map.getBounds();\r\n        this.visibleMarkers = 0;\r\n        this.markers.forEach((m, idx) => {\r\n          this.markers[idx].visible = this.nodeFilterType.includes(m.node_type) && _bounds.contains(m.position) ? true : false;\r\n          if(this.markers[idx].visible){ this.visibleMarkers++; }\r\n        });\r\n      }\r\n      // save zoom and center\r\n      this.saveMapSettings();\r\n      // reset scrollbar\r\n      document.querySelector('.focus_menu .items_section').scrollTop = 0;\r\n    },\r\n\r\n    populateMarkers()\r\n    {\r\n      if(this.fieldsData.length){\r\n\r\n        this.markers = [];\r\n        this.fieldsData.forEach( (item, index) => {\r\n          // ensure non-zero coords\r\n          if(item.lng && item.latt){\r\n            // create markers array\r\n\r\n            this.markers.push({\r\n              'id': item.id,\r\n              'link': '/soil_moisture/graph/' + item.node_address,\r\n              'status': item.status,\r\n              'full': item.full,\r\n              'refill': item.refill,\r\n              'date_time': item.date_time,\r\n              'date_diff': item.date_diff,\r\n              'node_id': item.node_id,\r\n              'node_address': item.node_address,\r\n              'base_node_address': item.base_node_address,\r\n              'field_id': item.field_id,\r\n              'field_name': item.field_name,\r\n              'graph_type': item.graph_type,\r\n              'graph_start_date': item.graph_start_date,\r\n              'node_type': this.formatNodeType(item.node_type),\r\n              'position': [ parseFloat(item.lng), parseFloat(item.latt) ],\r\n              'latt': parseFloat(item.lng),\r\n              'lng': parseFloat(item.latt),\r\n              'battLevel': item.bp,\r\n              'pump_status': false,\r\n              'visible': true,\r\n              'sm1': item.sm1,\r\n              'sm2': item.sm2,\r\n              'sm3': item.sm3,\r\n              'sm4': item.sm4,\r\n              'sm5': item.sm5,\r\n              'sm6': item.sm6,\r\n              'sm7': item.sm7,\r\n              'sm8': item.sm8,\r\n              'sm9': item.sm9,\r\n              'sm10': item.sm10,\r\n              'sm11': item.sm11,\r\n              'sm12': item.sm12,\r\n              'sm13': item.sm13,\r\n              'sm14': item.sm14,\r\n              'sm15': item.sm15,\r\n              't1': item.t1,\r\n              't2': item.t2,\r\n              't3': item.t3,\r\n              't4': item.t4,\r\n              't5': item.t5,\r\n              't6': item.t6,\r\n              't7': item.t7,\r\n              't8': item.t8,\r\n              't9': item.t9,\r\n              't10': item.t10,\r\n              't11': item.t11,\r\n              't12': item.t12,\r\n              't13': item.t13,\r\n              't14': item.t14,\r\n              't15': item.t15,\r\n              'measurement_type': item.measurement_type,\r\n              'last_reading': item.pulse_1 ? item.pulse_1 : '00000000',\r\n              'charging': item.charging,\r\n              'nutrient_lower': 'nutrient_lower' in item ? item.nutrient_lower : null,\r\n              'nutrient_upper': 'nutrient_upper' in item ? item.nutrient_upper : null,\r\n              'nutrient_gauge': 'nutrient_gauge' in item ? item.nutrient_gauge : null,\r\n              'nutrient_avg':   'nutrient_avg'   in item ? item.nutrient_avg   : null,\r\n\r\n              'marker_outline_color': item.marker_outline_color\r\n            });\r\n          }\r\n        });\r\n      }\r\n      //console.log(this.markers);\r\n    },\r\n\r\n    toggleBurger()\r\n    {\r\n      document.querySelector('.custom-nav-toggler').className = this.toggleVisible ?  \"custom-nav-toggler visible\" : \"custom-nav-toggler hidden\";\r\n      this.toggleVisible = !this.toggleVisible;\r\n    },\r\n\r\n    doTextSearch()\r\n    {\r\n      if(this.fieldNameSearch != ''){\r\n        let resultCount = 0;\r\n        this.markers.forEach((m, idx) => {\r\n          // Search by field name OR\r\n          // Search by Node Address\r\n          // Should Respect Node Filter\r\n          if( (this.nodeFilterType.includes(m.node_type)) && (\r\n              (m.field_name.toLowerCase().indexOf(this.fieldNameSearch.toLowerCase()) > -1) ||\r\n              (m.node_address.toLowerCase().indexOf(this.fieldNameSearch.toLowerCase()) > -1)\r\n            )\r\n          ){\r\n            this.markers[idx].visible = true;\r\n            resultCount++;\r\n          } else {\r\n            this.markers[idx].visible = false;\r\n          }\r\n        });\r\n        if(resultCount){\r\n          if(this.markers.length){\r\n            this.calcBounds();\r\n            this.map.fitBounds(this.bounds, {\r\n              linear: true,\r\n              maxZoom: 13,\r\n              duration:2000,\r\n              animate: true,\r\n              padding: 100,\r\n              easing: EasingFunctions.easeInOutQuad,\r\n              essential: true\r\n            });\r\n          }\r\n        }\r\n      } else {\r\n        this.showAllMarkers();\r\n        this.filterFields();\r\n      }\r\n    },\r\n\r\n    focusMarker(marker)\r\n    {\r\n      if(marker.node_address == this.selectedNode){\r\n        this.selectedNode = null;\r\n      } else {\r\n        this.selectedNode = marker.node_address;\r\n      }\r\n      // pan to marker\r\n      this.mapActions.flyTo({\r\n        center: marker.position,\r\n        duration:1000,\r\n        animate: true,\r\n        easing: EasingFunctions.easeInOutQuad,\r\n        essential: true\r\n      }).then(() => {\r\n        this.$refs[marker.node_address][0].togglePopup();\r\n      });\r\n    },\r\n\r\n    showAllMarkers(){\r\n      this.markers.forEach((m, idx) => {\r\n        this.markers[idx].visible = true;\r\n      });\r\n      this.visibleMarkers = this.markers.length;\r\n    },\r\n\r\n    calcBounds()\r\n    {\r\n      let _bounds = new this.mapboxObj.LngLatBounds();\r\n\r\n      // Limit Bounds to United States\r\n      let us_t = 49.3457868;   // north lat\r\n      let us_b = 24.7433195;   // south lat\r\n      let us_l = -124.7844079; // west long\r\n      let us_r = -66.9513812;  // east long\r\n\r\n      this.markers.forEach((m, idx) => {\r\n        if(this.markers[idx].visible){\r\n          if( this.markers[idx].position[0] > us_l && this.markers[idx].position[0] < us_r &&\r\n              this.markers[idx].position[1] > us_b && this.markers[idx].position[1] < us_t)\r\n          {\r\n            _bounds.extend(this.markers[idx].position);\r\n          }\r\n          //_bounds.extend(this.markers[idx].position);\r\n        }\r\n      });\r\n      this.bounds = _bounds;\r\n    },\r\n\r\n    /* TODO: Add to Utils Mixin */\r\n    calcMarkerIconColor(marker, reading, type)\r\n    {\r\n      if(type == 'sm'){\r\n        let color = 'white';\r\n        if      (reading >=  0 && reading <  25 ) { color = \"red\";    }\r\n        else if (reading >= 25 && reading <  50 ) { color = \"orange\"; }\r\n        else if (reading >= 50 && reading <  75 ) { color = \"green\";  }\r\n        else if (reading >= 75 && reading <= 100) { color = \"blue\";   }\r\n        else                                      { color = \"black\";  }\r\n        if(marker.date_diff.days >= 3){ color = \"black\"; }\r\n        return color;\r\n      } else if(type == 'well'){\r\n        return \"red\";\r\n      } else if(type == 'meter'){\r\n        return \"blue\";\r\n      } else {\r\n        return \"black\";\r\n      }\r\n    },\r\n\r\n    calcMarkerBorderColor(marker)\r\n    {\r\n      return \"border: 2px solid \" + marker.marker_outline_color;\r\n    },\r\n\r\n    formatNodeType(type)\r\n    {\r\n      if(type == 'Soil Moisture') return 'sm';\r\n      if(type == 'Nutrients') return 'nut';\r\n      if(type == 'Wells') return 'well';\r\n      if(type == 'Water Meter') return 'meter';\r\n      return 'sm';\r\n    },\r\n\r\n    formatUOM(value)\r\n    {\r\n      if(value == 1){ return 'cm3'; }\r\n      if(value == 2){ return 'gal'; }\r\n      return '';\r\n    },\r\n\r\n    togglePump(marker)\r\n    {\r\n      this.loading = true;\r\n      if(marker.node_address){\r\n        this.$axios.get(\"/api/toggleWM/\" + marker.node_address)\r\n        .then((resp) => {\r\n          this.loading = false;\r\n          this.$notify({\r\n            title: 'Status',\r\n            message: 'Pump Toggled',\r\n            type: 'info',\r\n            verticalAlign: 'top',\r\n            horizontalAlign: 'right'\r\n          });\r\n        });\r\n      }\r\n    },\r\n\r\n    toggleLegendModal()\r\n    {\r\n      this.showLegendModal = !this.showLegendModal;\r\n    },\r\n\r\n    renderSvgIcon(type)\r\n    {\r\n      if(type == 'well'){\r\n        return '<svg stroke-linejoin=\"bevel\" fill-rule=\"evenodd\" xmlns=\"http://www.w3.org/2000/svg\" overflow=\"visible\" width=\"100%\" height=\"100%\" viewBox=\"0 0 165 187.5\"><path stroke-width=\"0\" d=\"M.001 187.5v-7.499h7.484v-52.499h7.482v-7.501h7.482V67.5H7.484v-7.499h14.965V39.002L7.484 45.001H0V30h7.484v.001l74.829-30 74.83 30h7.483v15.001h-7.484l-.001-.001-14.964-5.998.001 20.998h7.857v-.002h7.482V75H165v7.499h-7.483v.001h-7.482v-15h-7.857v52.501h7.482v7.501h7.483v52.499h7.482v7.499H.001zm119.728-59.998v-7.501h7.482V67.5h-14.967v7.501h-26.04v15h18.558l-7.484 30h-29.93l-7.483-30h18.857v-15h-26.34V67.5H37.416v52.501h7.482v7.501h74.831zM52.382 60.001v-7.499h59.862v7.499h14.967V33.002L82.313 15.001l-44.897 18v27h14.966z\" fill=\"currentColor\" stroke=\"white\" font-family=\"Times New Roman\" font-size=\"16\"/></svg>';\r\n      }\r\n      if(type == 'sm'){\r\n        // return '<svg stroke-linejoin=\"bevel\" fill-rule=\"evenodd\" xmlns=\"http://www.w3.org/2000/svg\" overflow=\"visible\" width=\"100%\" height=\"100%\" viewBox=\"0 0 90 187.5\"><path stroke-width=\"0\" d=\"M37.499 187.5l-15-15V45l-7.5-7.5V7.499H0V0h74.999v7.499H59.998v7.502h22.5v-7.5h7.501V37.5h-7.501V30h-22.5l.001 7.5-7.5 7.5v127.5l-15 15z\" fill=\"currentColor\" stroke=\"white\" font-family=\"Times New Roman\" font-size=\"16\"/></svg>';\r\n        return '<svg stroke-width=\".501\" stroke-linejoin=\"bevel\" fill-rule=\"evenodd\" xmlns=\"http://www.w3.org/2000/svg\" overflow=\"visible\" width=\"100%\" height=\"100%\" viewBox=\"0 0 90 187.5\"><g stroke-linecap=\"round\" stroke=\"none\" fill=\"none\" font-size=\"16\"><path d=\"m37.499 187.5-15-15V45l-7.5-7.5V7.499H0V0h74.999v7.499H59.998v7.502h22.5v-7.5h7.501V37.5h-7.501V30h-22.5l.001 7.5-7.5 7.5v127.5l-15 15Z\" fill=\"currentColor\"/><path d=\"m7.177 124.653 15.222-1.48c.916 5.109 2.776 8.861 5.576 11.258 2.801 2.396 6.579 3.595 11.338 3.595 5.038 0 8.835-1.066 11.39-3.198 2.554-2.132 3.83-4.625 3.832-7.48-.002-1.831-.538-3.39-1.613-4.677-1.074-1.285-2.95-2.404-5.629-3.355-1.831-.635-6.008-1.762-12.527-3.383-8.386-2.079-14.27-4.635-17.653-7.665-4.757-4.263-7.135-9.461-7.135-15.592 0-3.946 1.119-7.637 3.356-11.072 2.237-3.437 5.462-6.053 9.673-7.85 4.211-1.796 9.294-2.695 15.247-2.695 9.726 0 17.046 2.132 21.962 6.395 4.915 4.264 7.496 9.954 7.743 17.072l-15.645.687c-.669-3.981-2.104-6.844-4.307-8.588-2.202-1.744-5.506-2.617-9.911-2.617-4.544 0-8.104.935-10.677 2.802-1.657 1.198-2.483 2.801-2.483 4.81 0 1.832.774 3.4 2.325 4.704 1.973 1.655 6.766 3.381 14.376 5.179 7.612 1.797 13.241 3.656 16.888 5.576 3.647 1.922 6.501 4.547 8.562 7.875 2.061 3.33 3.092 7.444 3.092 12.342 0 4.439-1.232 8.598-3.699 12.474-2.466 3.877-5.956 6.757-10.466 8.641-4.51 1.885-10.13 2.828-16.861 2.828-9.796 0-17.319-2.264-22.569-6.792-5.25-4.527-8.386-11.126-9.407-19.794Z\" fill-rule=\"nonzero\" stroke-linejoin=\"round\" stroke-width=\".375\" fill=\"#fff\" stroke-miterlimit=\"79.84\"/></g></svg>';\r\n      }\r\n      if(type == 'nut'){\r\n        // return '<svg stroke-linejoin=\"bevel\" fill-rule=\"evenodd\" xmlns=\"http://www.w3.org/2000/svg\" overflow=\"visible\" width=\"100%\" height=\"100%\" viewBox=\"0 0 90 187.5\"><path stroke-width=\"0\" d=\"M37.499 187.5l-15-15V45l-7.5-7.5V7.499H0V0h74.999v7.499H59.998v7.502h22.5v-7.5h7.501V37.5h-7.501V30h-22.5l.001 7.5-7.5 7.5v127.5l-15 15z\" fill=\"currentColor\" stroke=\"white\" font-family=\"Times New Roman\" font-size=\"16\"/></svg>';\r\n        return '<svg stroke-width=\".501\" stroke-linejoin=\"bevel\" fill-rule=\"evenodd\" xmlns=\"http://www.w3.org/2000/svg\" overflow=\"visible\" width=\"100%\" height=\"100%\" viewBox=\"0 0 90 187.5\"><g stroke-linecap=\"round\" stroke=\"none\" fill=\"none\" font-size=\"16\"><path d=\"m37.499 187.5-15-15V45l-7.5-7.5V7.499H0V0h74.999v7.499H59.998v7.502h22.5v-7.5h7.501V37.5h-7.501V30h-22.5l.001 7.5-7.5 7.5v127.5l-15 15Z\" fill=\"currentColor\"/><path d=\"M9.001 147.09V75.155h14.132l29.441 48.039V75.155h13.493v71.935H51.494l-28.999-46.909v46.909H9.001Z\" fill-rule=\"nonzero\" stroke-linejoin=\"round\" stroke-width=\".375\" fill=\"#fff\" stroke-miterlimit=\"79.84\"/></g></svg>';\r\n      }\r\n      if(type == 'meter'){\r\n        return '<svg stroke-linejoin=\"bevel\" fill-rule=\"evenodd\" xmlns=\"http://www.w3.org/2000/svg\" overflow=\"visible\" width=\"100%\" height=\"100%\" viewBox=\"0 0 225 150\"><path stroke-width=\"0\" d=\"M43.746 105.001H22.499V120H0V29.999h22.499V45h21.246C55.326 18.519 81.762 0 112.498 0c30.735 0 57.171 18.519 68.752 45h21.249V29.999h22.499V120h-22.499v-14.999h-21.25C169.669 131.482 143.233 150 112.498 150c-30.736 0-57.172-18.518-68.752-44.999zM179.998 75c0-37.26-30.24-67.5-67.5-67.5-37.26 0-67.5 30.24-67.5 67.5 0 37.26 30.24 67.5 67.5 67.5 37.26 0 67.5-30.24 67.5-67.5zm-127.5 0c0-33.12 26.88-60 60-60 33.12 0 60 26.88 60 60 0 33.12-26.88 60-60 60-33.12 0-60-26.88-60-60zm37.5 22.5V82.501H74.999V97.5h14.999zm30-.001V82.5h-14.999v14.999h14.999zm30 0V82.5h-14.999v14.999h14.999zm.001-30V52.5H74.998v14.999h75.001z\" fill=\"currentColor\" stroke=\"white\" font-family=\"Times New Roman\" font-size=\"16\"/></svg>';\r\n      }\r\n    },\r\n\r\n    goToGraph(marker)\r\n    {\r\n      if(this.userCan('Graph', 'Soil Moisture', marker.node_id, 'O')){\r\n        this.$router.push({\r\n          name: \"soil_moisture_graph\",\r\n          params:{ node_address: marker.node_address }\r\n        });\r\n      }\r\n    }\r\n  },\r\n\r\n  beforeRouteLeave (to, from, next)\r\n  {\r\n    // if(this.refreshTimer){\r\n    //   console.log(\"Clearing Map Timer\");\r\n    //   clearInterval(this.refreshTimer);\r\n    // }\r\n    next();\r\n  }\r\n};\r\n\r\n</script>\r\n<style scoped>\r\n\r\n  .mapboxgl-canvas {\r\n    width:100%;\r\n    height:auto;\r\n  }\r\n\r\n  .map_container {\r\n    position:relative;\r\n    width: 100%;\r\n    height: 100vh;\r\n  }\r\n\r\n  /* Field Marker Styling */\r\n\r\n  .field_marker:hover {\r\n    cursor:pointer;\r\n  }\r\n\r\n  /* Focus menu */\r\n\r\n  /* Focus Menu - Search Field */\r\n\r\n  .fields_search {\r\n    padding:0.5rem;\r\n    height: 2rem;\r\n    /*margin: 0.5rem;*/\r\n    width: calc(100% - 1rem);\r\n  }\r\n\r\n  .fields_search::placeholder, \r\n  .fields_search::placeholder-shown {\r\n    color: #1CA554;\r\n  }\r\n\r\n  /* Focus Menu - Search Field - Clear Button */\r\n\r\n  .fields_search_clear_btn {\r\n    position:absolute;\r\n    width:1rem;\r\n    height:1rem;\r\n    border-radius:0.1rem;\r\n    right:0.5rem; /* was 1.0 rem */\r\n    top:50%;\r\n    transform:translateY(-50%);\r\n    text-align:center;\r\n    font-size:1rem;\r\n    line-height:1;\r\n    background-color:#00A04C;\r\n    color:white;\r\n    cursor:pointer;\r\n  }\r\n\r\n  .fields_search_clear_btn:after {\r\n    content:'+';\r\n    display:block;\r\n    font-weight:bold;\r\n    transform:rotate(45deg);\r\n  }  \r\n\r\n  /* Focus Menu - Field Records */\r\n\r\n  .field_record {\r\n    position: relative;\r\n    padding:0.5rem;\r\n    padding-right:4rem;\r\n    margin-right:0.6rem;\r\n    margin-top:1px;\r\n    min-height:6rem;\r\n    font-size:0.8rem;\r\n    line-height:1.2;\r\n    color:black;\r\n    border-bottom: 1px solid #eee;\r\n  }\r\n\r\n  .field_record:hover {\r\n    cursor:pointer;\r\n  }\r\n\r\n  .field_record .field_name {\r\n    font-weight:bold;\r\n  }\r\n\r\n  .field_record .indicators {\r\n    position:absolute;\r\n    top:0;\r\n    right:0;\r\n    height:100%;\r\n    width:3.5rem;\r\n    margin:0 0.5rem;\r\n    display:flex;\r\n    flex-flow:row;\r\n    align-items: center;\r\n    justify-content: flex-end;\r\n  }\r\n\r\n  .field_record .indicators > div {\r\n    display:block;\r\n    margin:0 0.25rem;\r\n  }\r\n\r\n  .field_record_selected {\r\n    /*background: linear-gradient(90deg, rgba(255,255,255,0.5), transparent);*/\r\n    outline: 1px solid #01A04D;\r\n    margin-left:0.6rem;\r\n    transition: all .25s ease-in-out;\r\n  }\r\n\r\n  .ps__rail-y {\r\n    z-index:99;\r\n  }\r\n\r\n  /* Top right Filter Menu */\r\n\r\n  .info_filter_menu {\r\n    position:absolute;\r\n    display:block;\r\n    top:1rem;\r\n    right:1rem;\r\n    z-index:99;\r\n  }\r\n\r\n  .info_filter_menu .btn:hover {\r\n    cursor:pointer;\r\n  }\r\n\r\n  /* Side Menu Node Type Filter Menu */\r\n  .type_filter_menu {\r\n    width:100%;\r\n    padding: 0 0.5rem;\r\n  }\r\n\r\n  /* Selected Node */\r\n\r\n  .selected_node {\r\n    background: rgba(255, 255, 255, 0.1);\r\n    border: 1px solid rgba(255,255,255,0.2);\r\n    border-radius:0.25em;\r\n  }\r\n\r\n  /* Dialog Styling */\r\n\r\n  .marker_info_wrap {\r\n    display:flex;\r\n    justify-content:center;\r\n    flex-flow:column;\r\n    align-items: center;\r\n    font-size:0.9rem;\r\n  }\r\n\r\n  .marker_info_wrap .field_name {\r\n    padding:0.25rem 0.5rem;\r\n    color:white;\r\n    font-weight:bold;\r\n    font-size:1.1rem;\r\n    font-family: 'Open Sans', sans-serif;\r\n    text-shadow: 0 0 5px black;\r\n    text-align:center;\r\n  }\r\n\r\n  .marker_info_wrap .node_address,\r\n  .marker_info_wrap .last_reading_date {\r\n    display:block;\r\n    /*font-family: 'Roboto Mono', monospace;*/\r\n    font-family: 'Open Sans', sans-serif;\r\n    padding:0 0.25rem;\r\n    color:white;\r\n    width:100%;\r\n    text-align: center;\r\n  }\r\n\r\n  .marker_info_wrap .pump_control .pump_control_inner {\r\n    display:flex;\r\n    flex-flow:column;\r\n    width:100%;\r\n    align-items:center;\r\n    justify-content:center;\r\n    padding:0.25rem;\r\n    color:white;\r\n    box-shadow: inset 0 0 10px #000;\r\n    background: #222;\r\n    border-radius: 0.25rem;\r\n    border: 1px solid #333;\r\n  }\r\n\r\n  .marker_info_wrap .meter_control {\r\n    display:flex;\r\n    flex-flow:column;\r\n    width:100%;\r\n    align-items:center;\r\n    justify-content:center;\r\n    padding:0.25rem;\r\n  }\r\n\r\n  .marker_info_wrap .sm_control {\r\n    display:flex;\r\n    flex-flow:row wrap; /* NEW */\r\n    justify-content: center;\r\n    align-items: flex-start; /* NEW */\r\n    /*margin:0.25rem 0;*/\r\n    margin:0;\r\n  }\r\n\r\n  .marker_info_wrap .sm_control .sm_control_item {\r\n    display:flex;\r\n    flex-flow:column;\r\n    align-items: center;\r\n    flex: 1 0 33.3333%; /* NEW */\r\n  }\r\n\r\n  @media(max-width:1023px){\r\n    .marker_info_wrap .sm_control .sm_control_item {\r\n      flex: 1 0 50%; /* NEW */\r\n    }\r\n  }\r\n\r\n  .marker_info_wrap .sm_control .sm_control_item .marker_info_horz {\r\n    display:flex;\r\n    flex-flow:row;\r\n    justify-content: center;\r\n    align-items: flex-start;\r\n    width:100%;\r\n    margin:0.75rem 0;\r\n  }\r\n\r\n  .marker_info_wrap .sm_control .sm_control_item .marker_info_horz > * {\r\n    margin:0 0.25rem;\r\n  }\r\n\r\n  .search_wrapper {\r\n    position:relative;\r\n    margin:0.5rem;\r\n  }\r\n\r\n  .clearfix::after {\r\n    content: \"\";\r\n    clear: both;\r\n    display: table;\r\n  }\r\n\r\n  .legend_btn {\r\n    position:absolute;\r\n    bottom:2rem;\r\n    right:0.5rem;\r\n  }\r\n\r\n  .legend_btn .circle {\r\n    display:inline-block;\r\n    width:1.25rem;\r\n    height:1.25rem;\r\n    border-radius:1.25rem;\r\n    background:#eee;\r\n    color:#111;\r\n    font-weight:bold;\r\n  }\r\n\r\n  .marker {\r\n    width:50px;\r\n    height:50px;\r\n    border:2px solid white;\r\n    padding:0.4em;\r\n    border-radius:100%;\r\n  }\r\n\r\n  .marker:hover {\r\n    cursor:pointer;\r\n  }\r\n\r\n  .legend_modal .legend_box .licon { width: 1.5rem; height:1.5rem; margin-right:0.5rem; }\r\n  .legend_modal .legend_box .blue { color:blue; }\r\n  .legend_modal .legend_box .red { color:red; }\r\n  .legend_modal .legend_box .yellow { color:yellow; }\r\n  .legend_modal .legend_box .orange { color:orange; }\r\n  .legend_modal .legend_box .green { color:green; }\r\n\r\n</style>\r\n\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Map.vue?vue&type=template&id=d72bed0e&scoped=true&\"\nimport script from \"./Map.vue?vue&type=script&lang=js&\"\nexport * from \"./Map.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Map.vue?vue&type=style&index=0&id=d72bed0e&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d72bed0e\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Map.vue?vue&type=style&index=0&id=d72bed0e&scoped=true&lang=css&\""],"sourceRoot":""}