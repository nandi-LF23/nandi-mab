{"version":3,"sources":["webpack:///./src/views/Pages/MetersForm.vue?2ca8","webpack:///src/views/Pages/MetersForm.vue","webpack:///./src/views/Pages/MetersForm.vue?1c12","webpack:///./src/views/Pages/MetersForm.vue","webpack:///./src/views/Pages/MetersForm.vue?20e2"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","directives","name","rawName","value","model","expression","_v","_s","field_name","slot","loading","userCan","node_id","nativeOn","$event","goToGraph","node_address","commissioning_date","date_time","power_state","pulse_reading_1","pulse_reading_1_uom","pulse_state_1","pulse_ma_1","pulse_reading_2","pulse_reading_2_uom","pulse_state_2","pulse_ma_2","ref","on","syncFields","callback","$$v","$set","scopedSlots","_u","key","fn","focus","blur","flatPickrConfig","staticRenderFns","mixins","components","flatPicker","data","initial","date_now","device_serial_number","graph_type","graph_start_date","pump_status","computed","maxDate","methods","loadMetersData","$axios","get","$store","state","baseUrl","then","console","setTimeout","$refs","form","validate","success","title","message","type","verticalAlign","horizontalAlign","catch","duration","clean","formatUOM","formatPowerState","$router","push","params","mounted","component"],"mappings":"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","file":"js/chunk-2664fc9c.0cb90a3e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content\"},[_c('base-header',{staticClass:\"pb-6\",attrs:{\"type\":\"meters\"}},[_c('b-row',{staticClass:\"py-4\",attrs:{\"align-v\":\"center\"}},[_c('b-col',[_c('h6',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.model.field_name),expression:\"model.field_name\"}],staticClass:\"h2 text-white d-inline-block mb-0 mr-5\"},[_vm._v(\"Meters - \"+_vm._s(_vm.model.field_name))]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"mab_spinner light right\"})])],1)],1),_c('div',{staticClass:\"container-fluid mt--6\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-12\"},[_c('card',{attrs:{\"body-classes\":\"px-0 py-0\"}},[_c('template',{slot:\"header\"},[_c('b-row',[_c('b-col',[_c('base-button',{staticClass:\"btn\",attrs:{\"disabled\":_vm.loading || !_vm.userCan('Graph', 'Meters', _vm.node_id, 'O'),\"type\":\"primary\",\"size\":\"sm\",\"icon\":\"\"},nativeOn:{\"click\":function($event){return _vm.goToGraph()}}},[_vm._v(\"\\n                  Graph\\n                \")])],1)],1)],1),_c('div',{staticClass:\"card-body\"},[_c('b-row',[_c('b-col',{attrs:{\"sm\":\"6\",\"md\":\"4\"}},[_c('b-toast',{attrs:{\"visible\":true,\"title\":\"Node Address\",\"static\":\"\",\"no-auto-hide\":\"\",\"no-close-button\":\"\"}},[_vm._v(\"\\n                  \"+_vm._s(_vm.node_address)+\"\\n                \")]),_c('b-toast',{attrs:{\"visible\":true,\"title\":\"Installed\",\"static\":\"\",\"no-auto-hide\":\"\",\"no-close-button\":\"\"}},[_vm._v(\"\\n                  \"+_vm._s(_vm.model.commissioning_date)+\"\\n                \")]),_c('b-toast',{attrs:{\"visible\":true,\"title\":\"Last Reading\",\"static\":\"\",\"no-auto-hide\":\"\",\"no-close-button\":\"\"}},[_vm._v(\"\\n                  \"+_vm._s(_vm.date_time)+\"\\n                \")]),_c('b-toast',{attrs:{\"visible\":true,\"title\":\"Power State\",\"static\":\"\",\"no-auto-hide\":\"\",\"no-close-button\":\"\"}},[_vm._v(\"\\n                  \"+_vm._s(_vm.power_state)+\"\\n                \")])],1),_c('b-col',{attrs:{\"sm\":\"6\",\"md\":\"4\"}},[_c('b-toast',{attrs:{\"visible\":true,\"title\":\"Pulse 1 Reading (RAW)\",\"static\":\"\",\"no-auto-hide\":\"\",\"no-close-button\":\"\"}},[_vm._v(\"\\n                  \"+_vm._s(_vm.pulse_reading_1)+\"\\n                \")]),_c('b-toast',{attrs:{\"visible\":true,\"title\":\"Pulse 1 Reading (UOM)\",\"static\":\"\",\"no-auto-hide\":\"\",\"no-close-button\":\"\"}},[_vm._v(\"\\n                  \"+_vm._s(_vm.pulse_reading_1_uom)+\"\\n                \")]),_c('b-toast',{attrs:{\"visible\":true,\"title\":\"Pulse 1 State\",\"static\":\"\",\"no-auto-hide\":\"\",\"no-close-button\":\"\"}},[_vm._v(\"\\n                  \"+_vm._s(_vm.pulse_state_1)+\"\\n                \")]),_c('b-toast',{attrs:{\"visible\":true,\"title\":\"Pulse 1 mA\",\"static\":\"\",\"no-auto-hide\":\"\",\"no-close-button\":\"\"}},[_vm._v(\"\\n                  \"+_vm._s(_vm.pulse_ma_1)+\"\\n                \")])],1),_c('b-col',{attrs:{\"sm\":\"6\",\"md\":\"4\"}},[_c('b-toast',{attrs:{\"visible\":true,\"title\":\"Pulse 2 Reading (RAW)\",\"static\":\"\",\"no-auto-hide\":\"\",\"no-close-button\":\"\"}},[_vm._v(\"\\n                  \"+_vm._s(_vm.pulse_reading_2)+\"\\n                \")]),_c('b-toast',{attrs:{\"visible\":true,\"title\":\"Pulse 2 Reading (UOM)\",\"static\":\"\",\"no-auto-hide\":\"\",\"no-close-button\":\"\"}},[_vm._v(\"\\n                  \"+_vm._s(_vm.pulse_reading_2_uom)+\"\\n                \")]),_c('b-toast',{attrs:{\"visible\":true,\"title\":\"Pulse 2 State\",\"static\":\"\",\"no-auto-hide\":\"\",\"no-close-button\":\"\"}},[_vm._v(\"\\n                  \"+_vm._s(_vm.pulse_state_2)+\"\\n                \")]),_c('b-toast',{attrs:{\"visible\":true,\"title\":\"Pulse 2 mA\",\"static\":\"\",\"no-auto-hide\":\"\",\"no-close-button\":\"\"}},[_vm._v(\"\\n                  \"+_vm._s(_vm.pulse_ma_2)+\"\\n                \")])],1),_c('b-col',{attrs:{\"sm\":\"6\",\"md\":\"4\"}})],1)],1)],2)],1)]),_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-12\"},[_c('card',{attrs:{\"body-classes\":\"px-0 py-0\"}},[_c('template',{slot:\"header\"},[_c('h3',{staticClass:\"mb-0\"},[_vm._v(\"Hardware Config - Advanced Meters\")])]),_c('div',{staticClass:\"card-body\"},[_c('validation-observer',{ref:\"form\",attrs:{\"slim\":\"\"}},[_c('b-row',[_c('b-col',[_c('base-input',{attrs:{\"name\":\"field name\",\"rules\":\"required\",\"label\":\"Field Name\",\"placeholder\":\"Field Name\",\"vid\":\"field_name\"},on:{\"change\":_vm.syncFields},model:{value:(_vm.model.field_name),callback:function ($$v) {_vm.$set(_vm.model, \"field_name\", $$v)},expression:\"model.field_name\"}})],1),_c('b-col',[_c('base-input',{attrs:{\"name\":\"device serial number\",\"rules\":\"required\",\"label\":\"Device Serial Number\",\"placeholder\":\"Device Serial Number\",\"vid\":\"device_serial_number\"},on:{\"change\":_vm.syncFields},model:{value:(_vm.model.device_serial_number),callback:function ($$v) {_vm.$set(_vm.model, \"device_serial_number\", $$v)},expression:\"model.device_serial_number\"}})],1)],1)],1)],1)],2),_c('card',{attrs:{\"body-classes\":\"px-0 py-0\"}},[_c('template',{slot:\"header\"},[_c('h3',{staticClass:\"mb-0\"},[_vm._v(\"Graph Configuration\")])]),_c('div',{staticClass:\"card-body\"},[_c('validation-observer',{ref:\"nform\",attrs:{\"slim\":\"\"}},[_c('b-row',{attrs:{\"align-v\":\"center\"}},[_c('b-col',{attrs:{\"md\":\"\"}},[_c('base-input',{attrs:{\"label\":\"Graph Type\",\"name\":\"graph type\",\"rules\":\"required\",\"vid\":\"graph_type\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"placeholder\":\"Graph Type\"},on:{\"change\":_vm.syncFields},model:{value:(_vm.model.graph_type),callback:function ($$v) {_vm.$set(_vm.model, \"graph_type\", $$v)},expression:\"model.graph_type\"}},[_c('el-option',{attrs:{\"label\":\"Pulse\",\"value\":\"pulse\"}}),_c('el-option',{attrs:{\"label\":\"Technical\",\"value\":\"tech\"}})],1)],1)],1),_c('b-col',{attrs:{\"md\":\"\"}},[_c('base-input',{attrs:{\"label\":\"Graph Start Date\",\"name\":\"start date\",\"vid\":\"graph_start_date\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar focus = ref.focus;\nvar blur = ref.blur;\nreturn _c('flat-picker',{staticClass:\"form-control datepicker\",attrs:{\"placeholder\":\"Graph Start Date\",\"config\":_vm.flatPickrConfig},on:{\"on-open\":focus,\"on-close\":blur,\"on-change\":_vm.syncFields},model:{value:(_vm.model.graph_start_date),callback:function ($$v) {_vm.$set(_vm.model, \"graph_start_date\", $$v)},expression:\"model.graph_start_date\"}})}}])})],1)],1)],1)],1)],2)],1)])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"content\">\r\n    <base-header class=\"pb-6\" type=\"meters\">\r\n      <b-row align-v=\"center\" class=\"py-4\">\r\n        <b-col>\r\n          <h6 class=\"h2 text-white d-inline-block mb-0 mr-5\" v-show='model.field_name'>Meters - {{ model.field_name }}</h6>\r\n          <div v-show='loading' class='mab_spinner light right'></div>\r\n        </b-col>\r\n      </b-row>\r\n    </base-header>\r\n\r\n    <div class='container-fluid mt--6'>\r\n      <div class='row'>\r\n        <div class='col-md-12'>\r\n          <card body-classes=\"px-0 py-0\">\r\n\r\n            <template slot=\"header\">\r\n              <b-row>\r\n                <b-col>\r\n                  <base-button \r\n                    :disabled=\"loading || !userCan('Graph', 'Meters', node_id, 'O')\"\r\n                    @click.native=\"goToGraph()\"\r\n                    class=\"btn\"\r\n                    type=\"primary\"\r\n                    size=\"sm\"\r\n                    icon>\r\n                    Graph\r\n                  </base-button>\r\n                </b-col>\r\n              </b-row>\r\n            </template>\r\n\r\n            <div class=\"card-body\">\r\n              <b-row>\r\n                <b-col sm=\"6\" md=\"4\">\r\n                  <b-toast :visible=\"true\" title=\"Node Address\" static no-auto-hide no-close-button>\r\n                    {{ node_address }}\r\n                  </b-toast>\r\n                  <b-toast :visible=\"true\" title=\"Installed\" static no-auto-hide no-close-button>\r\n                    {{ model.commissioning_date }}\r\n                  </b-toast>\r\n                  <b-toast :visible=\"true\" title=\"Last Reading\" static no-auto-hide no-close-button>\r\n                    {{ date_time }}\r\n                  </b-toast>\r\n                  <b-toast :visible=\"true\" title=\"Power State\" static no-auto-hide no-close-button>\r\n                    {{ power_state }}\r\n                  </b-toast>\r\n                </b-col>\r\n                <b-col sm=\"6\" md=\"4\">\r\n                  <b-toast :visible=\"true\" title=\"Pulse 1 Reading (RAW)\" static no-auto-hide no-close-button>\r\n                    {{ pulse_reading_1 }}\r\n                  </b-toast>\r\n                  <b-toast :visible=\"true\" title=\"Pulse 1 Reading (UOM)\" static no-auto-hide no-close-button>\r\n                    {{ pulse_reading_1_uom }}\r\n                  </b-toast>\r\n                  <b-toast :visible=\"true\" title=\"Pulse 1 State\" static no-auto-hide no-close-button>\r\n                    {{ pulse_state_1 }}\r\n                  </b-toast>\r\n                  <b-toast :visible=\"true\" title=\"Pulse 1 mA\" static no-auto-hide no-close-button>\r\n                    {{ pulse_ma_1 }}\r\n                  </b-toast>\r\n                </b-col>\r\n                <b-col sm=\"6\" md=\"4\">\r\n                  <b-toast :visible=\"true\" title=\"Pulse 2 Reading (RAW)\" static no-auto-hide no-close-button>\r\n                    {{ pulse_reading_2 }}\r\n                  </b-toast>\r\n                  <b-toast :visible=\"true\" title=\"Pulse 2 Reading (UOM)\" static no-auto-hide no-close-button>\r\n                    {{ pulse_reading_2_uom }}\r\n                  </b-toast>\r\n                  <b-toast :visible=\"true\" title=\"Pulse 2 State\" static no-auto-hide no-close-button>\r\n                    {{ pulse_state_2 }}\r\n                  </b-toast>\r\n                  <b-toast :visible=\"true\" title=\"Pulse 2 mA\" static no-auto-hide no-close-button>\r\n                    {{ pulse_ma_2 }}\r\n                  </b-toast>\r\n                </b-col>\r\n                <b-col sm=\"6\" md=\"4\">\r\n                </b-col>\r\n              </b-row>\r\n            </div>\r\n          </card>\r\n        </div>\r\n      </div>\r\n\r\n      <div class='row'>\r\n        <div class='col-md-12'>\r\n          <card body-classes=\"px-0 py-0\">\r\n            <template slot=\"header\">\r\n              <h3 class=\"mb-0\">Hardware Config - Advanced Meters</h3>\r\n            </template>\r\n\r\n            <div class=\"card-body\">\r\n              <validation-observer ref='form' slim>\r\n                <b-row>\r\n                  <b-col>\r\n                    <base-input @change=\"syncFields\" name=\"field name\" rules=\"required\" label='Field Name' placeholder=\"Field Name\" vid=\"field_name\" v-model=\"model.field_name\"></base-input>\r\n                  </b-col>\r\n                  <b-col>\r\n                    <base-input @change=\"syncFields\" name=\"device serial number\" rules=\"required\" label='Device Serial Number' placeholder=\"Device Serial Number\" vid=\"device_serial_number\" v-model=\"model.device_serial_number\"></base-input>\r\n                  </b-col>\r\n                </b-row>\r\n              </validation-observer>\r\n            </div>\r\n          </card>\r\n\r\n          <card body-classes=\"px-0 py-0\">\r\n\r\n            <template slot=\"header\">\r\n              <h3 class=\"mb-0\">Graph Configuration</h3>\r\n            </template>\r\n\r\n            <div class=\"card-body\">\r\n              <validation-observer ref='nform' slim>\r\n                <b-row align-v=\"center\">\r\n                  <b-col md>\r\n                    <base-input label=\"Graph Type\" name=\"graph type\" rules=\"required\" vid=\"graph_type\">\r\n                      <el-select @change=\"syncFields\" v-model=\"model.graph_type\" filterable placeholder=\"Graph Type\">\r\n                        <el-option label=\"Pulse\" value='pulse'></el-option>\r\n                        <el-option label=\"Technical\" value='tech'></el-option>\r\n                      </el-select>\r\n                    </base-input>\r\n                  </b-col>\r\n                  <b-col md>\r\n                    <base-input label=\"Graph Start Date\" name=\"start date\" vid=\"graph_start_date\">\r\n                      <flat-picker slot-scope=\"{focus, blur}\"\r\n                        @on-open=\"focus\"\r\n                        @on-close=\"blur\"\r\n                        @on-change=\"syncFields\"\r\n                        placeholder=\"Graph Start Date\"\r\n                        class=\"form-control datepicker\"\r\n                        v-model=\"model.graph_start_date\" :config=\"flatPickrConfig\">\r\n                      </flat-picker>\r\n                    </base-input>\r\n                  </b-col>\r\n                </b-row>\r\n              </validation-observer>\r\n            </div>\r\n          </card>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\n  /* eslint-disable no-new */\r\nimport { Select, Option } from 'element-ui'\r\nimport flatPicker from \"vue-flatpickr-component\";\r\nimport \"flatpickr/dist/flatpickr.css\";\r\nimport mab_utils from '../../util/mab-utils';\r\n\r\nexport default {\r\n\r\n  mixins: [ mab_utils ],\r\n\r\n  components: {\r\n    [Select.name]: Select,\r\n    [Option.name]: Option,\r\n    flatPicker\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      initial: true,\r\n      loading: false,\r\n      date_now: null,\r\n      model: {\r\n        field_name: '',\r\n        device_serial_number: '',\r\n        graph_type: '',\r\n        graph_start_date: ''\r\n      },\r\n      node_id: null,\r\n      node_address: null,\r\n      power_state: '',\r\n      pump_status: false,\r\n      pulse_state_1: 'Unknown',\r\n      pulse_state_2: 'Unknown',\r\n      pulse_ma_1: 0,\r\n      pulse_ma_2: 0,\r\n      date_time: '',\r\n      pulse_reading_1: 0,\r\n      pulse_reading_1_uom: 0,\r\n      pulse_reading_2: 0,\r\n      pulse_reading_2_uom: 0\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    flatPickrConfig: function() {\r\n      return { maxDate: this.date_now }\r\n    },\r\n  },\r\n\r\n  methods: {\r\n\r\n    loadMetersData() {\r\n      this.loading = true;\r\n      this.$axios.get(this.$store.state.baseUrl+\"/api/ManageWMV1/\" + this.$route.params.node_address)\r\n      .then(response => {\r\n          this.loading = false;\r\n          console.log(response);\r\n          let data = response.data;\r\n          if(data){\r\n\r\n            this.node_id = data.hw.id;\r\n            this.node_address = data.hw.node_address;\r\n            this.date_time = data.hw.date_time;\r\n\r\n            this.model.field_name = data.field.field_name;\r\n            this.model.device_serial_number = data.hw.device_serial_number;\r\n            this.model.graph_type = data.field.graph_type;\r\n            this.model.graph_start_date = data.field.graph_start_date;\r\n\r\n            if(data.ndm){\r\n              this.pulse_reading_1 = data.ndm.pulse_1;\r\n              this.pulse_reading_1_uom = (data.ndm.pulse_1 * data.hwm.pulse_weight) + ' ' + this.formatUOM(data.hwm.measurement_type);\r\n              this.pulse_reading_2 = data.ndm.pulse_2;\r\n              this.pulse_reading_2_uom = (data.ndm.pulse_2 * data.hwm.pulse_weight) + ' ' + this.formatUOM(data.hwm.measurement_type);\r\n              this.pulse_state_1 = data.ndm.state_of_measure_1 ? 'Open' : 'Closed';\r\n              this.pulse_state_2 = data.ndm.state_of_measure_2 ? 'Open' : 'Closed';\r\n              this.pulse_ma_1 = data.ndm.pulse_1_mA;\r\n              this.pulse_ma_2 = data.ndm.pulse_2_mA;\r\n              this.power_state = this.formatPowerState(data.ndm.power_state);\r\n            }\r\n\r\n            if(this.initial){\r\n              this.model.graph_type = data.field.graph_type;\r\n              this.model.graph_start_date = data.field.graph_start_date;\r\n            }\r\n\r\n            this.date_now = data.date_now;\r\n\r\n            // nasty fix for a nasty datepicker\r\n            setTimeout(() => { this.initial = false; }, 1000);\r\n          }\r\n      }); \r\n    },\r\n\r\n    syncFields(){\r\n\r\n      if(this.initial) return;\r\n\r\n      this.$refs.form.validate()\r\n      .then(success => {\r\n\r\n        if (!success || !this.node_address) { \r\n          this.$notify({\r\n            title: 'Required',\r\n            message: 'Please fill in all fields',\r\n            type: 'danger',\r\n            verticalAlign: 'top',\r\n            horizontalAlign: 'right',\r\n            duration:1000,\r\n            clean:true\r\n          });\r\n          return;\r\n        }\r\n\r\n        this.loading = true;\r\n        this.$axios.post(this.$store.state.baseUrl+\"/api/update_wm/\" + this.node_address, this.model)\r\n        .then((resp) => {\r\n          this.loading = false;\r\n          if(resp.data.message == 'node_updated'){\r\n            this.$notify({\r\n              title: 'Saved',\r\n              message: 'Changes were saved',\r\n              type: 'success',\r\n              verticalAlign: 'top',\r\n              horizontalAlign: 'right'\r\n            });\r\n          } else if(resp.data.message == 'nonexistent'){\r\n            this.$notify({\r\n              title: 'Error',\r\n              message: 'Node not found (might have been removed)',\r\n              type: 'danger',\r\n              verticalAlign: 'top',\r\n              horizontalAlign: 'right'\r\n            });\r\n          }\r\n        }).catch(err => {\r\n          this.loading = false;\r\n          if(err.response.data.errors){\r\n            this.$refs.form.setErrors(err.response.data.errors);\r\n          }\r\n        });\r\n      });\r\n    },\r\n\r\n    formatUOM(value){\r\n      if(value == 'Cubes'){ return 'cm3'; }\r\n      if(value == 'Gallons'){ return 'gal'; }\r\n      return '';\r\n    },\r\n\r\n    formatPowerState(value){\r\n      let power_states = ['No Power, Not Charging', 'No Power, Charging', 'Power, Not Charging', 'Power, Charging'];\r\n      return (value >= 0 && value < power_states.length) ? power_states[value] : 'Invalid';\r\n    },\r\n\r\n    goToGraph()\r\n    {\r\n      this.$router.push({\r\n        name: \"meters_graph\",\r\n        params:{\r\n          node_address: this.$route.params.node_address\r\n        }\r\n      });\r\n    }\r\n\r\n  },\r\n  mounted() {\r\n    this.loadMetersData();\r\n  }\r\n};\r\n</script>\r\n<style scoped>\r\n  .loader {\r\n    position:absolute;\r\n    right:1rem;\r\n    top:1rem;\r\n    z-index:99;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MetersForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MetersForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MetersForm.vue?vue&type=template&id=2be4c07c&scoped=true&\"\nimport script from \"./MetersForm.vue?vue&type=script&lang=js&\"\nexport * from \"./MetersForm.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MetersForm.vue?vue&type=style&index=0&id=2be4c07c&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2be4c07c\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MetersForm.vue?vue&type=style&index=0&id=2be4c07c&scoped=true&lang=css&\""],"sourceRoot":""}