(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ad43c9e2"],{"016f":function(e,t,a){},3003:function(e,t,a){"use strict";a("f6ea")},"486c":function(e,t,a){e.exports=function(e){var t={};function a(o){if(t[o])return t[o].exports;var l=t[o]={i:o,l:!1,exports:{}};return e[o].call(l.exports,l,l.exports,a),l.l=!0,l.exports}return a.m=e,a.c=t,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/dist/",a(a.s=147)}({0:function(e,t){e.exports=function(e,t,a,o,l,r){var i,s=e=e||{},n=typeof e.default;"object"!==n&&"function"!==n||(i=e,s=e.default);var d,c="function"===typeof s?s.options:s;if(t&&(c.render=t.render,c.staticRenderFns=t.staticRenderFns,c._compiled=!0),a&&(c.functional=!0),l&&(c._scopeId=l),r?(d=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},c._ssrRegister=d):o&&(d=o),d){var u=c.functional,f=u?c.render:c.beforeCreate;u?(c._injectStyles=d,c.render=function(e,t){return d.call(t),f(e,t)}):c.beforeCreate=f?[].concat(f,d):[d]}return{esModule:i,exports:s,options:c}}},1:function(e,t){e.exports=a("d010")},147:function(e,t,a){"use strict";t.__esModule=!0;var o=a(148),l=r(o);function r(e){return e&&e.__esModule?e:{default:e}}l.default.install=function(e){e.component(l.default.name,l.default)},t.default=l.default},148:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(149),l=a.n(o),r=a(150),i=a(0),s=!1,n=null,d=null,c=null,u=i(l.a,r["a"],s,n,d,c);t["default"]=u.exports},149:function(e,t,a){"use strict";t.__esModule=!0;var o=a(1),l=r(o);function r(e){return e&&e.__esModule?e:{default:e}}t.default={mixins:[l.default],name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:{type:Boolean,default:!1}},data:function(){return{visible:!0}},watch:{disabled:function(e){this.broadcast("ElOption","handleGroupDisabled",e)}},methods:{queryChange:function(){this.visible=this.$children&&Array.isArray(this.$children)&&this.$children.some((function(e){return!0===e.visible}))}},created:function(){this.$on("queryChange",this.queryChange)},mounted:function(){this.disabled&&this.broadcast("ElOption","handleGroupDisabled",this.disabled)}}},150:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-select-group__wrap"},[a("li",{staticClass:"el-select-group__title"},[e._v(e._s(e.label))]),a("li",[a("ul",{staticClass:"el-select-group"},[e._t("default")],2)])])},l=[],r={render:o,staticRenderFns:l};t["a"]=r}})},"74bb":function(e,t,a){"use strict";a.r(t);var o,l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("base-header",{staticClass:"pb-6",attrs:{type:"dataformats"}},[a("b-row",{staticClass:"py-4",attrs:{"align-v":"center"}},[a("b-col",[a("h6",{staticClass:"h2 text-white d-inline-block mb-0 mr-5"},[e._v("Data Formats")]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"mab_spinner light right"})])],1)],1),a("b-container",{staticClass:"mt--6",attrs:{fluid:""}},[a("b-modal",{attrs:{size:"xl",centered:"","no-close-on-esc":"","no-close-on-backdrop":""},scopedSlots:e._u([{key:"modal-header",fn:function(t){t.close;return[a("h6",{staticClass:"modal-title",attrs:{slot:"header",id:"modal-title-default"},slot:"header"},[e._v("Create New Data Format")])]}},{key:"default",fn:function(t){t.hide;return[a("validation-observer",{ref:"addform",attrs:{slim:""}},[a("form",{attrs:{role:"form"},on:{submit:function(e){return e.preventDefault(),function(){return!1}.apply(null,arguments)}}},[a("b-row",[a("b-col",[a("base-input",{attrs:{vid:"name",rules:"required|max:128",name:"format name",placeholder:"Data Format Name"},model:{value:e.add_model.name,callback:function(t){e.$set(e.add_model,"name",t)},expression:"add_model.name"}})],1),a("b-col",[a("base-input",{attrs:{name:"format",rules:"required",vid:"format"}},[a("el-select",{attrs:{filterable:"",placeholder:"Data Format Type",disabled:!e.isAdmin()&&e.format_types.length<2},on:{change:function(t){return e.initSpec(e.add_model)}},model:{value:e.add_model.format,callback:function(t){e.$set(e.add_model,"format",t)},expression:"add_model.format"}},e._l(e.format_types,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1)],1),"JSON"==e.add_model.format?[a("b-row",[a("b-col",[a("base-input",[a("el-select",{staticClass:"fullwidth",attrs:{clearable:"",multiple:"",placeholder:"Supported Types.."},model:{value:e.add_model.spec.meta.supported_types,callback:function(t){e.$set(e.add_model.spec.meta,"supported_types",t)},expression:"add_model.spec.meta.supported_types"}},e._l(e.node_types,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),a("b-col",[a("base-input",[a("el-select",{staticClass:"fullwidth",attrs:{clearable:"",placeholder:"Mode.."},model:{value:e.add_model.spec.meta.mode,callback:function(t){e.$set(e.add_model.spec.meta,"mode",t)},expression:"add_model.spec.meta.mode"}},e._l(e.spec_modes,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1)],1),e.add_model.spec.meta.mode&&e.add_model.spec.meta.supported_types?[a("b-row",[a("b-col",[a("h4",[e._v("JSON Format Designer")])])],1),a("b-row",[a("b-col",[e.add_model.spec.meta.mode&&e.add_model.spec.meta.supported_types?a("JSONFieldMapper",{attrs:{meta:e.add_model.spec.meta,fields:e.add_model.spec.data,targets:e.targets}}):e._e()],1)],1)]:e._e()]:"Binary"==e.add_model.format?[a("b-row",[a("b-col",[a("h4",[e._v("Binary Format Designer")])])],1)]:e._e()],2)])]}},{key:"modal-footer",fn:function(t){t.ok,t.cancel,t.hide;return[a("b-button",{staticClass:"ml-auto",attrs:{variant:"outline-primary"},on:{click:e.closeAddDFModal}},[e._v("Cancel")]),a("b-button",{attrs:{variant:"primary"},on:{click:e.addDataFormat}},[e._v("Create")])]}}]),model:{value:e.showNewDFModal,callback:function(t){e.showNewDFModal=t},expression:"showNewDFModal"}}),a("b-modal",{attrs:{size:"xl",centered:"","no-close-on-esc":"","no-close-on-backdrop":""},scopedSlots:e._u([{key:"modal-header",fn:function(t){t.close;return[a("h6",{staticClass:"modal-title",attrs:{slot:"header",id:"modal-title-default"},slot:"header"},[e._v("Edit Data Format")])]}},{key:"default",fn:function(t){t.hide;return[a("validation-observer",{ref:"editform",attrs:{slim:""}},[a("form",{attrs:{role:"form"},on:{submit:function(e){return e.preventDefault(),function(){return!1}.apply(null,arguments)}}},[a("b-row",[a("b-col",[a("base-input",{attrs:{vid:"name",rules:"required|max:128",name:"format name",placeholder:"Data Format Name"},model:{value:e.edit_model.name,callback:function(t){e.$set(e.edit_model,"name",t)},expression:"edit_model.name"}})],1),a("b-col",[a("base-input",{attrs:{name:"format",rules:"required",vid:"format"}},[a("el-select",{attrs:{filterable:"",placeholder:"Data Format Type",disabled:!e.isAdmin()&&e.format_types.length<2},on:{change:function(t){return e.initSpec(e.edit_model)}},model:{value:e.edit_model.format,callback:function(t){e.$set(e.edit_model,"format",t)},expression:"edit_model.format"}},e._l(e.format_types,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1)],1),"JSON"==e.edit_model.format?[a("b-row",[a("b-col",[a("base-input",{attrs:{label:"Supported Types"}},[a("el-select",{staticClass:"fullwidth",attrs:{clearable:"",multiple:"",placeholder:"Supported Types.."},model:{value:e.edit_model.spec.meta.supported_types,callback:function(t){e.$set(e.edit_model.spec.meta,"supported_types",t)},expression:"edit_model.spec.meta.supported_types"}},e._l(e.node_types,(function(e){return a("el-option",{key:e,attrs:{value:e,label:e}})})),1)],1)],1),a("b-col",[a("base-input",{attrs:{label:"Mode"}},[a("el-select",{staticClass:"fullwidth",attrs:{clearable:"",placeholder:"Mode.."},model:{value:e.edit_model.spec.meta.mode,callback:function(t){e.$set(e.edit_model.spec.meta,"mode",t)},expression:"edit_model.spec.meta.mode"}},e._l(e.spec_modes,(function(e){return a("el-option",{key:e,attrs:{value:e,label:e}})})),1)],1)],1)],1),e.edit_model.spec.meta.mode&&e.edit_model.spec.meta.supported_types?[a("b-row",[a("b-col",[a("h4",[e._v("JSON Format Designer")])])],1),a("b-row",[a("b-col",[a("JSONFieldMapper",{attrs:{meta:e.edit_model.spec.meta,fields:e.edit_model.spec.data,targets:e.targets}})],1)],1)]:e._e()]:"Binary"==e.edit_model.format?[a("b-row",[a("b-col",[a("h4",[e._v("Binary Format Designer")])])],1)]:e._e()],2)])]}},{key:"modal-footer",fn:function(t){t.ok,t.cancel,t.hide;return[a("b-button",{staticClass:"ml-auto",attrs:{variant:"outline-primary"},on:{click:e.closeEditDFModal}},[e._v("Cancel")]),a("b-button",{attrs:{variant:"primary"},on:{click:e.updateDataFormat}},[e._v("Save")])]}}]),model:{value:e.showEditDFModal,callback:function(t){e.showEditDFModal=t},expression:"showEditDFModal"}}),a("card",{staticClass:"no-border-card",attrs:{"body-classes":"px-0 pb-0","footer-classes":"pb-2"}},[a("template",{slot:"header"},[a("base-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",modifiers:{hover:!0,top:!0}}],staticClass:"btn",attrs:{disabled:!e.isAdmin()||e.loading,size:"sm",type:"primary",title:"Data Formats are used to recognize and parse data packets.",icon:""},on:{click:e.openAddDFModal}},[e._v("\n          Add Data Format\n        ")])],1),a("b-row",{staticClass:"nomargin"},[a("b-col",{attrs:{md:""}},[a("b-form-select",{on:{change:e.loadDataFormats},model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}},[a("b-form-select-option",{attrs:{value:5}},[e._v("5")]),a("b-form-select-option",{attrs:{value:10}},[e._v("10")]),a("b-form-select-option",{attrs:{value:25,selected:""}},[e._v("25")]),a("b-form-select-option",{attrs:{value:50}},[e._v("50")])],1)],1),a("b-col",{attrs:{md:""}},[e.format_types&&e.format_types.length>1?a("el-select",{staticClass:"fullwidth",attrs:{clearable:"",filterable:"",placeholder:"Filter by Type.."},on:{change:e.loadDataFormats},model:{value:e.filterDataFormats,callback:function(t){e.filterDataFormats=t},expression:"filterDataFormats"}},e._l(e.format_types,(function(e){return a("el-option",{key:e,attrs:{value:e,label:e}})})),1):e._e()],1),a("b-col",{attrs:{md:""}},[a("base-input",{attrs:{"prepend-icon":"fas fa-search"}},[a("b-input",{attrs:{debounce:1e3,placeholder:"Search..."},on:{update:e.loadDataFormats},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}})],1)],1)],1),a("b-row",{staticClass:"nomargin"},[a("b-col",{attrs:{md:""}},[a("b-table",{ref:"table",attrs:{striped:"",bordered:"",outlined:"",small:"",stacked:"lg",responsive:"","show-empty":"","primary-key":"id",fields:e.tableColumns,items:e.tableData,busy:e.bInitialQuery},on:{"sort-changed":e.sortingChanged,"update:busy":function(t){e.bInitialQuery=t}},scopedSlots:e._u([{key:"cell()",fn:function(t){return[e._v("\n              "+e._s(t.value)+"\n            ")]}},{key:"cell(actions)",fn:function(t){return[a("div",{staticClass:"d-flex justify-content-center"},[a("b-button",{staticClass:"btn",attrs:{disabled:!e.isAdmin(),variant:"outline-primary",size:"sm"},on:{click:function(a){return e.handleEdit(t.index,t.item)}}},[e._v("\n                  Edit\n                ")]),a("b-button",{staticClass:"btn",attrs:{disabled:!e.isAdmin(),variant:"outline-primary",size:"sm"},on:{click:function(a){return e.handleDelete(t.index,t.item)}}},[e._v("\n                  Remove\n                ")])],1)]}},{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center"},[a("div",{staticClass:"mab_spinner"})])]},proxy:!0},{key:"emptyfiltered",fn:function(){return[a("div",{staticClass:"text-center"},[e._v("\n                No matches found\n              ")])]},proxy:!0},{key:"empty",fn:function(){return[a("div",{staticClass:"text-center"},[e._v("\n                No entries found\n              ")])]},proxy:!0}])})],1)],1),a("div",{staticClass:"align-right",attrs:{slot:"footer"},slot:"footer"},[a("b-row",[a("b-col",{attrs:{md:""}},[e._v("\n            Showing "+e._s(Math.min(1+e.perPage*(e.currentPage-1),e.totalRows))+" to "+e._s(Math.min(e.perPage*(e.currentPage-1)+e.perPage,e.totalRows))+" of "+e._s(e.totalRows)+" entries\n          ")]),a("b-col",{attrs:{md:""}},[a("b-pagination",{attrs:{"total-rows":e.totalRows,"per-page":e.perPage,align:"right"},on:{input:e.loadDataFormats},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)],1)],2)],1)],1)},r=[],i=a("bd86"),s=(a("016f"),a("450d"),a("486c")),n=a.n(s),d=(a("6611"),a("e772")),c=a.n(d),u=(a("7f7f"),a("1f1a"),a("4e4b")),f=a.n(u),p=a("3d20"),m=a.n(p),b=a("8fe0"),v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"jsonfieldmapper"},[e._l(e.dataFields,(function(t,o){return[a("validation-observer",{key:e.refBase+"-"+o.toString(),attrs:{slim:""},scopedSlots:e._u([{key:"default",fn:function(l){var r=l.validate;return[a("b-row",[a("b-col",[a("validation-provider",{attrs:{rules:"required",vid:"type",name:"type"},scopedSlots:e._u([{key:"default",fn:function(o){var l=o.errors;return[a("b-form-select",{attrs:{size:"sm",vid:"type",name:"type"},on:{change:function(a){return e.changeFieldRowType(t)}},model:{value:t.type,callback:function(a){e.$set(t,"type",a)},expression:"field.type"}},[a("b-form-select-option",{attrs:{value:null,disabled:""}},[e._v("Field Type")]),e.parent?a("b-form-select-option",{attrs:{value:"text"}},[e._v("Text")]):e._e(),e.parent?a("b-form-select-option",{attrs:{value:"number"}},[e._v("Number")]):e._e(),e.parent?a("b-form-select-option",{attrs:{value:"bool"}},[e._v("Boolean")]):e._e(),a("b-form-select-option",{attrs:{value:"array"}},[e._v("Array")]),a("b-form-select-option",{attrs:{value:"object"}},[e._v("Object")])],1),a("span",{staticClass:"validation-failed"},[e._v(e._s(l[0]))])]}}],null,!0)})],1),a("b-col",[t.type&&("array"==t.type?e.parent&&"array"!=e.parent.type:"object"!=t.type||e.parent&&"array"!=e.parent.type)?a("validation-provider",{attrs:{rules:"required",vid:"source",name:"source"},scopedSlots:e._u([{key:"default",fn:function(o){var l=o.errors;return[a("b-form-input",{attrs:{size:"sm",vid:"source",name:"source",placeholder:"Source Field"},model:{value:t.source,callback:function(a){e.$set(t,"source",a)},expression:"field.source"}}),a("span",{staticClass:"validation-failed"},[e._v(e._s(l[0]))])]}}],null,!0)}):e._e()],1),a("b-col",[t.source&&t.type&&-1==["array","object"].indexOf(t.type)?a("validation-provider",{attrs:{rules:"required",vid:"target",name:"target"},scopedSlots:e._u([{key:"default",fn:function(o){var l=o.errors;return[a("b-form-select",{attrs:{size:"sm",vid:"target",name:"target",options:e.targets},scopedSlots:e._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:"null",disabled:""}},[e._v("Select Target")])]},proxy:!0}],null,!0),model:{value:t.target,callback:function(a){e.$set(t,"target",a)},expression:"field.target"}}),a("span",{staticClass:"validation-failed"},[e._v(e._s(l[0]))])]}}],null,!0)}):e._e()],1),a("b-col",{staticClass:"text-right"},[a("b-button-group",{attrs:{size:"sm"}},[a("b-button",{attrs:{title:"Delete Row",variant:"primary-outline",disabled:e.dataFields.length<2},on:{click:function(t){return e.delFieldRow(o)}}},[a("b-icon",{attrs:{icon:"dash-circle","aria-hidden":"true"}})],1),a("b-button",{attrs:{title:e.parent&&"array"==e.parent.type&&1==e.parent.config.variable_members?"Add Variation Below":"Add Row Below",variant:"primary-outline",disabled:!e.parent||"array"==e.parent.type&&0==e.parent.config.variable_members},on:{click:function(t){return e.addFieldRow(o,r)}}},[a("b-icon",{attrs:{icon:e.parent&&"array"==e.parent.type&&1==e.parent.config.variable_members?"plus-circle-fill":"plus-circle","aria-hidden":"true"}})],1),a("b-button",{attrs:{title:"Move Up",variant:"primary-outline",disabled:!e.parent||"array"==e.parent.type&&0==e.parent.config.variable_members},on:{click:function(t){return e.moveUpFieldRow(o)}}},[a("b-icon",{attrs:{icon:"arrow-up-circle","aria-hidden":"true"}})],1),a("b-button",{attrs:{title:"Move Down",variant:"primary-outline",disabled:!e.parent||"array"==e.parent.type&&0==e.parent.config.variable_members},on:{click:function(t){return e.moveDownFieldRow(o)}}},[a("b-icon",{attrs:{icon:"arrow-down-circle","aria-hidden":"true"}})],1),a("b-button",{attrs:{title:"Field Config",variant:"primary-outline",disabled:!t.type},on:{click:function(a){return e.openFieldConfigDialog(t,o)}}},[a("b-icon",{attrs:{icon:t.logic.length?"gear-fill":"gear","aria-hidden":"true"}})],1)],1)],1)],1),t.children&&t.children.length?a("b-row",[a("b-col",[a("JSONFieldMapper",{attrs:{parentObj:e.thisNode,parent:t,meta:e.meta,fields:t.children,targets:e.targets,refBase:e.refBase+"-"+o.toString()}})],1)],1):e._e()]}}],null,!0)}),a("b-modal",{attrs:{id:e.refBase+"-modal","body-class":"jsonfieldmapper_props",size:"lg",centered:"","no-close-on-esc":"","no-close-on-backdrop":""},scopedSlots:e._u([{key:"modal-header",fn:function(t){t.close;return[a("h6",{staticClass:"modal-title",attrs:{slot:"header",id:"modal-title-default"},slot:"header"},[e._v("\n                    Field Configuration: "+e._s(e.cfg_field?e.cfg_field.source?e.cfg_field.source:e.cfg_field.type:"")+"\n                ")])]}},{key:"default",fn:function(l){l.hide;return[e.cfg_field?[a("b-card",{attrs:{title:e.cfg_field.type.charAt(0).toUpperCase()+e.cfg_field.type.slice(1)+" Field Properties"}},[a("b-card-text",["array"==e.cfg_field.type?[a("b-row",[a("b-col",{attrs:{md:"6"}},[a("b-form-group",{attrs:{label:"Variable Members?","label-class":"form-control-label",description:"Specify whether this array contains members with variable layouts (objects only)."}},[a("b-form-checkbox",{attrs:{value:!0,"unchecked-value":!1},model:{value:e.cfg_field.config.variable_members,callback:function(t){e.$set(e.cfg_field.config,"variable_members",t)},expression:"cfg_field.config.variable_members"}},[e._v("\n                                            Variable Members\n                                            ")])],1)],1),a("b-col",{attrs:{md:"6"}},[a("b-form-group",{attrs:{label:"Creation Point","label-class":"form-control-label",description:"Designate this array as the starting point for item creation"}},[a("b-form-checkbox",{attrs:{value:!0,"unchecked-value":!1},model:{value:e.cfg_field.config.creation_point,callback:function(t){e.$set(e.cfg_field.config,"creation_point",t)},expression:"cfg_field.config.creation_point"}},[e._v("\n                                            Creation Point\n                                            ")])],1)],1)],1)]:"object"==e.cfg_field.type?[a("div",[e._v("No addtional properties to configure")])]:"text"==e.cfg_field.type?[a("b-row",[a("b-col",{attrs:{md:"6"}},[a("b-form-group",{attrs:{label:"Offset","label-class":"form-control-label",description:"The number of characters to skip (from the start of the field)"}},[a("b-form-spinbutton",{attrs:{size:"sm",min:"0"},model:{value:e.cfg_field.config.offset,callback:function(t){e.$set(e.cfg_field.config,"offset",t)},expression:"cfg_field.config.offset"}})],1)],1),a("b-col",{attrs:{md:"6"}},[a("b-form-group",{attrs:{label:"Limit","label-class":"form-control-label",description:"The number of characters to read (after the offset). Specify 0 to read all."}},[a("b-form-spinbutton",{attrs:{size:"sm",min:"0"},model:{value:e.cfg_field.config.limit,callback:function(t){e.$set(e.cfg_field.config,"limit",t)},expression:"cfg_field.config.limit"}})],1)],1)],1)]:"number"==e.cfg_field.type?[a("b-row",[a("b-col",{attrs:{md:"6"}},[a("b-form-group",{attrs:{label:"Format","label-class":"form-control-label",description:"Specify the number format"}},[a("b-form-select",{attrs:{size:"sm"},model:{value:e.cfg_field.config.format,callback:function(t){e.$set(e.cfg_field.config,"format",t)},expression:"cfg_field.config.format"}},[a("b-form-select-option",{attrs:{value:null,disabled:""}},[e._v("Field Type")]),a("b-form-select-option",{attrs:{value:"int"}},[e._v("Integer")]),a("b-form-select-option",{attrs:{value:"float",selected:""}},[e._v("Floating Point")])],1)],1)],1)],1)]:"bool"==e.cfg_field.type?[a("b-row",[a("b-col",{attrs:{md:"6"}},[a("b-form-group",{attrs:{label:"Truthy Value","label-class":"form-control-label",description:"The value that represents 'true'"}},[a("b-form-input",{attrs:{placeholder:"Truthy Value"},model:{value:e.cfg_field.config.true,callback:function(t){e.$set(e.cfg_field.config,"true",t)},expression:"cfg_field.config.true"}})],1)],1),a("b-col",{attrs:{md:"6"}},[a("b-form-group",{attrs:{label:"Falsy Value","label-class":"form-control-label",description:"The value that represents 'false'"}},[a("b-form-input",{attrs:{placeholder:"Falsy Value"},model:{value:e.cfg_field.config.false,callback:function(t){e.$set(e.cfg_field.config,"false",t)},expression:"cfg_field.config.false"}})],1)],1)],1)]:[e._v("\n                                No Additional Properties to configure.\n                            ")]],2)],1),a("b-card",{attrs:{title:"Conditional Logic ("+e.cfg_field.logic.length+")"}},[a("b-card-text",[e._l(e.cfg_field.logic,(function(o,l){return[a("validation-observer",{key:e.refBase+"-cl-edt-"+l.toString(),attrs:{slim:""}},[a("b-row",[a("b-col",[a("validation-provider",{attrs:{rules:"required",vid:"scope",name:"scope"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.errors;return[a("b-form-select",{attrs:{size:"sm",vid:"scope",name:"scope"},scopedSlots:e._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:"null",disabled:""}},[e._v("Select Scope")]),a("b-form-select-option",{attrs:{value:"parent",disabled:!e.parent}},[e._v("Parent")]),a("b-form-select-option",{attrs:{value:"siblings",disabled:!e.parent}},[e._v("Sibling")]),a("b-form-select-option",{attrs:{value:"children",disabled:e.cfg_field&&!e.cfg_field.children}},[e._v("Child")])]},proxy:!0}],null,!0),model:{value:o.scope,callback:function(t){e.$set(o,"scope",t)},expression:"lfield.scope"}}),a("span",{staticClass:"validation-failed"},[e._v(e._s(l[0]))])]}}],null,!0)})],1),a("b-col",[a("validation-provider",{attrs:{rules:"required",vid:"field",name:"field"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.errors;return[a("b-form-select",{attrs:{size:"sm",vid:"field",name:"field",options:o.scope?e.cfg_fields[o.scope]:[]},scopedSlots:e._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:"null",disabled:""}},[e._v("Select Field")])]},proxy:!0}],null,!0),model:{value:o.field,callback:function(t){e.$set(o,"field",t)},expression:"lfield.field"}}),a("span",{staticClass:"validation-failed"},[e._v(e._s(l[0]))])]}}],null,!0)})],1),a("b-col",[a("validation-provider",{attrs:{rules:"required",vid:"operator",name:"operator"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.errors;return[a("b-form-select",{attrs:{size:"sm",vid:"operator",name:"operator",options:e.cl_operators},scopedSlots:e._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:"null",disabled:""}},[e._v("Select Operator")])]},proxy:!0}],null,!0),model:{value:o.operator,callback:function(t){e.$set(o,"operator",t)},expression:"lfield.operator"}}),a("span",{staticClass:"validation-failed"},[e._v(e._s(l[0]))])]}}],null,!0)})],1),a("b-col",[a("validation-provider",{attrs:{rules:"required",vid:"value",name:"value"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.errors;return[a("b-form-input",{attrs:{size:"sm",vid:"value",name:"value",placeholder:"Value"},model:{value:o.value,callback:function(t){e.$set(o,"value",t)},expression:"lfield.value"}}),a("span",{staticClass:"validation-failed"},[e._v(e._s(l[0]))])]}}],null,!0)})],1),a("b-col",{staticClass:"text-right"},[a("b-button-group",{attrs:{size:"sm"}},[a("b-button",{attrs:{title:"Delete Row",variant:"primary-outline"},on:{click:function(a){return e.delLogicRow(t,l)}}},[a("b-icon",{attrs:{icon:"dash-circle","aria-hidden":"true"}})],1),a("b-button",{attrs:{title:"Move Up",variant:"primary-outline"},on:{click:function(a){return e.moveUpLogicRow(t,l)}}},[a("b-icon",{attrs:{icon:"arrow-up-circle","aria-hidden":"true"}})],1),a("b-button",{attrs:{title:"Move Down",variant:"primary-outline"},on:{click:function(a){return e.moveDownLogicRow(t,l)}}},[a("b-icon",{attrs:{icon:"arrow-down-circle","aria-hidden":"true"}})],1)],1)],1)],1)],1)]})),e.cfg_field.logic.length?e._e():a("b-row",[a("b-col",[e._v("\n                                    No conditional logic rules defined for this field.\n                                ")])],1),a("b-row",[a("b-col",[a("hr")])],1),a("validation-observer",{attrs:{slim:""},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.validate,r=t.reset;return[a("b-row",[a("b-col",[a("validation-provider",{attrs:{rules:"required",vid:"scope",name:"scope"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[a("b-form-select",{attrs:{size:"sm",vid:"scope",name:"scope"},scopedSlots:e._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:"null",disabled:""}},[e._v("Select Scope")]),a("b-form-select-option",{attrs:{value:"parent",disabled:!e.parent}},[e._v("Parent")]),a("b-form-select-option",{attrs:{value:"siblings",disabled:!e.parent}},[e._v("Sibling")]),a("b-form-select-option",{attrs:{value:"children",disabled:e.cfg_field&&!e.cfg_field.children}},[e._v("Child")])]},proxy:!0}],null,!0),model:{value:e.add_cl.scope,callback:function(t){e.$set(e.add_cl,"scope",t)},expression:"add_cl.scope"}}),a("span",{staticClass:"validation-failed"},[e._v(e._s(o[0]))])]}}],null,!0)})],1),a("b-col",[a("validation-provider",{attrs:{rules:"required",vid:"field",name:"field"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[a("b-form-select",{attrs:{size:"sm",vid:"field",name:"field",options:e.add_cl.scope?e.cfg_fields[e.add_cl.scope]:[]},scopedSlots:e._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:"null",disabled:""}},[e._v("Select Field")])]},proxy:!0}],null,!0),model:{value:e.add_cl.field,callback:function(t){e.$set(e.add_cl,"field",t)},expression:"add_cl.field"}}),a("span",{staticClass:"validation-failed"},[e._v(e._s(o[0]))])]}}],null,!0)})],1),a("b-col",[a("validation-provider",{attrs:{rules:"required",vid:"operator",name:"operator"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[a("b-form-select",{attrs:{size:"sm",vid:"operator",name:"operator",options:e.cl_operators},scopedSlots:e._u([{key:"first",fn:function(){return[a("b-form-select-option",{attrs:{value:"null",disabled:""}},[e._v("Select Operator")])]},proxy:!0}],null,!0),model:{value:e.add_cl.operator,callback:function(t){e.$set(e.add_cl,"operator",t)},expression:"add_cl.operator"}}),a("span",{staticClass:"validation-failed"},[e._v(e._s(o[0]))])]}}],null,!0)})],1),a("b-col",[a("validation-provider",{attrs:{rules:"required",vid:"value",name:"value"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[a("b-form-input",{attrs:{size:"sm",vid:"value",name:"value",placeholder:"Value"},model:{value:e.add_cl.value,callback:function(t){e.$set(e.add_cl,"value",t)},expression:"add_cl.value"}}),a("span",{staticClass:"validation-failed"},[e._v(e._s(o[0]))])]}}],null,!0)})],1),a("b-col",{staticClass:"text-right"},[a("b-button-group",{attrs:{size:"sm"}},[a("b-button",{attrs:{title:"Add Rule",variant:"primary"},on:{click:function(t){return e.addLogicRow(e.cfg_field,o,l,r)}}},[e._v("\n                                                Add Rule\n                                            ")])],1)],1)],1)]}}],null,!0)})],2)],1)]:e._e()]}},{key:"modal-footer",fn:function(t){t.ok,t.cancel,t.hide;return[a("b-button",{staticClass:"ml-auto",attrs:{variant:"outline-primary"},on:{click:e.closeFieldConfigDialog}},[e._v("Close")])]}}],null,!0),model:{value:e.showFieldConfigDialog,callback:function(t){e.showFieldConfigDialog=t},expression:"showFieldConfigDialog"}})]}))],2)},h=[],_={name:"JSONFieldMapper",props:{parentObj:{type:Object,default:null},parent:{type:Object,default:null},meta:{type:Object,default:{}},fields:{type:Array,required:!0},targets:{type:Array,required:!0},refBase:{type:String,default:"jfm"}},created:function(){this.dataFields=this.fields,this.thisNode=this},data:function(){return{dataFields:[],showFieldConfigDialog:!1,cl_operators:[{value:"<",text:"Less Than"},{value:"<=",text:"Less Than/Equal"},{value:"==",text:"Equals"},{value:"!=",text:"Not Equals"},{value:">",text:"Greater Than"},{value:">=",text:"Greater Than/Equal"},{value:"ct",text:"Contains"}],add_cl:{scope:null,field:null,operator:null,value:null},cfg_field:null,cfg_fields:{parents:[],siblings:[],children:[]}}},methods:{addFieldRow:function(e,t){var a=this;t().then((function(t){t&&a.dataFields.splice(e+1,0,{source:null,type:null,target:null,config:null,logic:[],children:[]})}))},delFieldRow:function(e){this.dataFields.splice(e,1)},moveUpFieldRow:function(e){if(e>=1){var t=JSON.parse(JSON.stringify(this.dataFields[e]));this.dataFields.splice(e,1),this.dataFields.splice(e-1,0,t)}},moveDownFieldRow:function(e){if(e<this.dataFields.length-1){var t=JSON.parse(JSON.stringify(this.dataFields[e]));this.dataFields.splice(e,1),this.dataFields.splice(e+1,0,t)}},changeFieldRowType:function(e){if(e.config=this.getConfigByType(e.type),["object","array"].indexOf(e.type)>-1){if(e.children&&e.children.length)while(e.children.length)e.children.pop();e.children.push({source:null,type:null,target:null,config:null,logic:[],children:[]})}else if(e.children&&e.children.length)while(e.children.length)e.children.pop()},getConfigByType:function(e){var t={};switch(e){case"array":t.variable_members=!1,t.accumulator=!1;break;case"object":break;case"number":t.format="float";break;case"text":t.offset="",t.limit="";break;case"bool":t.true="true",t.false="false";break}return t},openFieldConfigDialog:function(e,t){this.cfg_field=e,this.populateLogicDropdowns(e),this.showFieldConfigDialog=!0},closeFieldConfigDialog:function(){this.clearLogicDropdowns(),this.resetAddLogicModel(),this.showFieldConfigDialog=!1,this.cfg_field=null},resetAddLogicModel:function(){this.add_cl.scope=null,this.add_cl.field=null,this.add_cl.operator=null,this.add_cl.value=null},addLogicRow:function(e,t,a,o){var l=this;a().then((function(t){if(t){var a=JSON.parse(JSON.stringify(l.add_cl));e.logic.push(a),l.resetAddLogicModel(),o()}}))},delLogicRow:function(e,t){e.logic.splice(t,1)},moveUpLogicRow:function(e,t){if(t>=1){var a=JSON.parse(JSON.stringify(e.logic[t]));e.logic.splice(t,1),e.logic.splice(t-1,0,a)}},moveDownLogicRow:function(e,t){if(t<e.logic.length-1){var a=JSON.parse(JSON.stringify(e.logic[t]));e.logic.splice(t,1),e.logic.splice(t+1,0,a)}},populateLogicDropdowns:function(e){var t=this;this.parentObj&&this.parentObj.parentObj&&this.parentObj.parentObj.dataFields&&this.parentObj.parentObj.dataFields.map((function(e){null!==e.source&&t.cfg_fields.parents.push({value:e.source,text:e.source})})),this.dataFields&&this.dataFields.map((function(a){null!==a.source&&a.source!=e.source&&t.cfg_fields.siblings.push({value:a.source,text:a.source})})),e&&e.children&&e.children.map((function(e){null!==e.source&&t.cfg_fields.children.push({value:e.source,text:e.source})}))},clearLogicDropdowns:function(){if(this.cfg_fields.parents.length)while(this.cfg_fields.parents.length)this.cfg_fields.parents.pop();if(this.cfg_fields.siblings.length)while(this.cfg_fields.siblings.length)this.cfg_fields.siblings.pop();if(this.cfg_fields.children.length)while(this.cfg_fields.children.length)this.cfg_fields.children.pop()}}},g=_,y=(a("3003"),a("2877")),w=Object(y["a"])(g,v,h,!1,null,null,null),k=w.exports,F={mixins:[b["a"]],components:(o={},Object(i["a"])(o,f.a.name,f.a),Object(i["a"])(o,c.a.name,c.a),Object(i["a"])(o,n.a.name,n.a),Object(i["a"])(o,"JSONFieldMapper",k),o),data:function(){return{loading:!1,tableLoading:!1,bInitialQuery:!0,tableColumns:[{key:"name",label:"Name",sortable:!0,tdClass:"valign"},{key:"format",label:"Format",sortable:!0,tdClass:"valign"},{key:"actions",label:"Actions",thClass:"halign"}],format_types:["JSON","Binary"],node_types:["Nutrients","Soil Moisture","Wells","Water Meter"],spec_modes:["Single","Multiple"],tableData:[],totalRows:1,currentPage:1,perPage:25,filterText:"",filterDataFormats:"",sortBy:"name",sortDir:"asc",showNewDFModal:!1,showEditDFModal:!1,add_model:{id:null,name:null,format:null,spec:{meta:{},data:[]}},edit_model:{id:null,name:null,format:null,spec:{meta:{},data:[]}},targets:[]}},mounted:function(){this.loadDataFormats()},methods:{initSpec:function(e){this.initMeta(e),this.initData(e)},initMeta:function(e){var t={mode:"",supported_types:[]};"JSON"==e.format||e.format,e.spec.meta=t},initData:function(e){"JSON"==e.format?e.spec.data=[{source:null,type:null,target:null,config:null,logic:[],children:[]}]:"Binary"==e.format&&(e.spec.data=[{}])},resetModel:function(e){e.id=null,e.name=null,this.resetMeta(e),this.resetData(e),e.format=null},resetMeta:function(e){if(e.spec.meta.mode="",e.spec.meta.supported_types.length)while(e.spec.meta.supported_types.length)e.spec.meta.supported_types.pop();"JSON"==e.format||e.format},resetData:function(e){if(e.spec.data.length)while(e.spec.data.length)e.spec.data.pop();"JSON"==e.format?e.spec.data.push({source:null,type:null,target:null,config:null,logic:[],children:[]}):"Binary"==e.format&&e.spec.data.push({})},loadDataFormats:function(){var e=this;return this.loading=!0,this.$axios.post(this.$store.state.baseUrl+"/api/dataformats",{cur_page:this.currentPage,per_page:this.perPage,initial:this.bInitialQuery,filter:this.filterText,format:this.filterDataFormats,sort_by:this.sortBy,sort_dir:this.sortDir?"asc":"desc"}).then((function(t){return e.loading=!1,e.bInitialQuery=!1,e.tableData=t.data.formats,e.totalRows=t.data.total,e.targets=t.data.targets,0==e.totalRows&&(e.currentPage=1),t}))},handleEdit:function(e,t){this.edit_model=JSON.parse(JSON.stringify(t)),this.edit_model.spec=JSON.parse(this.edit_model.spec),this.openEditDFModal()},handleDelete:function(e,t){var a=this;m.a.fire({title:"Data Format Deletion",text:"Please confirm data format removal",type:"warning",showCancelButton:!0,confirmButtonText:"Remove",buttonsStyling:!1,customClass:{cancelButton:"btn btn-outline-primary",confirmButton:"btn btn-primary"}}).then((function(e){e.value&&a.deleteDataFormat(t)}))},addDataFormat:function(){var e=this;this.$refs.addform.validate().then((function(t){t&&(e.loading=!0,e.$axios.post(e.$store.state.baseUrl+"/api/dataformats_add",e.add_model).then((function(t){e.loading=!1,"df_created"==t.data.message&&(e.closeAddDFModal(),e.loadDataFormats(),e.$notify({title:"Success",message:"New data format added",type:"success",verticalAlign:"top",horizontalAlign:"right"}))})).catch((function(t){e.loading=!1,console.log(t),t.response.data.errors&&e.$refs.addform.setErrors(t.response.data.errors)})))}))},updateDataFormat:function(){var e=this;this.$refs.editform.validate().then((function(t){t&&(e.loading=!0,e.edit_model.spec.meta.random=Math.random(),e.$axios.post(e.$store.state.baseUrl+"/api/dataformats_update",e.edit_model).then((function(t){e.loading=!1,"df_updated"==t.data.message&&(e.closeEditDFModal(),e.loadDataFormats(),e.$notify({title:"Success",message:"Data Format updated",type:"success",verticalAlign:"top",horizontalAlign:"right"}))})).catch((function(t){e.loading=!1,t.response.data.errors&&e.$refs.editform.setErrors(t.response.data.errors)})))}))},deleteDataFormat:function(e){var t=this;this.loading=!0,this.$axios.post(this.$store.state.baseUrl+"/api/dataformats_destroy",{id:e.id}).then((function(e){t.loading=!1,"df_removed"==e.data.message&&(t.loadDataFormats(),t.$notify({title:"Removed",message:"Data Format was removed",type:"success",verticalAlign:"top",horizontalAlign:"right"}))}))},openAddDFModal:function(){this.showNewDFModal=!0},openEditDFModal:function(){this.showEditDFModal=!0},closeAddDFModal:function(){this.resetModel(this.add_model),this.showNewDFModal=!1},closeEditDFModal:function(){this.resetModel(this.edit_model),this.showEditDFModal=!1},sortingChanged:function(e){this.sortBy=e.sortBy,this.sortDir=e.sortDesc,this.loadDataFormats()}},watch:{filterText:function(e,t){this.currentPage=e!=t?1:this.currentPage}}},x=F,D=Object(y["a"])(x,l,r,!1,null,null,null);t["default"]=D.exports},"8fe0":function(e,t,a){"use strict";a("a481");t["a"]={methods:{calcLastReadingColor:function(e){var t="black";return"undefined"!==typeof e.date_diff&&"N/A"!=e.date_diff&&(e.date_diff.h<3&&(t="green"),e.date_diff.h>=3&&e.date_diff.h<6&&(t="orange"),e.date_diff.h>=6&&(t="red"),(e.date_diff.d>0||e.date_diff.days>0)&&(t="red"),(e.date_diff.y>0||e.date_diff.m>0||e.date_diff.d>0||e.date_diff.days>0)&&(t="red")),t},isAdmin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.$store.getters.isAdmin(e)},isDistributor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.$store.getters.isDistributor(e)},isRestricted:function(){return this.$store.getters.isRestricted()},userCan:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return this.$store.getters.userCan(e,t,a,o)},userLimits:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return this.$store.getters.userLimits(e,t,a)},convertNodeTypeToGraphRouteName:function(e){return"Soil Moisture"==e?"soil_moisture_graph":"Nutrients"==e?"nutrients_graph":"Wells"==e?"well_controls_graph":"Water Meter"==e?"meters_graph":""},convertNodeTypeToSubsystem:function(e){return"Soil Moisture"==e?"Soil Moisture":"Nutrients"==e?"Nutrients":"Wells"==e?"Well Controls":"Water Meter"==e?"Meters":""},convertToInches:function(e){return e=e.replace("mm",""),e=parseInt(parseInt(e)/25)+'"',e},convertToIndex:function(e){return e=e.replace("mm",""),e=parseInt(parseInt(e)/100),e},truncateString:function(e){return e.length<=24?e:e.substring(0,21)+"..."}}}},f6ea:function(e,t,a){}}]);
//# sourceMappingURL=chunk-ad43c9e2.8842ceb0.js.map