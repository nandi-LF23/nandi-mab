(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4ef950a8"],{"0256":function(t,e,a){"use strict";a.r(e);var n,s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("base-header",{staticClass:"pb-6",attrs:{type:"soilmoisture"}},[a("b-row",{staticClass:"py-4",attrs:{"align-v":"center"}},[a("b-col",[a("h6",{staticClass:"h2 text-white d-inline-block mb-0 mr-5"},[t._v("Soil Moisture")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"mab_spinner light right"})])],1)],1),a("b-container",{staticClass:"mt--6",attrs:{fluid:""}},[a("card",{staticClass:"no-border-card",attrs:{"body-classes":"px-0 pb-1","footer-classes":"pb-2"}},[a("b-row",{staticClass:"nomargin"},[a("b-col",{attrs:{md:""}},[a("b-form-select",{on:{change:t.loadHardware},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}},[a("b-form-select-option",{attrs:{value:5}},[t._v("5")]),a("b-form-select-option",{attrs:{value:10}},[t._v("10")]),a("b-form-select-option",{attrs:{value:25,selected:""}},[t._v("25")]),a("b-form-select-option",{attrs:{value:50}},[t._v("50")])],1)],1),a("b-col",{attrs:{md:""}},[t.entities&&t.entities.length&&t.entities.length>1?a("el-select",{staticClass:"fullwidth",attrs:{clearable:"",filterable:"",placeholder:"Filter by Entity.."},on:{change:t.loadHardware},model:{value:t.filterEntity,callback:function(e){t.filterEntity=e},expression:"filterEntity"}},t._l(t.entities,(function(t){return a("el-option",{key:t.id,attrs:{value:t.id,label:t.company_name}})})),1):t._e()],1),a("b-col",{attrs:{md:""}},[a("base-input",{attrs:{"prepend-icon":"fas fa-search"}},[a("b-input",{attrs:{debounce:1e3,placeholder:"Search..."},on:{update:t.loadHardware},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}})],1)],1)],1),a("b-row",{staticClass:"nomargin"},[a("b-col",{attrs:{md:""}},[a("b-table",{attrs:{striped:"",bordered:"",outlined:"",small:"",stacked:"lg",responsive:"","show-empty":"","primary-key":"node_address","no-local-sorting":"",fields:t.tableColumns,items:t.tableData,busy:t.bInitialQuery},on:{"sort-changed":t.sortingChanged,"update:busy":function(e){t.bInitialQuery=e}},scopedSlots:t._u([{key:"cell(field_name)",fn:function(e){return[a("strong",[t.userCan("Graph","Soil Moisture",e.item.id,"O")?a("router-link",{attrs:{to:{name:"soil_moisture_graph",params:{node_address:e.item.node_address}}}},[t._v("\n                  "+t._s(e.value)+"\n                ")]):[t._v("\n                  "+t._s(e.value)+"\n                ")]],2)]}},{key:"cell(date_time)",fn:function(e){return[a("div",{style:"color:"+t.calcLastReadingColor(e.item)},[t._v(t._s(e.value))])]}},{key:"cell()",fn:function(e){return[t._v("\n              "+t._s(e.value)+"\n            ")]}},t.canAction?{key:"cell(actions)",fn:function(e){return[a("div",{staticClass:"d-flex justify-content-center"},[a("b-button",{staticClass:"btn",attrs:{disabled:!t.userCan("Graph","Soil Moisture",e.item.id,"O"),variant:"outline-primary",size:"sm",icon:""},on:{click:function(a){return t.handleGraph(e.index,e.item)}}},[t._v("\n                  Graph\n                  ")]),a("b-button",{staticClass:"btn",attrs:{disabled:!t.userCan("Edit","Soil Moisture",e.item.id,"O"),variant:"outline-primary",size:"sm",icon:""},on:{click:function(a){return t.handleEdit(e.index,e.item)}}},[t._v("\n                  Manage\n                  ")])],1)]}}:null,{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center"},[a("div",{staticClass:"mab_spinner"})])]},proxy:!0},{key:"emptyfiltered",fn:function(){return[a("div",{staticClass:"text-center"},[t._v("\n                No matches found\n              ")])]},proxy:!0},{key:"empty",fn:function(){return[a("div",{staticClass:"text-center"},[t._v("\n                No entries found\n              ")])]},proxy:!0}],null,!0)})],1)],1),a("div",{staticClass:"align-right",attrs:{slot:"footer"},slot:"footer"},[a("b-row",[a("b-col",{attrs:{md:""}},[t._v("\n            Showing "+t._s(Math.min(1+t.perPage*(t.currentPage-1),t.totalRows))+" to "+t._s(Math.min(t.perPage*(t.currentPage-1)+t.perPage,t.totalRows))+" of "+t._s(t.totalRows)+" entries\n          ")]),a("b-col",{attrs:{md:""}},[a("b-pagination",{attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"right"},on:{input:t.loadHardware},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)],1)],1)],1)],1)},r=[],i=a("bd86"),o=(a("6611"),a("450d"),a("e772")),l=a.n(o),d=(a("7f7f"),a("1f1a"),a("4e4b")),c=a.n(d),u=a("8fe0"),f={mixins:[u["a"]],components:(n={},Object(i["a"])(n,c.a.name,c.a),Object(i["a"])(n,l.a.name,l.a),n),data:function(){return{loading:!1,bInitialQuery:!0,tableColumns:[{key:"field_name",label:"Field Name",sortable:!0,tdClass:"valign"},{key:"node_address",label:"Node Address",sortable:!0,tdClass:"valign"},{key:"commissioning_date",label:"Installed",sortable:!0,tdClass:"valign"},{key:"date_time",label:"Last Update",sortable:!0,tdClass:"valign",sortByFormatted:!0,formatter:function(t,e,a){return"N/A"==t?null:t}}],tableData:[],totalRows:1,currentPage:1,perPage:25,filterText:"",filterEntity:null,entities:[],sortBy:this.isAdmin()?"node_address":"date_time",sortDir:"desc",canAction:!1}},methods:{loadHardware:function(){var t=this;this.loading=!0,this.$axios.post("/api/SMTable",{cur_page:this.currentPage,per_page:this.perPage,initial:this.bInitialQuery,filter:this.filterText,entity:this.filterEntity,sort_by:this.sortBy,sort_dir:this.sortDir?"desc":"asc"}).then((function(e){t.loading=!1,t.bInitialQuery=!1,(t.isAdmin()||t.userLimits("View","Soil Moisture","C").length>1)&&t.tableColumns.unshift({key:"company_name",label:"Entity",sortable:!0,tdClass:"valign"}),(t.userCan("Graph","Soil Moisture")||t.userCan("Edit","Soil Moisture"))&&(t.canAction=!0,t.tableColumns.push({key:"actions",label:"Actions",thClass:"halign"})),t.tableData=e.data.rows,t.totalRows=e.data.total,t.entities=e.data.entities,0==t.totalRows&&(t.currentPage=1)}))},handleGraph:function(t,e){this.$router.push({name:"soil_moisture_graph",params:{node_address:e.node_address}})},handleEdit:function(t,e){this.$router.push({name:"soil_moisture_edit",params:{node_address:e.node_address}})},sortingChanged:function(t){this.sortBy=t.sortBy,this.sortDir=t.sortDesc,this.loadHardware()}},watch:{filterText:function(t,e){this.currentPage=t!=e?1:this.currentPage}},mounted:function(){this.loadHardware()}},m=f,p=(a("8ac8"),a("2877")),b=Object(p["a"])(m,s,r,!1,null,null,null);e["default"]=b.exports},"8ac8":function(t,e,a){"use strict";a("8ffb")},"8fe0":function(t,e,a){"use strict";a("a481");e["a"]={methods:{calcLastReadingColor:function(t){var e="black";return"undefined"!==typeof t.date_diff&&"N/A"!=t.date_diff&&(t.date_diff.h<3&&(e="green"),t.date_diff.h>=3&&t.date_diff.h<6&&(e="orange"),t.date_diff.h>=6&&(e="red"),(t.date_diff.d>0||t.date_diff.days>0)&&(e="red"),(t.date_diff.y>0||t.date_diff.m>0||t.date_diff.d>0||t.date_diff.days>0)&&(e="red")),e},isAdmin:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.$store.getters.isAdmin(t)},isDistributor:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.$store.getters.isDistributor(t)},isRestricted:function(){return this.$store.getters.isRestricted()},userCan:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return this.$store.getters.userCan(t,e,a,n)},userLimits:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return this.$store.getters.userLimits(t,e,a)},convertNodeTypeToGraphRouteName:function(t){return"Soil Moisture"==t?"soil_moisture_graph":"Nutrients"==t?"nutrients_graph":"Wells"==t?"well_controls_graph":"Water Meter"==t?"meters_graph":""},convertNodeTypeToSubsystem:function(t){return"Soil Moisture"==t?"Soil Moisture":"Nutrients"==t?"Nutrients":"Wells"==t?"Well Controls":"Water Meter"==t?"Meters":""},convertToInches:function(t){return t=t.replace("mm",""),t=parseInt(parseInt(t)/25)+'"',t},convertToIndex:function(t){return t=t.replace("mm",""),t=parseInt(parseInt(t)/100),t},truncateString:function(t){return t.length<=24?t:t.substring(0,21)+"..."}}}},"8ffb":function(t,e,a){}}]);
//# sourceMappingURL=chunk-4ef950a8.88d3d87a.js.map