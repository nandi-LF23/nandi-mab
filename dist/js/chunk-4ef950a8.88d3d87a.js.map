{"version":3,"sources":["webpack:///./src/views/Pages/SoilMoistureTable.vue?1345","webpack:///src/views/Pages/SoilMoistureTable.vue","webpack:///./src/views/Pages/SoilMoistureTable.vue?0105","webpack:///./src/views/Pages/SoilMoistureTable.vue","webpack:///./src/views/Pages/SoilMoistureTable.vue?3eb1","webpack:///./src/util/mab-utils.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","directives","name","rawName","value","expression","on","loadHardware","model","callback","$$v","perPage","entities","length","filterEntity","_l","e","key","id","company_name","_e","filterText","tableColumns","tableData","bInitialQuery","sortingChanged","$event","scopedSlots","_u","fn","data","userCan","item","params","node_address","_s","style","calcLastReadingColor","handleGraph","index","handleEdit","proxy","slot","Math","min","currentPage","totalRows","staticRenderFns","mixins","components","loading","label","sortable","tdClass","sortByFormatted","formatter","sortBy","sortDir","canAction","methods","$axios","post","cur_page","per_page","initial","filter","entity","sort_by","sort_dir","then","thClass","row","$router","push","sortDesc","watch","mounted","component","obj","color","date_diff","h","d","days","y","m","isAdmin","email","$store","getters","isDistributor","isRestricted","permission","subsystem","object_id","object_type","userLimits","convertNodeTypeToGraphRouteName","type","convertNodeTypeToSubsystem","convertToInches","val","replace","parseInt","convertToIndex","truncateString","str","substring"],"mappings":"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","file":"js/chunk-4ef950a8.88d3d87a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content\"},[_c('base-header',{staticClass:\"pb-6\",attrs:{\"type\":\"soilmoisture\"}},[_c('b-row',{staticClass:\"py-4\",attrs:{\"align-v\":\"center\"}},[_c('b-col',[_c('h6',{staticClass:\"h2 text-white d-inline-block mb-0 mr-5\"},[_vm._v(\"Soil Moisture\")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"mab_spinner light right\"})])],1)],1),_c('b-container',{staticClass:\"mt--6\",attrs:{\"fluid\":\"\"}},[_c('card',{staticClass:\"no-border-card\",attrs:{\"body-classes\":\"px-0 pb-1\",\"footer-classes\":\"pb-2\"}},[_c('b-row',{staticClass:\"nomargin\"},[_c('b-col',{attrs:{\"md\":\"\"}},[_c('b-form-select',{on:{\"change\":_vm.loadHardware},model:{value:(_vm.perPage),callback:function ($$v) {_vm.perPage=$$v},expression:\"perPage\"}},[_c('b-form-select-option',{attrs:{\"value\":5}},[_vm._v(\"5\")]),_c('b-form-select-option',{attrs:{\"value\":10}},[_vm._v(\"10\")]),_c('b-form-select-option',{attrs:{\"value\":25,\"selected\":\"\"}},[_vm._v(\"25\")]),_c('b-form-select-option',{attrs:{\"value\":50}},[_vm._v(\"50\")])],1)],1),_c('b-col',{attrs:{\"md\":\"\"}},[(_vm.entities && _vm.entities.length && _vm.entities.length > 1)?_c('el-select',{staticClass:\"fullwidth\",attrs:{\"clearable\":\"\",\"filterable\":\"\",\"placeholder\":\"Filter by Entity..\"},on:{\"change\":_vm.loadHardware},model:{value:(_vm.filterEntity),callback:function ($$v) {_vm.filterEntity=$$v},expression:\"filterEntity\"}},_vm._l((_vm.entities),function(e){return _c('el-option',{key:e.id,attrs:{\"value\":e.id,\"label\":e.company_name}})}),1):_vm._e()],1),_c('b-col',{attrs:{\"md\":\"\"}},[_c('base-input',{attrs:{\"prepend-icon\":\"fas fa-search\"}},[_c('b-input',{attrs:{\"debounce\":1000,\"placeholder\":\"Search...\"},on:{\"update\":_vm.loadHardware},model:{value:(_vm.filterText),callback:function ($$v) {_vm.filterText=$$v},expression:\"filterText\"}})],1)],1)],1),_c('b-row',{staticClass:\"nomargin\"},[_c('b-col',{attrs:{\"md\":\"\"}},[_c('b-table',{attrs:{\"striped\":\"\",\"bordered\":\"\",\"outlined\":\"\",\"small\":\"\",\"stacked\":\"lg\",\"responsive\":\"\",\"show-empty\":\"\",\"primary-key\":\"node_address\",\"no-local-sorting\":\"\",\"fields\":_vm.tableColumns,\"items\":_vm.tableData,\"busy\":_vm.bInitialQuery},on:{\"sort-changed\":_vm.sortingChanged,\"update:busy\":function($event){_vm.bInitialQuery=$event}},scopedSlots:_vm._u([{key:\"cell(field_name)\",fn:function(data){return [_c('strong',[(_vm.userCan('Graph', 'Soil Moisture', data.item.id, 'O'))?_c('router-link',{attrs:{\"to\":{ \n                    name: 'soil_moisture_graph',\n                    params: { node_address: data.item.node_address }\n                  }}},[_vm._v(\"\\n                  \"+_vm._s(data.value)+\"\\n                \")]):[_vm._v(\"\\n                  \"+_vm._s(data.value)+\"\\n                \")]],2)]}},{key:\"cell(date_time)\",fn:function(data){return [_c('div',{style:('color:' + _vm.calcLastReadingColor(data.item))},[_vm._v(_vm._s(data.value))])]}},{key:\"cell()\",fn:function(data){return [_vm._v(\"\\n              \"+_vm._s(data.value)+\"\\n            \")]}},(_vm.canAction)?{key:\"cell(actions)\",fn:function(data){return [_c('div',{staticClass:\"d-flex justify-content-center\"},[_c('b-button',{staticClass:\"btn\",attrs:{\"disabled\":!_vm.userCan('Graph', 'Soil Moisture', data.item.id, 'O'),\"variant\":\"outline-primary\",\"size\":\"sm\",\"icon\":\"\"},on:{\"click\":function($event){return _vm.handleGraph(data.index, data.item)}}},[_vm._v(\"\\n                  Graph\\n                  \")]),_c('b-button',{staticClass:\"btn\",attrs:{\"disabled\":!_vm.userCan('Edit', 'Soil Moisture', data.item.id, 'O'),\"variant\":\"outline-primary\",\"size\":\"sm\",\"icon\":\"\"},on:{\"click\":function($event){return _vm.handleEdit(data.index, data.item)}}},[_vm._v(\"\\n                  Manage\\n                  \")])],1)]}}:null,{key:\"table-busy\",fn:function(){return [_c('div',{staticClass:\"text-center\"},[_c('div',{staticClass:\"mab_spinner\"})])]},proxy:true},{key:\"emptyfiltered\",fn:function(){return [_c('div',{staticClass:\"text-center\"},[_vm._v(\"\\n                No matches found\\n              \")])]},proxy:true},{key:\"empty\",fn:function(){return [_c('div',{staticClass:\"text-center\"},[_vm._v(\"\\n                No entries found\\n              \")])]},proxy:true}],null,true)})],1)],1),_c('div',{staticClass:\"align-right\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('b-row',[_c('b-col',{attrs:{\"md\":\"\"}},[_vm._v(\"\\n            Showing \"+_vm._s(Math.min(1 + (_vm.perPage * (_vm.currentPage-1)), _vm.totalRows))+\" to \"+_vm._s(Math.min((_vm.perPage*(_vm.currentPage-1)) + _vm.perPage, _vm.totalRows))+\" of \"+_vm._s(_vm.totalRows)+\" entries\\n          \")]),_c('b-col',{attrs:{\"md\":\"\"}},[_c('b-pagination',{attrs:{\"total-rows\":_vm.totalRows,\"per-page\":_vm.perPage,\"align\":\"right\"},on:{\"input\":_vm.loadHardware},model:{value:(_vm.currentPage),callback:function ($$v) {_vm.currentPage=$$v},expression:\"currentPage\"}})],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"content\">\r\n    <base-header class=\"pb-6\" type=\"soilmoisture\">\r\n      <b-row align-v=\"center\" class=\"py-4\">\r\n        <b-col>\r\n          <h6 class=\"h2 text-white d-inline-block mb-0 mr-5\">Soil Moisture</h6>\r\n          <div v-show='loading' class='mab_spinner light right'></div>\r\n        </b-col>\r\n      </b-row>\r\n    </base-header>\r\n    <b-container fluid class=\"mt--6\">\r\n\r\n      <card class=\"no-border-card\" body-classes=\"px-0 pb-1\" footer-classes=\"pb-2\">\r\n\r\n        <b-row class='nomargin'>\r\n          <b-col md>\r\n            <b-form-select v-model=\"perPage\" @change=\"loadHardware\">\r\n              <b-form-select-option :value=\"5\">5</b-form-select-option>\r\n              <b-form-select-option :value=\"10\">10</b-form-select-option>\r\n              <b-form-select-option :value=\"25\" selected>25</b-form-select-option>\r\n              <b-form-select-option :value=\"50\">50</b-form-select-option>\r\n            </b-form-select>\r\n          </b-col>\r\n          <b-col md>\r\n            <el-select v-if=\"entities && entities.length && entities.length > 1\"\r\n              class=\"fullwidth\"\r\n              clearable\r\n              filterable\r\n              placeholder=\"Filter by Entity..\"\r\n              v-model=\"filterEntity\"\r\n              @change=\"loadHardware\">\r\n              <el-option v-for=\"e in entities\" :value=\"e.id\" :label=\"e.company_name\" :key=\"e.id\"></el-option>\r\n            </el-select>\r\n          </b-col>\r\n          <b-col md>\r\n            <base-input prepend-icon=\"fas fa-search\">\r\n              <b-input v-model=\"filterText\"\r\n                :debounce=\"1000\"\r\n                @update=\"loadHardware\"\r\n                placeholder=\"Search...\">\r\n              </b-input>\r\n            </base-input>\r\n          </b-col>\r\n        </b-row>\r\n\r\n        <b-row class='nomargin'>\r\n          <b-col md>\r\n            <b-table\r\n              striped\r\n              bordered\r\n              outlined\r\n              small\r\n              stacked=\"lg\"\r\n              responsive\r\n              show-empty\r\n              primary-key=\"node_address\"\r\n              no-local-sorting\r\n              @sort-changed=\"sortingChanged\"\r\n              :fields=\"tableColumns\"\r\n              :items=\"tableData\"\r\n              :busy.sync=\"bInitialQuery\">\r\n\r\n              <template #cell(field_name)=\"data\">\r\n                <strong>\r\n                  <router-link v-if=\"userCan('Graph', 'Soil Moisture', data.item.id, 'O')\"\r\n                    :to=\"{ \r\n                      name: 'soil_moisture_graph',\r\n                      params: { node_address: data.item.node_address }\r\n                    }\">\r\n                    {{ data.value }}\r\n                  </router-link>\r\n                  <template v-else>\r\n                    {{ data.value }}\r\n                  </template>\r\n                </strong>\r\n              </template>\r\n\r\n              <template #cell(date_time)=\"data\">\r\n                <div :style=\"'color:' + calcLastReadingColor(data.item)\">{{ data.value }}</div>\r\n              </template>\r\n\r\n              <template #cell()=\"data\">\r\n                {{ data.value }}\r\n              </template>\r\n\r\n              <template #cell(actions)=\"data\" v-if=\"canAction\">\r\n                  \r\n                <div class=\"d-flex justify-content-center\">\r\n                    <b-button\r\n                    :disabled=\"!userCan('Graph', 'Soil Moisture', data.item.id, 'O')\"\r\n                    @click=\"handleGraph(data.index, data.item)\"\r\n                    class=\"btn\"\r\n                    variant=\"outline-primary\"\r\n                    size=\"sm\"\r\n                    icon>\r\n                    Graph\r\n                    </b-button>\r\n                    <b-button\r\n                    :disabled=\"!userCan('Edit', 'Soil Moisture', data.item.id, 'O')\"\r\n                    @click=\"handleEdit(data.index, data.item)\"\r\n                    class=\"btn\"\r\n                    variant=\"outline-primary\"\r\n                    size=\"sm\"\r\n                    icon>\r\n                    Manage\r\n                    </b-button>\r\n                </div>\r\n\r\n              </template>\r\n\r\n              <template #table-busy>\r\n                <div class=\"text-center\">\r\n                  <div class='mab_spinner'></div>\r\n                </div>\r\n              </template>\r\n\r\n              <template #emptyfiltered>\r\n                <div class=\"text-center\">\r\n                  No matches found\r\n                </div>\r\n              </template>\r\n\r\n              <template #empty>\r\n                <div class=\"text-center\">\r\n                  No entries found\r\n                </div>\r\n              </template>\r\n\r\n            </b-table>\r\n          </b-col>\r\n        </b-row>\r\n\r\n        <div slot=\"footer\" class='align-right'>\r\n          <b-row>\r\n            <b-col md>\r\n              Showing {{ Math.min(1 + (perPage * (currentPage-1)), totalRows) }} to {{ Math.min((perPage*(currentPage-1)) + perPage, totalRows)  }} of {{ totalRows }} entries\r\n            </b-col>\r\n            <b-col md>\r\n              <b-pagination @input=\"loadHardware\" v-model=\"currentPage\" :total-rows=\"totalRows\" :per-page=\"perPage\" align=\"right\"></b-pagination>\r\n            </b-col>\r\n          </b-row>\r\n        </div>\r\n \r\n      </card>\r\n\r\n    </b-container>\r\n  </div>\r\n</template>\r\n<script>\r\n\r\nimport { parse } from 'date-fns';\r\nimport mab_utils from '../../util/mab-utils';\r\nimport { Select, Option } from 'element-ui';\r\n\r\nexport default {\r\n\r\n  mixins: [ mab_utils ],\r\n  \r\n  components: {\r\n    [Select.name]: Select,\r\n    [Option.name]: Option\r\n  },\r\n\r\n  data() {\r\n    return {\r\n\r\n      loading: false,\r\n      bInitialQuery: true,\r\n\r\n      tableColumns: [\r\n        {\r\n          key: 'field_name',\r\n          label: 'Field Name',\r\n          sortable: true,\r\n          tdClass: 'valign'\r\n        },\r\n        {\r\n          key: 'node_address',\r\n          label: 'Node Address',\r\n          sortable: true,\r\n          tdClass: 'valign'\r\n        },\r\n        {\r\n          key: 'commissioning_date',\r\n          label: 'Installed',\r\n          sortable: true,\r\n          tdClass: 'valign'\r\n        },\r\n        {\r\n          key: 'date_time',\r\n          label: 'Last Update',\r\n          sortable: true,\r\n          tdClass: 'valign',\r\n          sortByFormatted: true,\r\n          formatter: (v, k, i) => {\r\n            if(v == 'N/A'){ return null; }\r\n            return v;\r\n          }\r\n        }\r\n      ],\r\n      tableData: [],\r\n      totalRows: 1,\r\n      currentPage: 1,\r\n      perPage: 25,\r\n      filterText: '',\r\n      filterEntity: null,\r\n      entities: [],\r\n      sortBy: this.isAdmin() ? 'node_address' : 'date_time',\r\n      sortDir: 'desc',\r\n\r\n      canAction: false\r\n    };\r\n  },\r\n  methods: {\r\n    loadHardware()\r\n    {\r\n      this.loading = true;\r\n\r\n      this.$axios.post(\"/api/SMTable\", {\r\n        cur_page: this.currentPage,\r\n        per_page: this.perPage,\r\n        initial:  this.bInitialQuery,\r\n        filter:   this.filterText,\r\n        entity:   this.filterEntity,\r\n        sort_by:  this.sortBy,\r\n        sort_dir: this.sortDir ? 'desc' : 'asc'\r\n      }).then(resp => {\r\n\r\n        this.loading = false;\r\n        this.bInitialQuery = false;\r\n\r\n        if(this.isAdmin() || this.userLimits('View', 'Soil Moisture', 'C').length > 1){\r\n          this.tableColumns.unshift({\r\n            key: 'company_name',\r\n            label: 'Entity',\r\n            sortable: true,\r\n            tdClass: 'valign'\r\n          });\r\n        }\r\n\r\n        if(this.userCan('Graph', 'Soil Moisture') || this.userCan('Edit', 'Soil Moisture')){\r\n          this.canAction = true;\r\n          this.tableColumns.push({\r\n            key: 'actions',\r\n            label: 'Actions',\r\n            thClass: 'halign'\r\n          });\r\n        }\r\n\r\n        this.tableData = resp.data.rows;\r\n        this.totalRows = resp.data.total;\r\n        this.entities = resp.data.entities;\r\n\r\n        if(this.totalRows == 0){ this.currentPage = 1; }\r\n\r\n      });\r\n    },\r\n    \r\n    handleGraph(index, row) {\r\n      // using named routes in order to pass multiple args\r\n      this.$router.push({ \r\n        name: \"soil_moisture_graph\",\r\n        params:{ node_address: row.node_address }\r\n      });\r\n    },\r\n\r\n    handleEdit(index, row) {\r\n      this.$router.push({\r\n        name: \"soil_moisture_edit\",\r\n        params: { node_address: row.node_address }\r\n      });\r\n    },\r\n\r\n    sortingChanged(e)\r\n    {\r\n      this.sortBy  = e.sortBy;\r\n      this.sortDir = e.sortDesc;\r\n      this.loadHardware();\r\n    }\r\n\r\n  },\r\n\r\n  // filter change reset page\r\n  watch: { filterText: function(n,o) { this.currentPage = n != o ? 1 : this.currentPage } },\r\n\r\n  mounted()\r\n  {\r\n      this.loadHardware();\r\n  }\r\n};\r\n</script>\r\n<style>\r\n  .no-border-card .card-footer{\r\n    border-top: 0;\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SoilMoistureTable.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SoilMoistureTable.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SoilMoistureTable.vue?vue&type=template&id=69bc8536&\"\nimport script from \"./SoilMoistureTable.vue?vue&type=script&lang=js&\"\nexport * from \"./SoilMoistureTable.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SoilMoistureTable.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SoilMoistureTable.vue?vue&type=style&index=0&lang=css&\"","export default {\n  methods: {\n    \n    // Calculate Node's Last Reading Date Color\n    calcLastReadingColor(obj)\n    {\n      let color = 'black';\n      if(typeof obj.date_diff !== \"undefined\" && obj.date_diff != 'N/A'){\n        if(obj.date_diff.h < 3){ color = 'green'; }\n        if(obj.date_diff.h >= 3 && obj.date_diff.h < 6){ color = 'orange'; }\n        if(obj.date_diff.h >= 6){ color = 'red'; }\n        if(obj.date_diff.d > 0 || obj.date_diff.days > 0){ color = 'red'; }\n        if(obj.date_diff.y > 0 || obj.date_diff.m > 0 || obj.date_diff.d > 0 || obj.date_diff.days > 0){ color = 'red'; }\n      }\n      return color;\n    },\n\n    isAdmin(email = '')\n    {\n      return this.$store.getters.isAdmin(email);\n    },\n\n    isDistributor(email = '')\n    {\n      return this.$store.getters.isDistributor(email);\n    },\n\n    isRestricted()\n    {\n      return this.$store.getters.isRestricted();\n    },\n\n    userCan(permission, subsystem, object_id = null, object_type = '')\n    {\n      return this.$store.getters.userCan(permission, subsystem, object_id, object_type);\n    },\n\n    userLimits(permission, subsystem, object_type = ''){\n      return this.$store.getters.userLimits(permission, subsystem, object_type);\n    },\n\n    convertNodeTypeToGraphRouteName(type){\n      if(type == 'Soil Moisture'){\n        return 'soil_moisture_graph';\n      } else if(type == 'Nutrients'){\n        return 'nutrients_graph';\n      } else if(type == 'Wells'){\n        return 'well_controls_graph';\n      } else if(type == 'Water Meter'){\n        return 'meters_graph';\n      } else {\n        return '';\n      }\n    },\n\n    convertNodeTypeToSubsystem(type){\n      if(type == 'Soil Moisture'){\n        return 'Soil Moisture';\n      } else if(type == 'Nutrients'){\n        return 'Nutrients';\n      } else if(type == 'Wells'){\n        return 'Well Controls';\n      } else if(type == 'Water Meter'){\n        return 'Meters';\n      } else {\n        return '';\n      }\n    },\n\n    /* To be used exclusively with Sensor Dropdowns / Checkbox Lists */\n    convertToInches(val){\n      val = val.replace('mm','');\n      val = parseInt(parseInt(val) / 25) + '\"';\n      return val;\n    },\n\n    /* \" */\n    convertToIndex(val){\n      val = val.replace('mm','');\n      val = parseInt(parseInt(val) / 100);\n      return val;\n    },\n\n    truncateString(str){\n      return str.length <= 24 ? str: (str.substring(0, 21) + '...');\n    }\n\n  }\n}\n"],"sourceRoot":""}