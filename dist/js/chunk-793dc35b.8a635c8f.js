(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-793dc35b"],{"2a02":function(e,t,a){},6338:function(e,t,a){"use strict";a.r(t);var s,n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("base-header",{staticClass:"pb-6",attrs:{type:"wells"}},[a("b-row",{staticClass:"py-4",attrs:{"align-v":"center"}},[a("b-col",[a("h6",{directives:[{name:"show",rawName:"v-show",value:e.model.field_name,expression:"model.field_name"}],staticClass:"h2 text-white d-inline-block mb-0 mr-5"},[e._v("Well Controls - "+e._s(e.model.field_name))]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"mab_spinner light right"})])],1)],1),a("div",{staticClass:"container-fluid mt--6"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("card",{attrs:{"body-classes":"px-0 py-0"}},[a("template",{slot:"header"},[a("b-row",[a("b-col",[a("div",{staticClass:"d-flex d-row"},[a("base-button",{staticClass:"btn mr-2",attrs:{disabled:e.loading||!e.userCan("Graph","Well Controls",e.node_id,"O"),type:"primary",size:"sm",icon:""},nativeOn:{click:function(t){return e.goToGraph()}}},[e._v("\n                    Graph\n                  ")]),a("b-form-checkbox",{attrs:{disabled:!e.userCan("Toggle","Well Controls"),name:"check-button",switch:"",size:"lg"},on:{change:function(t){return e.togglePump()}},model:{value:e.pump_status,callback:function(t){e.pump_status=t},expression:"pump_status"}},[e._v("\n                    "+e._s(e.pump_status?"Pump: On":"Pump: Off")+"\n                  ")])],1)])],1)],1),a("div",{staticClass:"card-body"},[a("b-row",[a("b-col",{attrs:{sm:"6",md:"4"}},[a("b-toast",{attrs:{visible:!0,title:"Node Address",static:"","no-auto-hide":"","no-close-button":""}},[e._v("\n                  "+e._s(e.node_address)+"\n                ")]),a("b-toast",{attrs:{visible:!0,title:"Installed",static:"","no-auto-hide":"","no-close-button":""}},[e._v("\n                  "+e._s(e.model.commissioning_date)+"\n                ")]),a("b-toast",{attrs:{visible:!0,title:"Last Reading",static:"","no-auto-hide":"","no-close-button":""}},[e._v("\n                  "+e._s(e.date_time)+"\n                ")]),a("b-toast",{attrs:{visible:!0,title:"Power State",static:"","no-auto-hide":"","no-close-button":""}},[e._v("\n                  "+e._s(e.power_state)+"\n                ")])],1),a("b-col",{attrs:{sm:"6",md:"4"}},[a("b-toast",{attrs:{visible:!0,title:"Pulse 1 Reading (RAW)",static:"","no-auto-hide":"","no-close-button":""}},[e._v("\n                  "+e._s(e.pulse_reading_1)+"\n                ")]),a("b-toast",{attrs:{visible:!0,title:"Pulse 1 Reading (UOM)",static:"","no-auto-hide":"","no-close-button":""}},[e._v("\n                  "+e._s(e.pulse_reading_1_uom)+"\n                ")]),a("b-toast",{attrs:{visible:!0,title:"Pulse 1 State",static:"","no-auto-hide":"","no-close-button":""}},[e._v("\n                  "+e._s(e.pulse_state_1)+"\n                ")]),a("b-toast",{attrs:{visible:!0,title:"Pulse 1 mA",static:"","no-auto-hide":"","no-close-button":""}},[e._v("\n                  "+e._s(e.pulse_ma_1)+"\n                ")])],1),a("b-col",{attrs:{sm:"6",md:"4"}},[a("b-toast",{attrs:{visible:!0,title:"Pulse 2 Reading (RAW)",static:"","no-auto-hide":"","no-close-button":""}},[e._v("\n                  "+e._s(e.pulse_reading_2)+"\n                ")]),a("b-toast",{attrs:{visible:!0,title:"Pulse 2 Reading (UOM)",static:"","no-auto-hide":"","no-close-button":""}},[e._v("\n                  "+e._s(e.pulse_reading_2_uom)+"\n                ")]),a("b-toast",{attrs:{visible:!0,title:"Pulse 2 State",static:"","no-auto-hide":"","no-close-button":""}},[e._v("\n                  "+e._s(e.pulse_state_2)+"\n                ")]),a("b-toast",{attrs:{visible:!0,title:"Pulse 2 mA",static:"","no-auto-hide":"","no-close-button":""}},[e._v("\n                  "+e._s(e.pulse_ma_2)+"\n                ")])],1),a("b-col",{attrs:{sm:"6",md:"4"}})],1)],1)],2)],1)]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("card",{attrs:{"body-classes":"px-0 py-0"}},[a("template",{slot:"header"},[a("h3",{staticClass:"mb-0"},[e._v("Hardware Config - Advanced Wells")])]),a("div",{staticClass:"card-body"},[a("validation-observer",{ref:"form",attrs:{slim:""}},[a("b-row",[a("b-col",[a("base-input",{attrs:{name:"field name",rules:"required",label:"Field Name",placeholder:"Field Name",vid:"field_name"},on:{change:e.syncFields},model:{value:e.model.field_name,callback:function(t){e.$set(e.model,"field_name",t)},expression:"model.field_name"}})],1),a("b-col",[a("base-input",{attrs:{name:"device serial number",rules:"required",label:"Device Serial Number",placeholder:"Device Serial Number",vid:"device_serial_number"},on:{change:e.syncFields},model:{value:e.model.device_serial_number,callback:function(t){e.$set(e.model,"device_serial_number",t)},expression:"model.device_serial_number"}})],1)],1)],1)],1)],2),a("card",{attrs:{"body-classes":"px-0 py-0"}},[a("template",{slot:"header"},[a("h3",{staticClass:"mb-0"},[e._v("Graph Configuration")])]),a("div",{staticClass:"card-body"},[a("validation-observer",{ref:"nform",attrs:{slim:""}},[a("b-row",{attrs:{"align-v":"center"}},[a("b-col",{attrs:{md:""}},[a("base-input",{attrs:{label:"Graph Type",name:"graph type",rules:"required",vid:"graph_type"}},[a("el-select",{attrs:{filterable:"",placeholder:"Graph Type"},on:{change:e.syncFields},model:{value:e.model.graph_type,callback:function(t){e.$set(e.model,"graph_type",t)},expression:"model.graph_type"}},[a("el-option",{attrs:{label:"Pulse",value:"pulse"}}),a("el-option",{attrs:{label:"Technical",value:"tech"}})],1)],1)],1),a("b-col",{attrs:{md:""}},[a("base-input",{attrs:{label:"Graph Start Date",name:"start date",vid:"graph_start_date"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.focus,n=t.blur;return a("flat-picker",{staticClass:"form-control datepicker",attrs:{placeholder:"Graph Start Date",config:e.flatPickrConfig},on:{"on-open":s,"on-close":n,"on-change":e.syncFields},model:{value:e.model.graph_start_date,callback:function(t){e.$set(e.model,"graph_start_date",t)},expression:"model.graph_start_date"}})}}])})],1)],1)],1)],1)],2)],1)])])],1)},o=[],i=a("bd86"),l=(a("6611"),a("450d"),a("e772")),r=a.n(l),d=(a("7f7f"),a("1f1a"),a("4e4b")),_=a.n(d),u=a("c38f"),c=a.n(u),m=(a("0952"),a("01e3")),p=a("59e4"),h=a("8fe0"),g={mixins:[h["a"]],components:(s={},Object(i["a"])(s,_.a.name,_.a),Object(i["a"])(s,r.a.name,r.a),Object(i["a"])(s,"flatPicker",c.a),Object(i["a"])(s,"BSpinner",m["a"]),Object(i["a"])(s,"BToast",p["a"]),s),data:function(){return{initial:!0,loading:!1,date_now:null,model:{field_name:"",device_serial_number:"",graph_type:"",graph_start_date:""},node_id:null,node_address:null,power_state:"",pump_status:!1,pulse_state_1:"Unknown",pulse_state_2:"Unknown",pulse_ma_1:0,pulse_ma_2:0,date_time:"",pulse_reading_1:0,pulse_reading_1_uom:0,pulse_reading_2:0,pulse_reading_2_uom:0}},computed:{flatPickrConfig:function(){return{maxDate:this.date_now}}},methods:{loadWellsData:function(){var e=this;this.loading=!0,this.$axios.get("/api/ManageWM/"+this.$route.params.node_address).then((function(t){e.loading=!1;var a=t.data;a&&(e.node_id=a.hw.id,e.node_address=a.hw.node_address,e.date_time=a.hw.date_time,e.model.field_name=a.field.field_name,e.model.device_serial_number=a.hw.device_serial_number,e.model.graph_type=a.field.graph_type,e.model.graph_start_date=a.field.graph_start_date,a.ndm&&(e.pulse_reading_1=a.ndm.pulse_1,e.pulse_reading_1_uom=a.ndm.pulse_1*a.hwm.pulse_weight+" "+e.formatUOM(a.hwm.measurement_type),e.pulse_reading_2=a.ndm.pulse_2,e.pulse_reading_2_uom=a.ndm.pulse_2*a.hwm.pulse_weight+" "+e.formatUOM(a.hwm.measurement_type),e.pulse_state_1=a.ndm.state_of_measure_1?"Open":"Closed",e.pulse_state_2=a.ndm.state_of_measure_2?"Open":"Closed",e.pulse_ma_1=a.ndm.pulse_1_mA,e.pulse_ma_2=a.ndm.pulse_2_mA,e.power_state=e.formatPowerState(a.ndm.power_state)),e.initial&&(e.model.graph_type=a.field.graph_type,e.model.graph_start_date=a.field.graph_start_date),e.date_now=a.date_now,setTimeout((function(){e.initial=!1}),1e3))}))},syncFields:function(){var e=this;this.initial||this.$refs.form.validate().then((function(t){t&&e.node_address?(e.loading=!0,e.$axios.post("/api/update_wm/"+e.node_address,e.model).then((function(t){e.loading=!1,"node_updated"==t.data.message?e.$notify({title:"Saved",message:"Changes were saved",type:"success",verticalAlign:"top",horizontalAlign:"right"}):"nonexistent"==t.data.message&&e.$notify({title:"Error",message:"Node not found (might have been removed)",type:"danger",verticalAlign:"top",horizontalAlign:"right"})})).catch((function(t){e.loading=!1,t.response.data.errors&&e.$refs.form.setErrors(t.response.data.errors)}))):e.$notify({title:"Required",message:"Please fill in all fields",type:"danger",verticalAlign:"top",horizontalAlign:"right",duration:1e3,clean:!0})}))},togglePump:function(){var e=this;this.loading=!0,this.node_address&&this.$axios.get("/api/hardwareconfigtoggle/"+this.node_address).then((function(t){e.loading=!1,console.log(t),e.$notify({title:"Status",message:"Pump Toggled",type:"info",verticalAlign:"top",horizontalAlign:"right"})}))},formatUOM:function(e){return"Cubes"==e?"cm3":"Gallons"==e?"gal":""},formatPowerState:function(e){var t=["No Power, Not Charging","No Power, Charging","Power, Not Charging","Power, Charging"];return e>=0&&e<t.length?t[e]:"Invalid"},goToGraph:function(){this.$router.push({name:"well_controls_graph",params:{node_address:this.$route.params.node_address}})}},mounted:function(){this.loadWellsData()}},b=g,f=(a("77da"),a("2877")),v=Object(f["a"])(b,n,o,!1,null,"72d180ac",null);t["default"]=v.exports},"77da":function(e,t,a){"use strict";a("2a02")}}]);
//# sourceMappingURL=chunk-793dc35b.8a635c8f.js.map