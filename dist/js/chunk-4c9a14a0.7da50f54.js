(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c9a14a0"],{"1a59":function(t,e,a){"use strict";a.r(e);var s,i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[a("base-header",{staticClass:"pb-6",attrs:{type:"meters"}},[a("b-row",{staticClass:"py-4",attrs:{"align-v":"center"}},[a("b-col",[a("h6",{staticClass:"h2 text-white d-inline-block mb-0 mr-5"},[t._v("Meters - "+t._s(t.field_name)+" - Graph")]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.loading,expression:"loading"}],staticClass:"mab_spinner light right"})])],1)],1),a("div",{staticClass:"container-fluid mt--6"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("card",{attrs:{"body-classes":"px-0 py-0"}},[a("template",{slot:"header"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("base-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",modifiers:{hover:!0,top:!0}}],staticClass:"btn",attrs:{disabled:!t.userCan("Edit","Meters",t.node_id,"O"),size:"sm",type:"primary",title:"Navigate to the meter's management screen",icon:""},nativeOn:{click:function(e){return t.goToManage()}}},[t._v("\n                  Manage\n                ")])],1)])]),a("div",{staticClass:"card-body"},[a("b-row",[a("b-col",[a("base-input",{attrs:{label:"Graph Type"}},[a("el-select",{attrs:{disabled:t.loading},model:{value:t.graph_type,callback:function(e){t.graph_type=e},expression:"graph_type"}},[a("el-option",{attrs:{label:"Pulse",value:"pulse",selected:""}}),a("el-option",{attrs:{label:"Technical",value:"tech"}})],1)],1)],1),a("b-col",[a("base-input",{attrs:{label:"Range"}},[a("el-select",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",modifiers:{hover:!0,top:!0}}],attrs:{title:"Choose the time range of data to view."},model:{value:t.sub_days,callback:function(e){t.sub_days=e},expression:"sub_days"}},[a("el-option",{attrs:{label:"Last 24 Hours",value:"1"}}),a("el-option",{attrs:{label:"Last Week",value:"7"}}),a("el-option",{attrs:{label:"Last Two Weeks",value:"14"}}),a("el-option",{attrs:{label:"Last Month",value:"31"}}),a("el-option",{attrs:{label:"Last Year",value:"365"}}),a("el-option",{attrs:{label:"Custom",value:"custom"}})],1)],1)],1),a("b-col",[a("base-input",{directives:[{name:"show",rawName:"v-show",value:"custom"==t.sub_days,expression:"sub_days=='custom'"}],attrs:{label:"Start Date"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.focus,i=e.blur;return a("flat-picker",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",modifiers:{hover:!0,top:!0}}],staticClass:"form-control datepicker",attrs:{config:{maxDate:t.date_now},placeholder:"Custom Date",title:"A custom start date allows a custom range of data to be viewed."},on:{"on-open":s,"on-close":i},model:{value:t.graph_start_date,callback:function(e){t.graph_start_date=e},expression:"graph_start_date"}})}}])})],1)],1),a("highcharts",{ref:"hchart",staticClass:"hc",attrs:{options:t.chartOptions,"update-args":t.chartUpdateArgs}})],1)],2)],1)])])],1)},r=[],n=(a("f576"),a("ac6a"),a("a481"),a("bd86")),o=(a("6611"),a("450d"),a("e772")),l=a.n(o),d=(a("7f7f"),a("1f1a"),a("4e4b")),h=a.n(d),c=a("c38f"),u=a.n(c),p=(a("0952"),a("ea7f")),g=a.n(p),m=a("8fe0"),_=a("3d20"),f=a.n(_),b={mixins:[m["a"]],components:(s={},Object(n["a"])(s,h.a.name,h.a),Object(n["a"])(s,l.a.name,l.a),Object(n["a"])(s,"flatPicker",u.a),s),data:function(){var t=this;return{loading:!1,in_progress:!0,node_id:null,field_name:null,graph_start_date:"",graph_type:"",sub_days:"",bInitialQuery:!0,bNotified:!1,related_nodes:[],date_now:"",series:[],chartUpdateArgs:[!0,!0,{duration:1e3}],seriesAdjusted:!1,zoomOrDrag:!1,lastDate:null,exportFileName:"",initial_start_date:null,initial_end_date:null,selection_start:null,selection_end:null,yMin:0,yMax:0,xMin:0,xMax:0,full:0,refill:0,plotOptions:{series:{states:{inactive:{opacity:1}}}},chartTitle:{text:"Loading..",widthAdjust:-300},plotLines:[],resetButton:{text:"Reset",enabled:!0,onclick:function(e){t.resetSeriesData()}}}},computed:{chartOptions:function(){return{credits:{enabled:!1},chart:{type:"line",zoomType:0==this.zoomOrDrag&&"x",panning:!0,panKey:"shift",height:600,resetZoomButton:{position:{x:0,y:-50}}},exporting:{buttons:{contextButton:{enabled:!1},exportButton:{text:"Export",menuItems:["downloadPNG","downloadJPEG","downloadPDF","downloadSVG"]},printButton:{text:"Print",onclick:function(){this.print()}},resetButton:this.resetButton},filename:this.exportFileName},series:this.series,xAxis:{min:this.xMin,max:this.xMax,type:"datetime",tickInterval:1,dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e %b",week:"%e %b",month:"%b %Y",year:"%Y"},labels:{rotation:-45},crosshair:!0,events:{setExtremes:function(t){var e=this;setTimeout((function(){"undefined"==typeof t.min&&"undefined"==typeof t.max?e.chart.yAxis[0].setExtremes(e.chart.yAxis[0].min,e.chart.yAxis[0].max):e.chart.yAxis[0].setExtremes()}),1)},afterSetExtremes:this.afterSetExtremes}},yAxis:{title:{text:""},plotLines:this.plotLines},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom"},tooltip:{shared:!0},plotOptions:this.plotOptions,title:this.chartTitle}}},watch:{title:function(t){this.chartOptions.title=t},plotOptions:{handler:function(t){t.length&&(this.chartOptions.plotOptions=t)},deep:!0},series:{handler:function(t){t.length&&(this.chartOptions.series=t)},deep:!0},graph_start_date:function(t){this.changeDateRange()},graph_type:function(t){this.maybeReloadGraphData()},sub_days:function(t){("custom"!=t||this.graph_start_date)&&("custom"!=t&&(this.graph_start_date=""),this.initial_start_date=null,this.initial_end_date=null,this.maybeReloadGraphData())}},methods:{loadGraphData:function(){var t=this;return this.loading=!0,this.in_progress=!0,this.$refs.hchart.chart.showLoading(this.bInitialQuery?"Loading...":"Refreshing..."),this.$axios.post(this.$store.state.baseUrl+"/api/GraphWMV1",{node_address:this.$route.params.node_address,graph_type:this.graph_type,graph_start_date:this.graph_start_date,sub_days:this.sub_days,is_initial:this.bInitialQuery,selection_start:this.selection_start,selection_end:this.selection_end}).then((function(e){if(t.loading=!1,t.in_progress=!0,t.$refs.hchart.chart.hideLoading(),e.data){if(e.data.message&&"no_data"==e.data.message)return f.a.fire({title:"No data found",text:"This node currently has no data to plot.",showCancelButton:!1,confirmButtonText:"OK",buttonsStyling:!1,customClass:{cancelButton:"btn btn-outline-primary",confirmButton:"btn btn-primary"}}),void(t.chartTitle.text="No data found");!t.bNotified&&e.data.not_current&&e.data.last_date&&(f.a.fire({title:"No recent data found",text:"Last readings up to "+e.data.last_date+" could be displayed.",showCancelButton:!1,confirmButtonText:"OK",buttonsStyling:!1,customClass:{cancelButton:"btn btn-outline-primary",confirmButton:"btn btn-primary"}}),t.bNotified=!0),t.selection_start=null,t.selection_end=null,t.field_name=e.data.field_name,t.node_id=e.data.node_id,t.bInitialQuery&&(t.graph_start_date=e.data.graph_start_date,t.graph_type=e.data.graph_type,t.sub_days=e.data.sub_days),t.bInitialQuery=!1,t.xMin=e.data.x_min,t.xMax=e.data.x_max,t.yMin=e.data.y_min,t.yMax=e.data.y_max,t.lastDate=e.data.last_date.replace(":","-"),t.exportFileName=e.data.graph.field_name+"-"+t.graph_type+"-"+t.$route.params.node_address+"-"+t.lastDate,t.plotOptions=e.data.graph.plotOptions,t.chartTitle=e.data.graph.title,t.series=e.data.graph.series.filter((function(t){return!!t.data&&t.data.length>0}))}return setTimeout((function(){t.in_progress=!1}),1),e}))},maybeReloadGraphData:function(){1!=this.in_progress&&this.loadGraphData()},changeDateRange:function(){1!=this.in_progress&&""!=this.graph_start_date&&this.loadGraphData()},enableSeriesDragDrop:function(){var t=this;this.series&&this.series.length&&(this.chartOptions.tooltip={shared:!0},this.resetButton.enabled=!0,this.series.forEach((function(e,a){t.series[a].custom={moved:!1},t.series[a].dragDrop={draggableX:!1,draggableY:!0,dragMinY:0,dragMaxY:100,groupBy:"grp"},t.series[a].point={events:{dragStart:function(){this.series.options.custom.moved=!0}}},t.series[a].tooltip={pointFormatter:function(){return'<span style="color:'+this.series.color+';">‚óè</span> '+this.series.name+": <b>"+(this.series.options.custom.moved?"":g.a.numberFormat(this.y,2))+"</b><br/>"}}})),this.chartTriggerChange())},disableSeriesDragDrop:function(){var t=this;this.series&&this.series.length&&(this.series.forEach((function(e,a){t.series[a].dragDrop={draggableX:!1,draggableY:!1}})),this.chartOptions.tooltip={shared:!1},this.resetButton.enabled=!1,this.chartTriggerChange())},toggleSeriesDragDrop:function(){this.zoomOrDrag?this.enableSeriesDragDrop():this.disableSeriesDragDrop()},showPlotLines:function(){},hidePlotLines:function(){this.plotLines=[]},chartTriggerChange:function(){this.series.push({type:"line",name:"Faux",data:[]}),this.series.pop()},exportGraphCSV:function(){var t=this;this.zoomOrDrag=!1;var e=this.$refs.hchart.chart.series;try{for(var a=0;a<e.length;a++)if("undefined"!==typeof e[a].options.custom.moved&&1==e[a].options.custom.moved){this.seriesAdjusted=!0;break}}catch(s){}this.seriesAdjusted?this.resetSeriesData().then((function(e){t.$refs.hchart.chart.downloadCSV()})):this.$refs.hchart.chart.downloadCSV()},resetSeriesData:function(){return this.seriesAdjusted=!1,this.loadGraphData()},goToManage:function(){this.$router.push({name:"meters_edit",params:{node_address:this.$route.params.node_address}})},afterSetExtremes:function(t){null==t.trigger&&this.bInitialQuery?(this.initial_start_date=this.xMin,this.initial_end_date=this.xMax,this.bInitialQuery=!1):(t.target.chart.resetZoomButton?(this.selection_start=t.min,this.selection_end=t.max):(this.selection_start=this.initial_start_date,this.selection_end=this.initial_end_date),this.maybeReloadGraphData())}},created:function(){var t=new Date,e=String(t.getDate()).padStart(2,"0"),a=String(t.getMonth()+1).padStart(2,"0"),s=t.getFullYear();this.date_now=t=s+"-"+a+"-"+e,this.$route.params.graph_start_date?(this.sub_days="custom",this.graph_start_date=this.$route.params.graph_start_date):this.sub_days="7"},mounted:function(){this.loadGraphData()}},y=b,v=a("2877"),x=Object(v["a"])(y,i,r,!1,null,null,null);e["default"]=x.exports},"2e08":function(t,e,a){var s=a("9def"),i=a("9744"),r=a("be13");t.exports=function(t,e,a,n){var o=String(r(t)),l=o.length,d=void 0===a?" ":String(a),h=s(e);if(h<=l||""==d)return o;var c=h-l,u=i.call(d,Math.ceil(c/d.length));return u.length>c&&(u=u.slice(0,c)),n?u+o:o+u}},9744:function(t,e,a){"use strict";var s=a("4588"),i=a("be13");t.exports=function(t){var e=String(i(this)),a="",r=s(t);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(a+=e);return a}},f576:function(t,e,a){"use strict";var s=a("5ca1"),i=a("2e08"),r=a("a25f"),n=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(r);s(s.P+s.F*n,"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})}}]);
//# sourceMappingURL=chunk-4c9a14a0.7da50f54.js.map