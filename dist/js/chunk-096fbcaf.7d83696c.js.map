{"version":3,"sources":["webpack:///./src/util/mab-utils.js","webpack:///./src/views/Pages/UserManagementForm.vue?0a45","webpack:///src/views/Pages/UserManagementForm.vue","webpack:///./src/views/Pages/UserManagementForm.vue?6f81","webpack:///./src/views/Pages/UserManagementForm.vue"],"names":["methods","calcLastReadingColor","obj","color","date_diff","h","d","days","y","m","isAdmin","email","this","$store","getters","isDistributor","isRestricted","userCan","permission","subsystem","object_id","object_type","userLimits","convertNodeTypeToGraphRouteName","type","convertNodeTypeToSubsystem","convertToInches","val","replace","parseInt","convertToIndex","truncateString","str","length","substring","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","directives","name","rawName","value","model","expression","_v","_s","state","user_obj","scopedSlots","_u","key","fn","ref","close","slot","hide","callback","$$v","pw1","pw2","ok","cancel","on","closePWChangeModal","updatePW","showPWModal","$event","preventDefault","apply","arguments","modifiers","Object","values","companies","companyChanged","$set","_l","company","id","company_name","_e","company_id","keys","roles","role","role_name","closeUserEntityChangeModal","changeUserEntity","showUserEntityChangeModal","nativeOn","showPWChangeModal","is_admin","confirmPromotion","confirmUserLock","is_active","proxy","syncFields","timeZones","item","_key","_lab","user_company_name","openUserEntityChangeModal","is_distributor","dist_list","toString","staticRenderFns","mixins","components","Modal","data","loading","bInitialQuery","mobile","address","unit_of_measure","timezone","role_id","password","parent_id","managed_company_ids","prev_company_id","prev_role_id","loadUser","$axios","get","baseUrl","then","title","message","verticalAlign","horizontalAlign","loadCompanies","post","context","verb","module","loadDistributors","loadRoles","$refs","pwform","validate","success","catch","duration","clean","promoteUser","form","resp","err","entity_change_form","swal","text","showCancelButton","confirmButtonText","buttonsStyling","customClass","cancelButton","confirmButton","result","toggleUserLock","loadTimezones","restrictedNotice","loadAll","console","mabRedirect","mounted","watch","component"],"mappings":"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","file":"js/chunk-096fbcaf.7d83696c.js","sourcesContent":["export default {\n  methods: {\n    \n    // Calculate Node's Last Reading Date Color\n    calcLastReadingColor(obj)\n    {\n      let color = 'black';\n      if(typeof obj.date_diff !== \"undefined\" && obj.date_diff != 'N/A'){\n        if(obj.date_diff.h < 3){ color = 'green'; }\n        if(obj.date_diff.h >= 3 && obj.date_diff.h < 6){ color = 'orange'; }\n        if(obj.date_diff.h >= 6){ color = 'red'; }\n        if(obj.date_diff.d > 0 || obj.date_diff.days > 0){ color = 'red'; }\n        if(obj.date_diff.y > 0 || obj.date_diff.m > 0 || obj.date_diff.d > 0 || obj.date_diff.days > 0){ color = 'red'; }\n      }\n      return color;\n    },\n\n    isAdmin(email = '')\n    {\n      return this.$store.getters.isAdmin(email);\n    },\n\n    isDistributor(email = '')\n    {\n      return this.$store.getters.isDistributor(email);\n    },\n\n    isRestricted()\n    {\n      return this.$store.getters.isRestricted();\n    },\n\n    userCan(permission, subsystem, object_id = null, object_type = '')\n    {\n      return this.$store.getters.userCan(permission, subsystem, object_id, object_type);\n    },\n\n    userLimits(permission, subsystem, object_type = ''){\n      return this.$store.getters.userLimits(permission, subsystem, object_type);\n    },\n\n    convertNodeTypeToGraphRouteName(type){\n      if(type == 'Soil Moisture'){\n        return 'soil_moisture_graph';\n      } else if(type == 'Nutrients'){\n        return 'nutrients_graph';\n      } else if(type == 'Wells'){\n        return 'well_controls_graph';\n      } else if(type == 'Water Meter'){\n        return 'meters_graph';\n      } else {\n        return '';\n      }\n    },\n\n    convertNodeTypeToSubsystem(type){\n      if(type == 'Soil Moisture'){\n        return 'Soil Moisture';\n      } else if(type == 'Nutrients'){\n        return 'Nutrients';\n      } else if(type == 'Wells'){\n        return 'Well Controls';\n      } else if(type == 'Water Meter'){\n        return 'Meters';\n      } else {\n        return '';\n      }\n    },\n\n    /* To be used exclusively with Sensor Dropdowns / Checkbox Lists */\n    convertToInches(val){\n      val = val.replace('mm','');\n      val = parseInt(parseInt(val) / 25) + '\"';\n      return val;\n    },\n\n    /* \" */\n    convertToIndex(val){\n      val = val.replace('mm','');\n      val = parseInt(parseInt(val) / 100);\n      return val;\n    },\n\n    truncateString(str){\n      return str.length <= 24 ? str: (str.substring(0, 21) + '...');\n    }\n\n  }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content\"},[_c('base-header',{staticClass:\"pb-6\",attrs:{\"type\":\"users\"}},[_c('b-row',{staticClass:\"py-4\",attrs:{\"align-v\":\"center\"}},[_c('b-col',[_c('h6',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.model.name),expression:\"model.name\"}],staticClass:\"h2 text-white d-inline-block mb-0 mr-5\"},[_vm._v(\"\\n          \"+_vm._s((_vm.$store.state.user_obj.email == _vm.model.email ? 'Profile' : 'User') + ' - ' + _vm.model.name)+\"\\n        \")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"mab_spinner light right\"})])],1)],1),_c('div',{staticClass:\"container-fluid mt--6\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-12\"},[_c('b-modal',{attrs:{\"centered\":\"\",\"no-close-on-esc\":\"\",\"no-close-on-backdrop\":\"\"},scopedSlots:_vm._u([{key:\"modal-header\",fn:function(ref){\nvar close = ref.close;\nreturn [_c('h6',{staticClass:\"modal-title\",attrs:{\"slot\":\"header\",\"id\":\"modal-title-default\"},slot:\"header\"},[_vm._v(\"Change Password\")])]}},{key:\"default\",fn:function(ref){\nvar hide = ref.hide;\nreturn [_c('validation-observer',{ref:\"pwform\",attrs:{\"slim\":\"\"}},[_c('base-input',{staticClass:\"mb-3\",attrs:{\"name\":\"password\",\"rules\":\"required|min:8|confirmed:confirmation\",\"alternative\":\"\",\"type\":\"password\",\"placeholder\":\"Password\",\"vid\":\"password\",\"addon-left-icon\":\"ni ni-lock-circle-open\"},model:{value:(_vm.pw1),callback:function ($$v) {_vm.pw1=$$v},expression:\"pw1\"}}),_c('base-input',{attrs:{\"name\":\"confirmation\",\"rules\":\"required|min:8\",\"alternative\":\"\",\"type\":\"password\",\"placeholder\":\"Confirm Password\",\"vid\":\"confirmation\",\"addon-left-icon\":\"ni ni-lock-circle-open\"},model:{value:(_vm.pw2),callback:function ($$v) {_vm.pw2=$$v},expression:\"pw2\"}})],1)]}},{key:\"modal-footer\",fn:function(ref){\nvar ok = ref.ok;\nvar cancel = ref.cancel;\nvar hide = ref.hide;\nreturn [_c('base-button',{staticClass:\"ml-auto\",attrs:{\"type\":\"link\"},on:{\"click\":_vm.closePWChangeModal}},[_vm._v(\"Close\")]),_c('base-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.updatePW}},[_vm._v(\"Update\")])]}}]),model:{value:(_vm.showPWModal),callback:function ($$v) {_vm.showPWModal=$$v},expression:\"showPWModal\"}}),_c('b-modal',{attrs:{\"centered\":\"\",\"no-close-on-esc\":\"\",\"no-close-on-backdrop\":\"\"},scopedSlots:_vm._u([{key:\"modal-header\",fn:function(ref){\nvar close = ref.close;\nreturn [_c('h6',{staticClass:\"modal-title\",attrs:{\"slot\":\"header\",\"id\":\"modal-title-default\"},slot:\"header\"},[_vm._v(\"Change User Entity\")])]}},{key:\"default\",fn:function(ref){\nvar hide = ref.hide;\nreturn [_c('validation-observer',{ref:\"entity_change_form\",attrs:{\"slim\":\"\"}},[_c('form',{attrs:{\"role\":\"form\"},on:{\"submit\":function($event){$event.preventDefault();return (function (){ return false; }).apply(null, arguments)}}},[_c('b-row',[_c('b-col',[_c('b-toast',{attrs:{\"visible\":true,\"variant\":\"warning\",\"title\":\"Important\",\"static\":\"\",\"no-auto-hide\":\"\"}},[_vm._v(\"\\n                      Changing a user's entity will cause:\\n                      \"),_c('ul',[_c('li',[_vm._v(\"Removal of the user from any security groups\")]),_c('li',[_vm._v(\"Removal of the user from any integrations\")])])])],1)],1),_c('b-row',[_c('b-col',[_c('div',[_c('base-input',{attrs:{\"label\":\"Entity\",\"name\":\"company\",\"rules\":\"required\",\"vid\":\"company\",\"placeholder\":\"Entity\",\"autocomplete\":\"off\"}},[_c('el-select',{directives:[{name:\"b-tooltip\",rawName:\"v-b-tooltip.hover.top\",modifiers:{\"hover\":true,\"top\":true}}],attrs:{\"disabled\":Object.values(_vm.companies).length < 2,\"filterable\":\"\",\"placeholder\":\"Entity\",\"title\":\"Change the user's owning entity. Note: After changing the entity, you have to also choose a new role before the changes would take effect.\",\"autocomplete\":\"off\"},on:{\"change\":_vm.companyChanged},model:{value:(_vm.model.company_id),callback:function ($$v) {_vm.$set(_vm.model, \"company_id\", $$v)},expression:\"model.company_id\"}},[(Object.values(_vm.companies).length)?[_vm._l((_vm.companies),function(company){return [_c('el-option',{key:company.id,attrs:{\"label\":company.company_name,\"value\":company.id}},[_c('span',[_vm._v(_vm._s(company.company_name))])])]})]:_vm._e()],2)],1)],1)])],1),_c('b-row',[_c('b-col',[_c('div',[_c('base-input',{attrs:{\"name\":\"role\",\"rules\":\"required\",\"label\":\"Role\",\"vid\":\"role\"}},[_c('el-select',{attrs:{\"disabled\":!_vm.model.company_id || Object.keys(_vm.roles).length < 2,\"filterable\":\"\",\"placeholder\":\"Role\"},model:{value:(_vm.model.role_id),callback:function ($$v) {_vm.$set(_vm.model, \"role_id\", $$v)},expression:\"model.role_id\"}},_vm._l((_vm.roles),function(role){return _c('el-option',{key:role.id,attrs:{\"label\":role.role_name,\"value\":role.id}})}),1)],1)],1)])],1)],1)])]}},{key:\"modal-footer\",fn:function(ref){\nvar ok = ref.ok;\nvar cancel = ref.cancel;\nvar hide = ref.hide;\nreturn [_c('b-button',{staticClass:\"ml-auto\",attrs:{\"variant\":\"outline-primary\"},on:{\"click\":_vm.closeUserEntityChangeModal}},[_vm._v(\"Cancel\")]),_c('b-button',{attrs:{\"variant\":\"primary\"},on:{\"click\":_vm.changeUserEntity}},[_vm._v(\"Change User Entity\")])]}}]),model:{value:(_vm.showUserEntityChangeModal),callback:function ($$v) {_vm.showUserEntityChangeModal=$$v},expression:\"showUserEntityChangeModal\"}}),_c('b-card',{scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('base-button',{staticClass:\"btn\",attrs:{\"disabled\":!_vm.userCan('Reset Password', 'Users') && _vm.model.email != _vm.$store.state.user_obj.email,\"size\":\"sm\",\"type\":\"primary\",\"icon\":\"\"},nativeOn:{\"click\":function($event){return _vm.showPWChangeModal()}}},[_vm._v(\"\\n              Change Password\\n            \")]),(_vm.isAdmin())?_c('base-button',{staticClass:\"btn\",attrs:{\"disabled\":_vm.model.is_admin,\"size\":\"sm\",\"type\":\"primary\",\"icon\":\"\"},nativeOn:{\"click\":function($event){return _vm.confirmPromotion()}}},[_vm._v(\"\\n              Promote\\n            \")]):_vm._e(),_c('base-button',{staticClass:\"btn\",attrs:{\"disabled\":!_vm.userCan('Lock', 'Users') || _vm.model.email == _vm.$store.state.user_obj.email || _vm.model.is_admin,\"size\":\"sm\",\"type\":\"primary\",\"icon\":\"\"},nativeOn:{\"click\":function($event){return _vm.confirmUserLock()}}},[_vm._v(\"\\n              \"+_vm._s(_vm.model.is_active ? 'Lock' : 'Unlock')+\"\\n            \")])]},proxy:true}])},[_c('validation-observer',{ref:\"form\",attrs:{\"slim\":\"\"}},[_c('b-row',[_c('b-col',{attrs:{\"md\":\"\"}},[_c('base-input',{attrs:{\"name\":\"name\",\"rules\":\"required\",\"label\":\"Full Name\",\"placeholder\":\"Full Name\",\"vid\":\"name\"},on:{\"change\":_vm.syncFields},model:{value:(_vm.model.name),callback:function ($$v) {_vm.$set(_vm.model, \"name\", $$v)},expression:\"model.name\"}})],1),_c('b-col',{attrs:{\"md\":\"\"}},[_c('base-input',{attrs:{\"name\":\"email\",\"rules\":\"required|email\",\"label\":\"Email Address\",\"placeholder\":\"Email Address\",\"vid\":\"email\"},on:{\"change\":_vm.syncFields},model:{value:(_vm.model.email),callback:function ($$v) {_vm.$set(_vm.model, \"email\", $$v)},expression:\"model.email\"}})],1)],1),_c('b-row',[_c('b-col',{attrs:{\"md\":\"\"}},[_c('base-input',{attrs:{\"label\":\"Mobile\",\"placeholder\":\"Mobile\",\"vid\":\"mobile\"},on:{\"change\":_vm.syncFields},model:{value:(_vm.model.mobile),callback:function ($$v) {_vm.$set(_vm.model, \"mobile\", $$v)},expression:\"model.mobile\"}})],1),_c('b-col',{attrs:{\"md\":\"\"}},[_c('base-input',{attrs:{\"label\":\"Physical Address\",\"placeholder\":\"Physical Address\",\"vid\":\"address\"},on:{\"change\":_vm.syncFields},model:{value:(_vm.model.address),callback:function ($$v) {_vm.$set(_vm.model, \"address\", $$v)},expression:\"model.address\"}})],1)],1),_c('b-row',[_c('b-col',{attrs:{\"md\":\"\"}},[_c('base-input',{attrs:{\"name\":\"u.o.m\",\"rules\":\"required\",\"label\":\"Unit of Measure\",\"vid\":\"unit_of_measure\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"placeholder\":\"Unit of Measure\"},on:{\"change\":_vm.syncFields},model:{value:(_vm.model.unit_of_measure),callback:function ($$v) {_vm.$set(_vm.model, \"unit_of_measure\", $$v)},expression:\"model.unit_of_measure\"}},[_c('el-option',{attrs:{\"label\":\"Imperial\",\"value\":2}}),_c('el-option',{attrs:{\"label\":\"Metric\",\"value\":1}})],1)],1)],1),_c('b-col',{attrs:{\"md\":\"\"}},[_c('base-input',{attrs:{\"label\":\"Time Zone\",\"name\":\"timezone\",\"rules\":\"required\",\"vid\":\"timezone\"}},[(_vm.timeZones.length)?_c('el-select',{attrs:{\"filterable\":\"\",\"placeholder\":\"Time Zone\"},on:{\"change\":_vm.syncFields},model:{value:(_vm.model.timezone),callback:function ($$v) {_vm.$set(_vm.model, \"timezone\", $$v)},expression:\"model.timezone\"}},_vm._l((_vm.timeZones),function(item){return _c('el-option',{key:item._key,attrs:{\"label\":item._lab,\"value\":item._key}})}),1):_vm._e()],1)],1)],1),_c('b-row',[_c('b-col',{attrs:{\"md\":\"\"}},[_c('base-input',{attrs:{\"name\":\"role\",\"rules\":\"required\",\"label\":\"Role\",\"vid\":\"role\"}},[_c('el-select',{attrs:{\"disabled\":!_vm.model.company_id || Object.keys(_vm.roles).length < 2,\"filterable\":\"\",\"placeholder\":\"Role\"},on:{\"change\":_vm.syncFields},model:{value:(_vm.model.role_id),callback:function ($$v) {_vm.$set(_vm.model, \"role_id\", $$v)},expression:\"model.role_id\"}},_vm._l((_vm.roles),function(role){return _c('el-option',{key:role.id,attrs:{\"label\":role.role_name,\"value\":role.id}})}),1)],1)],1),_c('b-col',{attrs:{\"md\":\"\"}},[_c('base-input',{attrs:{\"label\":\"Entity\"}},[_c('b-input-group',[_c('b-form-input',{attrs:{\"type\":\"text\",\"placeholder\":\"Entity\",\"readonly\":\"\"},model:{value:(_vm.user_company_name),callback:function ($$v) {_vm.user_company_name=$$v},expression:\"user_company_name\"}}),_c('b-input-group-append',[_c('b-button',{attrs:{\"disabled\":!_vm.isAdmin(),\"variant\":\"outline-primary\"},on:{\"click\":_vm.openUserEntityChangeModal}},[_vm._v(\"Change Entity\")])],1)],1)],1)],1)],1),(_vm.model.company_id && (_vm.isAdmin() || _vm.isDistributor()))?_c('b-row',[_c('b-col',{attrs:{\"md\":\"\"}},[_c('base-input',{attrs:{\"name\":\"is_distributor\",\"vid\":\"is_distributor\"}},[_c('b-form-checkbox',{attrs:{\"size\":\"lg\",\"disabled\":!_vm.isAdmin() && (_vm.$store.state.user_obj.company_id == _vm.model.company_id || _vm.$store.state.user_obj.id == _vm.model.id),\"unchecked-value\":\"0\",\"value\":\"1\"},on:{\"change\":_vm.syncFields},model:{value:(_vm.model.is_distributor),callback:function ($$v) {_vm.$set(_vm.model, \"is_distributor\", $$v)},expression:\"model.is_distributor\"}},[_vm._v(\"\\n                    Distributor\\n                  \")])],1)],1)],1):_vm._e()],1)],1),(_vm.model.company_id && (_vm.isAdmin() || _vm.isDistributor()) && _vm.model.is_distributor == '1')?_c('b-card',{scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('h3',{staticClass:\"mb-0\"},[_vm._v(\"Distributor Details\")])]},proxy:true}],null,false,2875147959)},[_c('b-row',[_c('b-col',{attrs:{\"md\":\"\"}},[(_vm.dist_list && Object.keys(_vm.dist_list).length)?[_c('base-input',{attrs:{\"label\":\"Managed Entities\",\"name\":\"managed_companies\",\"vid\":\"managed_companies\"}},[_c('el-select',{attrs:{\"disabled\":!_vm.isAdmin() && (_vm.$store.state.user_obj.company_id == _vm.model.company_id || _vm.$store.state.user_obj.id == _vm.model.id),\"value-key\":\"id\",\"multiple\":\"\",\"filterable\":\"\",\"placeholder\":\"Choose\"},on:{\"change\":_vm.syncFields},model:{value:(_vm.model.managed_company_ids),callback:function ($$v) {_vm.$set(_vm.model, \"managed_company_ids\", $$v)},expression:\"model.managed_company_ids\"}},[(_vm.dist_list && Object.keys(_vm.dist_list).length)?_vm._l((_vm.dist_list),function(company){return _c('el-option',{key:company.id,attrs:{\"label\":company.company_name,\"value\":company.id}})}):_vm._e()],2)],1)]:[(Object.keys(_vm.companies).length)?_c('b-alert',{attrs:{\"variant\":\"primary\",\"show\":\"\"}},[_c('strong',[_vm._v(_vm._s(_vm.companies['\"'+_vm.model.company_id.toString()+'\"'].company_name))]),_vm._v(\" currently has no manageable subsidiary entities available to pre-assign to this distributor user.\")]):_vm._e()]],2)],1)],1):_vm._e()],1)])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"content\">\r\n    <base-header class=\"pb-6\" type=\"users\">\r\n      <b-row align-v=\"center\" class=\"py-4\">\r\n        <b-col>\r\n          <h6 class=\"h2 text-white d-inline-block mb-0 mr-5\" v-show=\"model.name\">\r\n            {{ ($store.state.user_obj.email == model.email ? 'Profile' : 'User') + ' - ' + model.name }}\r\n          </h6>\r\n          <div v-show='loading' class='mab_spinner light right'></div>\r\n        </b-col>\r\n      </b-row>\r\n    </base-header>\r\n\r\n    <div class='container-fluid mt--6'>\r\n      <div class='row'>\r\n        <div class='col-md-12'>\r\n\r\n          <!-- Reset Password Modal -->\r\n          <b-modal v-model=\"showPWModal\" centered no-close-on-esc no-close-on-backdrop>\r\n            <template #modal-header=\"{ close }\">\r\n              <h6 slot=\"header\" class=\"modal-title\" id=\"modal-title-default\">Change Password</h6>\r\n            </template>\r\n            \r\n            <template #default=\"{ hide }\">\r\n              <validation-observer ref=\"pwform\" slim>\r\n                <base-input\r\n                  name=\"password\"\r\n                  rules=\"required|min:8|confirmed:confirmation\"\r\n                  alternative\r\n                  class=\"mb-3\"\r\n                  type=\"password\"\r\n                  placeholder=\"Password\"\r\n                  vid=\"password\"\r\n                  addon-left-icon=\"ni ni-lock-circle-open\" v-model=\"pw1\">\r\n                </base-input>\r\n                <base-input\r\n                  name=\"confirmation\"\r\n                  rules=\"required|min:8\"\r\n                  alternative\r\n                  type=\"password\"\r\n                  placeholder=\"Confirm Password\"\r\n                  vid=\"confirmation\"\r\n                  addon-left-icon=\"ni ni-lock-circle-open\" v-model=\"pw2\">\r\n                </base-input>\r\n              </validation-observer>\r\n            </template>\r\n\r\n            <template #modal-footer=\"{ ok, cancel, hide }\">\r\n                <base-button type=\"link\" class=\"ml-auto\" @click=\"closePWChangeModal\">Close</base-button>\r\n                <base-button type=\"primary\" @click='updatePW'>Update</base-button>\r\n            </template>\r\n          </b-modal>\r\n\r\n          <!-- Change User Entity -->\r\n          <b-modal v-model=\"showUserEntityChangeModal\" centered no-close-on-esc no-close-on-backdrop>\r\n            <template #modal-header=\"{ close }\">\r\n              <h6 slot=\"header\" class=\"modal-title\" id=\"modal-title-default\">Change User Entity</h6>\r\n            </template>\r\n\r\n            <template #default=\"{ hide }\">\r\n              <validation-observer ref='entity_change_form' slim>\r\n                <form role=\"form\" @submit.prevent=\"()=>false\">\r\n                  <b-row>\r\n                    <b-col>\r\n                      <b-toast :visible=\"true\" variant=\"warning\" title=\"Important\" static no-auto-hide>\r\n                        Changing a user's entity will cause:\r\n                        <ul>\r\n                          <li>Removal of the user from any security groups</li>\r\n                          <li>Removal of the user from any integrations</li>\r\n                        </ul>\r\n                      </b-toast>\r\n                    </b-col>\r\n                  </b-row>\r\n                  <b-row>\r\n                    <b-col>\r\n                      <div>\r\n                        <base-input\r\n                          label=\"Entity\"\r\n                          name=\"company\"\r\n                          rules=\"required\"\r\n                          vid=\"company\"\r\n                          placeholder=\"Entity\"\r\n                          autocomplete=\"off\">\r\n                          <el-select\r\n                            :disabled=\"Object.values(companies).length < 2\"\r\n                            @change=\"companyChanged\"\r\n                            v-model=\"model.company_id\"\r\n                            filterable\r\n                            placeholder=\"Entity\"\r\n                            v-b-tooltip.hover.top title=\"Change the user's owning entity. Note: After changing the entity, you have to also choose a new role before the changes would take effect.\"\r\n                            autocomplete=\"off\">\r\n                            <template v-if=\"Object.values(companies).length\">\r\n                              <template v-for=\"company in companies\">\r\n                                <el-option \r\n                                  :key=\"company.id\"\r\n                                  :label=\"company.company_name\"\r\n                                  :value=\"company.id\">\r\n                                  <span>{{ company.company_name }}</span>\r\n                                </el-option>\r\n                              </template>\r\n                            </template>\r\n                          </el-select>\r\n                        </base-input>\r\n                      </div>\r\n                    </b-col>\r\n                  </b-row>\r\n                  <b-row>\r\n                    <b-col>\r\n                      <div>\r\n                        <base-input name=\"role\" rules=\"required\" label=\"Role\" vid=\"role\">\r\n                          <el-select\r\n                            v-model=\"model.role_id\"\r\n                            :disabled=\"!model.company_id || Object.keys(roles).length < 2\"\r\n                            filterable\r\n                            placeholder=\"Role\">\r\n                            <el-option v-for=\"role in roles\" :key=\"role.id\" :label=\"role.role_name\" :value=\"role.id\"></el-option>\r\n                          </el-select>\r\n                        </base-input>\r\n                      </div>\r\n                    </b-col>\r\n                  </b-row>\r\n                </form>\r\n              </validation-observer>\r\n            </template>\r\n\r\n            <template #modal-footer=\"{ ok, cancel, hide }\">\r\n                <b-button variant=\"outline-primary\" class=\"ml-auto\" @click=\"closeUserEntityChangeModal\">Cancel</b-button>\r\n                <b-button variant=\"primary\" @click='changeUserEntity'>Change User Entity</b-button>\r\n            </template>\r\n          </b-modal>\r\n\r\n          <b-card>\r\n            <template #header>\r\n              <base-button \r\n                :disabled=\"!userCan('Reset Password', 'Users') && model.email != $store.state.user_obj.email\"\r\n                @click.native=\"showPWChangeModal()\"\r\n                class=\"btn\"\r\n                size=\"sm\"\r\n                type=\"primary\"\r\n                icon>\r\n                Change Password\r\n              </base-button>\r\n\r\n              <base-button\r\n                v-if=\"isAdmin()\"\r\n                :disabled=\"model.is_admin\"\r\n                @click.native=\"confirmPromotion()\"\r\n                class=\"btn\"\r\n                size=\"sm\"\r\n                type=\"primary\"\r\n                icon>\r\n                Promote\r\n              </base-button>\r\n\r\n              <base-button\r\n                :disabled=\"!userCan('Lock', 'Users') || model.email == $store.state.user_obj.email || model.is_admin\"\r\n                @click.native=\"confirmUserLock()\"\r\n                class=\"btn\"\r\n                size=\"sm\"\r\n                type=\"primary\"\r\n                icon>\r\n                {{ model.is_active ? 'Lock' : 'Unlock' }}\r\n              </base-button>\r\n\r\n            </template>\r\n\r\n            <validation-observer ref='form' slim>\r\n              <b-row>\r\n                <b-col md>\r\n                  <base-input @change=\"syncFields\" name=\"name\" rules=\"required\" label=\"Full Name\" placeholder=\"Full Name\" vid=\"name\" v-model=\"model.name\"></base-input>\r\n                </b-col>\r\n                <b-col md>\r\n                  <base-input @change=\"syncFields\" name=\"email\" rules=\"required|email\" label=\"Email Address\" placeholder=\"Email Address\" vid=\"email\" v-model=\"model.email\"></base-input>\r\n                </b-col>\r\n              </b-row>\r\n\r\n              <b-row>\r\n                <b-col md>\r\n                  <base-input @change=\"syncFields\" label=\"Mobile\" placeholder=\"Mobile\" vid=\"mobile\" v-model=\"model.mobile\"></base-input>\r\n                </b-col>\r\n                <b-col md>\r\n                  <base-input @change=\"syncFields\" label=\"Physical Address\" placeholder=\"Physical Address\" vid=\"address\" v-model=\"model.address\"></base-input>\r\n                </b-col>\r\n              </b-row>\r\n\r\n              <b-row>\r\n                <b-col md>\r\n                  <base-input name=\"u.o.m\" rules=\"required\"  label=\"Unit of Measure\" vid=\"unit_of_measure\">\r\n                    <el-select @change=\"syncFields\" v-model=\"model.unit_of_measure\" filterable placeholder=\"Unit of Measure\">\r\n                      <el-option label=\"Imperial\" :value=\"2\"></el-option>\r\n                      <el-option label=\"Metric\" :value=\"1\"></el-option>\r\n                    </el-select>\r\n                  </base-input>\r\n                </b-col>\r\n                <b-col md>\r\n                  <base-input label=\"Time Zone\" name=\"timezone\" rules=\"required\" vid=\"timezone\">\r\n                    <el-select\r\n                      v-if=\"timeZones.length\"\r\n                      v-model=\"model.timezone\"\r\n                      @change=\"syncFields\"\r\n                      filterable\r\n                      placeholder=\"Time Zone\">\r\n                      <el-option \r\n                        v-for=\"item in timeZones\"\r\n                        :key=\"item._key\"\r\n                        :label=\"item._lab\"\r\n                        :value=\"item._key\">\r\n                      </el-option>\r\n                    </el-select>\r\n                  </base-input>\r\n                </b-col>\r\n              </b-row>\r\n\r\n              <b-row>\r\n                <b-col md>\r\n                  <base-input name=\"role\" rules=\"required\" label=\"Role\" vid=\"role\">\r\n                    <el-select\r\n                      v-model=\"model.role_id\"\r\n                      @change=\"syncFields\"\r\n                      :disabled=\"!model.company_id || Object.keys(roles).length < 2\"\r\n                      filterable\r\n                      placeholder=\"Role\">\r\n                      <el-option v-for=\"role in roles\" :key=\"role.id\" :label=\"role.role_name\" :value=\"role.id\"></el-option>\r\n                    </el-select>\r\n                  </base-input>\r\n                </b-col>\r\n\r\n                <b-col md>\r\n                  <base-input label=\"Entity\">\r\n                    <b-input-group>\r\n                      <b-form-input type=\"text\" v-model=\"user_company_name\" placeholder=\"Entity\" readonly></b-form-input>\r\n                      <b-input-group-append>\r\n                        <b-button :disabled=\"!isAdmin()\" variant=\"outline-primary\" @click=\"openUserEntityChangeModal\">Change Entity</b-button>\r\n                      </b-input-group-append>\r\n                    </b-input-group>\r\n                  </base-input>\r\n                </b-col>\r\n              </b-row>\r\n\r\n              <b-row v-if=\"model.company_id && (isAdmin() || isDistributor())\">\r\n                <b-col md>\r\n                  <base-input name=\"is_distributor\" vid=\"is_distributor\">\r\n                    <b-form-checkbox \r\n                      @change=\"syncFields\"\r\n                      size=\"lg\"\r\n                      v-model=\"model.is_distributor\"\r\n                      :disabled=\"!isAdmin() && ($store.state.user_obj.company_id == model.company_id || $store.state.user_obj.id == model.id)\"\r\n                      unchecked-value=\"0\" value=\"1\">\r\n                      Distributor\r\n                    </b-form-checkbox>\r\n                  </base-input>\r\n                </b-col>\r\n              </b-row>\r\n            </validation-observer>\r\n          </b-card>\r\n\r\n          <b-card v-if=\"model.company_id && (isAdmin() || isDistributor()) && model.is_distributor == '1'\">\r\n            <template #header>\r\n              <h3 class=\"mb-0\">Distributor Details</h3>\r\n            </template>\r\n            <b-row>\r\n              <b-col md>\r\n                <template v-if=\"dist_list && Object.keys(dist_list).length\">\r\n                  <base-input label=\"Managed Entities\" name=\"managed_companies\" vid=\"managed_companies\">\r\n                    <el-select\r\n                      :disabled=\"!isAdmin() && ($store.state.user_obj.company_id == model.company_id || $store.state.user_obj.id == model.id)\"\r\n                      @change=\"syncFields\"\r\n                      v-model=\"model.managed_company_ids\"\r\n                      value-key=\"id\"\r\n                      multiple\r\n                      filterable\r\n                      placeholder=\"Choose\">\r\n                      <template v-if=\"dist_list && Object.keys(dist_list).length\">\r\n                        <el-option v-for=\"company in dist_list\"\r\n                          :key=\"company.id\"\r\n                          :label=\"company.company_name\"\r\n                          :value=\"company.id\">\r\n                        </el-option>\r\n                      </template>\r\n                    </el-select>\r\n                  </base-input>\r\n                </template>\r\n                <template v-else>\r\n                  <b-alert v-if=\"Object.keys(companies).length\" variant=\"primary\" show><strong>{{ companies['\"'+model.company_id.toString()+'\"'].company_name }}</strong> currently has no manageable subsidiary entities available to pre-assign to this distributor user.</b-alert>\r\n                </template>\r\n              </b-col>\r\n            </b-row>\r\n          </b-card>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Modal from '@/components/Modal'\r\nimport { Select, Option } from 'element-ui'\r\nimport mab_utils from '../../util/mab-utils';\r\nimport swal from 'sweetalert2';\r\n\r\nexport default {\r\n\r\n  mixins: [ mab_utils ],\r\n\r\n  components: {\r\n    [Select.name]: Select,\r\n    [Option.name]: Option,\r\n    Modal\r\n  },\r\n  \r\n  data() {\r\n    return {\r\n      loading: false,\r\n      timeZones: [],\r\n      roles: [],\r\n\r\n      bInitialQuery: true,\r\n\r\n      companies: [],\r\n      dist_list: [],\r\n\r\n      showPWModal: false,\r\n      pw1: '',\r\n      pw2: '',\r\n      model: {\r\n        id: null,\r\n        name: '',\r\n        email: '',\r\n        mobile: '',\r\n        address: '',\r\n        unit_of_measure: '',\r\n        timezone: '',\r\n        role: '',\r\n        is_admin: 0,\r\n        is_distributor: 0,\r\n        is_active: 0,\r\n        role_id: null,\r\n        company_id: null,\r\n        password: null,\r\n        parent_id: null,\r\n        managed_company_ids: []\r\n      },\r\n\r\n      user_company_name: '',\r\n      showUserEntityChangeModal: false,\r\n\r\n      prev_company_id: null,\r\n      prev_role_id: null\r\n    };\r\n  },\r\n  methods: {\r\n\r\n    loadUser()\r\n    {\r\n      this.loading = true;\r\n      this.$axios.get(this.$store.state.baseUrl+\"/api/user/\" + this.$route.params.email)\r\n      .then((resp) => {\r\n        this.loading = false;\r\n        if(resp.data.message == 'user_loaded'){\r\n\r\n          this.model = resp.data.user;\r\n          this.bInitialQuery = false;\r\n\r\n        } else if(resp.data.message == 'nonexistent'){\r\n          this.$notify({\r\n            title: 'Error',\r\n            message: 'User not found (might have been removed)',\r\n            type: 'danger',\r\n            verticalAlign: 'top',\r\n            horizontalAlign: 'right'\r\n          });\r\n        // should never happen\r\n        } else if(resp.data.message == 'missing_email'){\r\n          this.$notify({\r\n            title: 'Error',\r\n            message: \"Parameter Error: email\",\r\n            type: 'danger',\r\n            verticalAlign: 'top',\r\n            horizontalAlign: 'right'\r\n          });\r\n        }\r\n        this.loadCompanies();\r\n        this.loadDistributors();\r\n      });\r\n    },\r\n\r\n    loadCompanies()\r\n    {\r\n      this.$axios.post(this.$store.state.baseUrl+\"/api/companies_list\", {\r\n        context: [ { verb: 'Edit', module: 'Users' } ]\r\n      }).then((resp) => {\r\n        this.companies = resp.data.companies;\r\n        this.user_company_name = this.companies['\"'+this.model.company_id.toString()+'\"'].company_name;\r\n        this.loadRoles();\r\n      });\r\n    },\r\n\r\n    loadDistributors()\r\n    {\r\n      this.$axios.post(this.$store.state.baseUrl+'/api/companies_dist_list', {\r\n        company_id: this.model.company_id\r\n      }).then((resp) => {\r\n        if(resp.data){\r\n          this.dist_list = resp.data.companies;\r\n        }\r\n      })\r\n    },\r\n\r\n    loadRoles()\r\n    {\r\n      this.loading = true;\r\n      this.$axios.post(this.$store.state.baseUrl+\"/api/roles_by_cc\", {\r\n        company_id: this.model.company_id \r\n      }).then((resp) => {\r\n        this.loading = false;\r\n        this.roles = resp.data.roles;\r\n      }); \r\n    },\r\n\r\n    showPWChangeModal()\r\n    {\r\n      this.pw1 = '';\r\n      this.pw2 = '';\r\n      this.model.password = null;\r\n      this.showPWModal = true;\r\n    },\r\n\r\n    closePWChangeModal()\r\n    {\r\n      this.pw1 = '';\r\n      this.pw2 = '';\r\n      this.model.password = null;\r\n      this.showPWModal = false;\r\n    },\r\n\r\n    updatePW()\r\n    {\r\n      this.$refs.pwform.validate().then(success => {\r\n\r\n        if (!success) { \r\n          this.$notify({\r\n            title: 'Required',\r\n            message: 'Please fill in all fields',\r\n            type: 'warn',\r\n            verticalAlign: 'top',\r\n            horizontalAlign: 'right',\r\n            duration:1000,\r\n            clean:true\r\n          });\r\n          return;\r\n        }\r\n\r\n        this.loading = true;\r\n        this.model.password = this.pw1;\r\n        this.model.password_confirmation = this.pw2;\r\n\r\n        this.$axios.post(this.$store.state.baseUrl+\"/api/updatePW\", this.model)\r\n        .then((resp) => {\r\n          this.loading = false;\r\n          this.model.password = null;\r\n          if(resp.data.message == 'pw_updated'){\r\n            this.closePWChangeModal();\r\n            this.$notify({\r\n              title: 'Success',\r\n              message: 'Password changed',\r\n              type: 'success',\r\n              verticalAlign: 'top',\r\n              horizontalAlign: 'right'\r\n            });\r\n          }\r\n        }).catch(err => {\r\n          this.loading = false;\r\n          if(err.response.data.errors){\r\n            this.$refs.pwform.setErrors(err.response.data.errors);\r\n          }\r\n        });\r\n      });\r\n    },\r\n\r\n    promoteUser()\r\n    {\r\n      this.$axios.post(this.$store.state.baseUrl+\"/api/promote\", {\r\n        id: this.model.id\r\n      })\r\n      .then((resp) => {\r\n        if(resp.data.message == 'user_promoted')\r\n        {\r\n          this.$notify({\r\n            title: 'Success',\r\n            message: 'User was promoted',\r\n            type: 'success',\r\n            verticalAlign: 'top',\r\n            horizontalAlign: 'right'\r\n          });\r\n        }\r\n      });\r\n    },\r\n\r\n    syncFields()\r\n    {\r\n      return this.$refs.form.validate().then(success => {\r\n\r\n        if (!success) { \r\n          this.$notify({\r\n            title: 'Required',\r\n            message: 'Please fill in all fields',\r\n            type: 'danger',\r\n            verticalAlign: 'top',\r\n            horizontalAlign: 'right',\r\n            duration:1000,\r\n            clean:true\r\n          });\r\n          return;\r\n        }\r\n\r\n        this.loading = true;\r\n        this.model.password = null;\r\n\r\n        return this.$axios.post(this.$store.state.baseUrl+\"/api/updatePW\", this.model)\r\n        .then((resp) => {\r\n          this.loading = false;\r\n          this.model.password = null;\r\n          if(resp.data.message == 'user_updated'){\r\n\r\n            if(resp.data.user){\r\n              this.$store.dispatch('update_uom', resp.data.user.unit_of_measure);\r\n            }\r\n            \r\n            this.$notify({\r\n              title: 'Saved',\r\n              message: 'Changes were saved',\r\n              type: 'success',\r\n              verticalAlign: 'top',\r\n              horizontalAlign: 'right'\r\n            });\r\n            return resp;\r\n          }\r\n        }).catch(err => {\r\n          this.loading = false;\r\n          if(err.response.data.errors){\r\n            this.$refs.form.setErrors(err.response.data.errors);\r\n          }\r\n          return err;\r\n        });\r\n      });\r\n    },\r\n\r\n    changeUserEntity()\r\n    {\r\n      this.$refs.entity_change_form.validate()\r\n      .then(success => {\r\n\r\n        if (!success) { \r\n          this.$notify({\r\n            title: 'Required',\r\n            message: 'Please fill in all fields',\r\n            type: 'danger',\r\n            verticalAlign: 'top',\r\n            horizontalAlign: 'right',\r\n            duration:1000,\r\n            clean:true\r\n          });\r\n          return false;\r\n        }\r\n\r\n        this.syncFields()\r\n        .then(() => {\r\n          this.$notify({\r\n            title: 'Success',\r\n            message: 'User entity changed.',\r\n            type: 'success',\r\n            verticalAlign: 'top',\r\n            horizontalAlign: 'right'\r\n          });\r\n          this.showUserEntityChangeModal = false;\r\n        }).catch(err => {\r\n          this.$notify({\r\n            title: 'Failure',\r\n            message: 'User entity change failed.',\r\n            type: 'warning',\r\n            verticalAlign: 'top',\r\n            horizontalAlign: 'right'\r\n          });\r\n          this.showUserEntityChangeModal = false;\r\n        });\r\n\r\n      });\r\n    },\r\n\r\n    confirmPromotion()\r\n    {\r\n      swal.fire({\r\n        title: 'Promote User',\r\n        text: `Please confirm user promotion`,\r\n        type: 'warning',\r\n        showCancelButton: true,\r\n        confirmButtonText: 'Promote',\r\n        buttonsStyling: false,\r\n        customClass: {\r\n          cancelButton: 'btn btn-outline-primary',\r\n          confirmButton: 'btn btn-primary'\r\n        }\r\n      }).then(result => {\r\n        if (result.value) {\r\n          this.promoteUser();\r\n        }\r\n      });\r\n    },\r\n\r\n    confirmUserLock()\r\n    {\r\n      swal.fire({\r\n        title: this.model.is_active ? 'Lock User' : 'Unlock User',\r\n        text: 'Please confirm ' + (this.model.is_active ? 'locking' : 'unlocking') + ' user account',\r\n        type: 'warning',\r\n        showCancelButton: true,\r\n        confirmButtonText: this.model.is_active ? 'Lock' : 'Unlock',\r\n        buttonsStyling: false,\r\n        customClass: {\r\n          cancelButton: 'btn btn-outline-primary',\r\n          confirmButton: 'btn btn-primary'\r\n        }\r\n      }).then(result => {\r\n        if (result.value) {\r\n          this.toggleUserLock();\r\n        }\r\n      });\r\n    },\r\n\r\n    toggleUserLock()\r\n    {\r\n      let verb = this.model.is_active ? 'lock' : 'unlock';\r\n      this.$axios.post(this.$store.state.baseUrl+\"/api/user_\" + verb, { id: this.model.id })\r\n      .then((resp) => {\r\n        if(resp.data){\r\n          if(resp.data.message == 'user_locked'){\r\n            this.model.is_active = 0;\r\n            this.$notify({\r\n              title: 'Success',\r\n              message: 'User account was locked',\r\n              type: 'success',\r\n              verticalAlign: 'top',\r\n              horizontalAlign: 'right'\r\n            });\r\n          } else if(resp.data.message == 'user_unlocked'){\r\n            this.model.is_active = 1;\r\n            this.$notify({\r\n              title: 'Success',\r\n              message: 'User account was unlocked',\r\n              type: 'success',\r\n              verticalAlign: 'top',\r\n              horizontalAlign: 'right'\r\n            });\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n    loadTimezones()\r\n    {\r\n      this.$axios.get(this.$store.state.baseUrl+\"/api/getTimezones\")\r\n      .then((response) => {\r\n        if(response.data){\r\n          let _timezones = JSON.parse(JSON.stringify(response.data.timezones));\r\n          let _offsets = JSON.parse(JSON.stringify(response.data.offsets));\r\n          if(_timezones && _timezones.length){\r\n            for(var i = 0; i < _timezones.length; i++){\r\n              this.timeZones.push({\r\n                _key: i.toString(), \r\n                _lab: _timezones[i] + ' (' + _offsets[_timezones[i]] + ')'\r\n              });\r\n            }\r\n            //console.log(this.$store.state.user_obj.timezone);\r\n            //console.log(this.timeZones);\r\n          }\r\n        }\r\n      });\r\n    },\r\n\r\n    companyChanged()\r\n    {\r\n      this.model.role_id = null;\r\n      this.loadRoles();\r\n    },\r\n\r\n    openUserEntityChangeModal()  {\r\n      this.showUserEntityChangeModal = true;\r\n      this.prev_company_id = this.model.company_id;\r\n      this.prev_role_id = this.model.role_id;\r\n    },\r\n\r\n    closeUserEntityChangeModal() {\r\n      this.showUserEntityChangeModal = false;\r\n      this.model.company_id = this.prev_company_id;\r\n      this.model.role_id = this.prev_role_id;\r\n      // since we changed to another company and cancelled, we need to load the original roles again\r\n      this.loadRoles();\r\n    },\r\n\r\n    restrictedNotice()\r\n    {\r\n      swal.fire({\r\n        title: 'Access was restricted',\r\n        text: 'You were redirected to your profile screen due to your account lacking the necessary permissions. Please notify your administrator.',\r\n        showCancelButton: false,\r\n        confirmButtonText: 'OK',\r\n        buttonsStyling: false,\r\n        customClass: {\r\n          cancelButton: 'btn btn-outline-primary',\r\n          confirmButton: 'btn btn-primary'\r\n        }\r\n      });\r\n    },\r\n\r\n    loadAll(){\r\n      this.loadTimezones();\r\n      this.loadUser();\r\n      if(mabRedirect && mabRedirect.length){\r\n        console.log(mabRedirect);\r\n        this.restrictedNotice();\r\n        mabRedirect = '';\r\n      }\r\n    }\r\n  },\r\n  mounted()\r\n  {\r\n    this.loadAll();\r\n  },\r\n  watch: {\r\n    // call again the method if the route changes\r\n    '$route': 'loadAll'\r\n  },\r\n};\r\n</script>\r\n<style></style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserManagementForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserManagementForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./UserManagementForm.vue?vue&type=template&id=47168000&\"\nimport script from \"./UserManagementForm.vue?vue&type=script&lang=js&\"\nexport * from \"./UserManagementForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}