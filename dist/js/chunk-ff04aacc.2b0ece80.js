(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ff04aacc"],{"92e6":function(e,t,a){"use strict";a("d608")},b7a2:function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"nifty_gauge",style:"width:"+e.size+"; max-width:"+e.size,attrs:{id:e.uniqid_gen},on:{click:e.emitClick}},[a("div",{staticClass:"inner_wrapper"},[a("svg",{attrs:{viewBox:"0 0 100 100"}},[a("clipPath",{attrs:{id:"clip"}},[a("path",{attrs:{d:"M 50 0 a 50 50 0 0 1 0 100 50 50 0 0 1 0 -100 v 16 a 34 34 0 0 0 0 68 34 34 0 0 0 0 -68"}})]),a("foreignObject",{attrs:{x:"0",y:"0",width:"100",height:"100","clip-path":"url(#clip)"}},[a("div",{staticClass:"gradient",style:e.buildConicGradient(),attrs:{xmlns:"http://www.w3.org/1999/xhtml"}})])])]),a("div",{staticClass:"gauge",style:"transform:translate(-50%, -100%) rotate("+e.capAngle()+"deg);"}),a("div",{staticClass:"knob"}),e.subl?a("span",{staticClass:"subl"},[e._v(e._s(e.subl))]):e._e(),e.subm?a("span",{staticClass:"subm"},[e._v(e._s(e.subm))]):e._e(),e.subr?a("span",{staticClass:"subr"},[e._v(e._s(e.subr))]):e._e(),e.label?a("span",{staticClass:"label"},[e._v(e._s(e.label))]):e._e(),e.tooltip?a("b-tooltip",{attrs:{target:e.uniqid_gen}},[e._v(e._s(e.tooltip))]):e._e()],1)},i=[],s=(a("6b54"),{name:"NiftyGauge",props:{angle:{type:String,default:"0"},size:{type:String,default:""},tooltip:{type:String,default:""},subm:{type:String,default:""},subl:{type:String,default:""},subr:{type:String,default:""},label:{type:String,default:""},stops:{type:Array,default:["from","90deg","#f44336","0%","#f44336","50%","#ffeb3b","60%","#4caf50","75%","#ffeb3b","90%","#f44336","100%"]}},data:function(){return{uniqid_gen:""}},created:function(){this.uniqid_gen=this.uniqid("ngtt_")},methods:{uniqid:function(e){return e+window.Math.random().toString(36)},emitClick:function(){this.$emit("clicked",this.uniqid_gen)},capAngle:function(){return this.angle>90&&(this.angle=90),this.angle<-90&&(this.angle=-90),this.angle},buildConicGradient:function(){for(var e="background-image:conic-gradient(",t=0;t<this.stops.length;t+=2)e=e+this.stops[t]+" "+this.stops[t+1]+(t+2<this.stops.length?", ":"");return e+=")",e}}}),n=s,o=(a("92e6"),a("2877")),r=Object(o["a"])(n,l,i,!1,null,"0e918656",null);t["a"]=r.exports},d608:function(e,t,a){},df6f:function(e,t,a){"use strict";a.r(t);var l,i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("base-header",{staticClass:"pb-6",attrs:{type:"nutrients"}},[a("b-row",{staticClass:"py-4",attrs:{"align-v":"center"}},[a("b-col",[a("h6",{directives:[{name:"show",rawName:"v-show",value:e.field_name,expression:"field_name"}],staticClass:"h2 text-white d-inline-block mb-0 mr-5"},[e._v("Nutrients - "+e._s(e.field_name)+" - "+e._s(e.model.node_address)+" ")]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"mab_spinner light right"})])],1)],1),a("div",{staticClass:"container-fluid mt--6"},[a("b-modal",{attrs:{centered:"","no-close-on-esc":"","no-close-on-backdrop":"",size:"lg"},scopedSlots:e._u([{key:"modal-header",fn:function(t){t.close;return[a("h6",{staticClass:"modal-title"},[e._v("Nutrient Templates")])]}},{key:"default",fn:function(t){t.hide;return[a("b-row",[a("b-col",[a("b-form-select",{model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}},[a("b-form-select-option",{attrs:{value:5}},[e._v("5")]),a("b-form-select-option",{attrs:{value:10,selected:""}},[e._v("10")]),a("b-form-select-option",{attrs:{value:25}},[e._v("25")]),a("b-form-select-option",{attrs:{value:50}},[e._v("50")])],1)],1),a("b-col",{attrs:{md:""}}),a("b-col",[a("base-input",{attrs:{"prepend-icon":"fas fa-search",placeholder:"Search..."},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}})],1)],1),a("b-row",[a("b-col",{attrs:{md:""}},[a("b-table",{attrs:{striped:"",bordered:"",outlined:"",small:"",stacked:"md",responsive:"","show-empty":"","primary-key":"id","per-page":e.perPage,"current-page":e.currentPage,filter:e.filterText,fields:e.templateTableColumns,items:e.loadedTemplates,busy:e.loading},on:{"update:busy":function(t){e.loading=t}},scopedSlots:e._u([{key:"cell()",fn:function(t){return[e._v(e._s(t.value))]}},{key:"cell(actions)",fn:function(t){return[a("div",{staticClass:"d-flex justify-content-center"},[a("b-button",{staticClass:"btn",attrs:{disabled:!e.userCan("Edit","Nutrient Templates",t.item.id,"O")||"Default Template"==t.item.name||e.loading,variant:"outline-primary",size:"sm",icon:""},on:{click:function(a){return e.applyNutrientTemplate(t.index,t.item)}}},[e._v("\n                  Apply\n                  ")]),a("b-button",{staticClass:"btn",attrs:{disabled:!e.userCan("Edit","Nutrient Templates",t.item.id,"O")||"Default Template"==t.item.name||e.loading,variant:"outline-primary",size:"sm",icon:""},on:{click:function(a){return e.editNutrientTemplate(t.index,t.item)}}},[e._v("\n                  Edit\n                  ")]),a("b-button",{staticClass:"btn",attrs:{disabled:!e.userCan("Delete","Nutrient Templates",t.item.id,"O")||"Default Template"==t.item.name||e.loading,variant:"outline-primary",size:"sm",icon:""},on:{click:function(a){return e.removeNutrientTemplate(t.index,t.item)}}},[e._v("\n                  Remove\n                  ")])],1)]}},{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center"},[a("div",{staticClass:"mab_spinner"})])]},proxy:!0},{key:"empty",fn:function(t){return[a("div",{staticClass:"text-center"},[e._v("\n                  No templates found\n                ")])]}}],null,!0)})],1)],1),a("b-row",[a("b-col",{attrs:{md:""}},[e._v("\n            Showing "+e._s(Math.min(1+e.perPage*(e.currentPage-1),e.totalRows))+" to "+e._s(Math.min(e.perPage*(e.currentPage-1)+e.perPage,e.totalRows))+" of "+e._s(e.totalRows)+" templates\n          ")]),a("b-col",{attrs:{md:""}},[a("b-pagination",{attrs:{"total-rows":e.totalRows,"per-page":e.perPage,align:"right"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)]}},{key:"modal-footer",fn:function(t){t.ok,t.cancel,t.hide;return[a("b-button",{staticClass:"ml-auto",attrs:{disabled:!e.userCan("Add","Nutrient Templates")||e.loading,variant:"outline-primary"},on:{click:e.addNutrientTemplate}},[e._v("\n          Add Template\n        ")]),a("b-button",{attrs:{variant:"outline-primary"},on:{click:e.closeBrowseTemplatesModal}},[e._v("\n          Close\n        ")])]}}]),model:{value:e.browseTemplatesModalVisible,callback:function(t){e.browseTemplatesModalVisible=t},expression:"browseTemplatesModalVisible"}}),a("b-modal",{attrs:{centered:"","no-close-on-esc":"","no-close-on-backdrop":"",size:"lg"},scopedSlots:e._u([{key:"modal-header",fn:function(t){t.close;return[a("h6",{staticClass:"modal-title"},[e._v(e._s(e.currentMode)+" Template")])]}},{key:"default",fn:function(t){t.hide;return[a("validation-observer",{ref:"managetpl",attrs:{slim:""}},[a("b-row",[a("b-col",{attrs:{md:""}},[a("base-input",{attrs:{label:"Template Name",placeholder:"Template Name",name:"template name",rules:"required"},model:{value:e.template_name,callback:function(t){e.template_name=t},expression:"template_name"}})],1)],1),a("b-row",[a("b-col",{attrs:{md:""}},[a("base-input",{attrs:{label:"Polynomial 1",placeholder:"Poly1",name:"poly1",rules:"required|double"},model:{value:e.template_model.poly1,callback:function(t){e.$set(e.template_model,"poly1",t)},expression:"template_model.poly1"}})],1),a("b-col",{attrs:{md:""}},[a("base-input",{attrs:{label:"Polynomial 2",placeholder:"Poly2",name:"poly2",rules:"required|double"},model:{value:e.template_model.poly2,callback:function(t){e.$set(e.template_model,"poly2",t)},expression:"template_model.poly2"}})],1)],1),a("b-row",[a("b-col",{attrs:{md:""}},[a("base-input",{attrs:{label:"Lower Limit",placeholder:"Lower Limit",name:"lower limit",rules:"required"},model:{value:e.template_model.lower_limit,callback:function(t){e.$set(e.template_model,"lower_limit",t)},expression:"template_model.lower_limit"}})],1),a("b-col",{attrs:{md:""}},[a("base-input",{attrs:{label:"Upper Limit",placeholder:"Upper Limit",name:"upper limit",rules:"required"},model:{value:e.template_model.upper_limit,callback:function(t){e.$set(e.template_model,"upper_limit",t)},expression:"template_model.upper_limit"}})],1)],1),a("b-row",[a("b-col",{attrs:{md:""}},[a("base-input",{attrs:{label:"Soil Type",vid:"soil_type",rules:"required",name:"soil type"}},[a("el-select",{attrs:{placeholder:"Soil Type"},model:{value:e.template_model.soil_type,callback:function(t){e.$set(e.template_model,"soil_type",t)},expression:"template_model.soil_type"}},e._l(e.soilTypes,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("b-col",{attrs:{md:""}},[a("base-input",{attrs:{label:"Metric",vid:"metric",rules:"required",name:"metric"}},[a("el-select",{attrs:{placeholder:"Metric"},model:{value:e.template_model.metric,callback:function(t){e.$set(e.template_model,"metric",t)},expression:"template_model.metric"}},e._l(e.metrics,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("b-col",{attrs:{md:""}},[a("base-input",{attrs:{label:"Crop Name",placeholder:"Crop Name",name:"crop name",rules:"required"},model:{value:e.template_model.crop_name,callback:function(t){e.$set(e.template_model,"crop_name",t)},expression:"template_model.crop_name"}})],1)],1)],1)]}},{key:"modal-footer",fn:function(t){t.ok,t.cancel,t.hide;return[a("b-button",{staticClass:"ml-auto",attrs:{variant:"outline-primary"},on:{click:e.closeManageNutrientTemplateModal}},[e._v("\n          Close\n        ")]),a("b-button",{attrs:{variant:"outline-primary"},on:{click:e.saveNutrientTemplate}},[e._v("\n          "+e._s("Edit"==e.currentMode?"Update":"Add")+"\n        ")])]}}]),model:{value:e.manageTemplateModalVisible,callback:function(t){e.manageTemplateModalVisible=t},expression:"manageTemplateModalVisible"}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("card",{attrs:{"body-classes":"px-0 py-0"}},[a("template",{slot:"header"},[a("b-row",[a("b-col",[a("base-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",modifiers:{hover:!0,top:!0}}],staticClass:"btn",attrs:{disabled:!e.userCan("Graph","Nutrients",e.model.node_address,"O")||e.loading,type:"primary",size:"sm",title:"Navigate to node's graphing screen.",icon:""},nativeOn:{click:function(t){return e.goToGraph()}}},[e._v("\n                  Graph\n                ")])],1)],1)],1),a("div",{staticClass:"card-body"},[a("b-row",[a("b-col",{attrs:{md:""}},[a("card",{attrs:{"body-classes":"px-1 py-1"}},[a("div",{staticClass:"card-body"},[a("b-row",[a("b-col",{attrs:{md:"","align-self":"center"}},[a("b-toast",{attrs:{visible:!0,title:"Readings Date",static:"","no-auto-hide":"","no-close-button":""}},[e._v("\n                          "+e._s(e.latestDateReported)+"\n                        ")])],1),a("b-col",{attrs:{md:"","align-self":"center"}},[a("b-toast",{attrs:{visible:!0,title:"Active Template",static:"","no-auto-hide":"","no-close-button":""}},[e._v("\n                          "+e._s(e.loadedTemplateName)+"\n                        ")])],1),a("b-col",{attrs:{md:"","align-self":"center"}},[a("base-button",{staticClass:"btn",attrs:{disabled:!e.userCan("View","Nutrient Templates")||e.loading,type:"primary",icon:""},nativeOn:{click:function(t){return e.openNutrientTemplatesModal()}}},[e._v("\n                          Nutrient Templates\n                        ")])],1),a("b-col",{attrs:{md:"","align-self":"center"}},[a("b-toast",{attrs:{visible:!0,title:"Install Depth",static:"","no-auto-hide":"","no-close-button":""}},[a("validation-observer",{ref:"nform",attrs:{slim:""}},[a("base-input",{attrs:{vid:"install_depth",rules:"required",name:"install depth"}},[a("el-select",{attrs:{size:"small",placeholder:"Install Depth"},on:{change:e.syncFields},model:{value:e.model.install_depth,callback:function(t){e.$set(e.model,"install_depth",t)},expression:"model.install_depth"}},e._l(e.install_depths,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1)],1)],1)],1)])],1)],1),a("b-row",[a("b-col",{attrs:{md:""}},[a("card",{attrs:{"body-classes":"px-1 py-1"}},[a("template",{slot:"header"},[a("strong",[e._v("Raw")])]),a("div",{staticClass:"card-body"},[a("b-row",[a("b-col",[a("b-toast",{attrs:{visible:!0,title:"M3.1",static:"","no-auto-hide":"","no-close-button":""}},[e._v("\n                          "+e._s(e.raw.M3_1)+"\n                        ")])],1),a("b-col",[a("b-toast",{attrs:{visible:!0,title:"M4.1",static:"","no-auto-hide":"","no-close-button":""}},[e._v("\n                          "+e._s(e.raw.M4_1)+"\n                        ")])],1),a("b-col",[a("b-toast",{attrs:{visible:!0,title:"M5.1",static:"","no-auto-hide":"","no-close-button":""}},[e._v("\n                          "+e._s(e.raw.M5_1)+"\n                        ")])],1),a("b-col",[a("b-toast",{attrs:{visible:!0,title:"M6.1",static:"","no-auto-hide":"","no-close-button":""}},[e._v("\n                          "+e._s(e.raw.M6_1)+"\n                        ")])],1),a("b-col",[a("b-toast",{attrs:{visible:!0,title:"Avg.",static:"","no-auto-hide":"","no-close-button":""}},[e._v("\n                          "+e._s(e.raw.avg)+"\n                        ")])],1)],1)],1)],2),a("card",{attrs:{"body-classes":"px-1 py-1"}},[a("template",{slot:"header"},[a("strong",[e._v("PPM")])]),a("div",{staticClass:"card-body"},[a("b-row",[a("b-col",[a("b-toast",{attrs:{visible:!0,title:"M3.1",static:"","no-auto-hide":"","no-close-button":""}},[e._v("\n                          "+e._s(e.ppm.M3_1)+"\n                        ")])],1),a("b-col",[a("b-toast",{attrs:{visible:!0,title:"M4.1",static:"","no-auto-hide":"","no-close-button":""}},[e._v("\n                          "+e._s(e.ppm.M4_1)+"\n                        ")])],1),a("b-col",[a("b-toast",{attrs:{visible:!0,title:"M5.1",static:"","no-auto-hide":"","no-close-button":""}},[e._v("\n                          "+e._s(e.ppm.M5_1)+"\n                        ")])],1),a("b-col",[a("b-toast",{attrs:{visible:!0,title:"M6.1",static:"","no-auto-hide":"","no-close-button":""}},[e._v("\n                          "+e._s(e.ppm.M6_1)+"\n                        ")])],1),a("b-col",[a("b-toast",{attrs:{visible:!0,title:"Avg.",static:"","no-auto-hide":"","no-close-button":""}},[e._v("\n                          "+e._s(e.ppm.avg)+"\n                        ")])],1)],1)],1)],2),a("card",{attrs:{"body-classes":"px-1 py-1"}},[a("template",{slot:"header"},[a("strong",[e._v("Pounds")])]),a("div",{staticClass:"card-body"},[a("b-row",[a("b-col",[a("b-toast",{attrs:{visible:!0,title:"M3.1",static:"","no-auto-hide":"","no-close-button":""}},[e._v("\n                          "+e._s(e.pounds.M3_1)+"\n                        ")])],1),a("b-col",[a("b-toast",{attrs:{visible:!0,title:"M4.1",static:"","no-auto-hide":"","no-close-button":""}},[e._v("\n                          "+e._s(e.pounds.M4_1)+"\n                        ")])],1),a("b-col",[a("b-toast",{attrs:{visible:!0,title:"M5.1",static:"","no-auto-hide":"","no-close-button":""}},[e._v("\n                          "+e._s(e.pounds.M5_1)+"\n                        ")])],1),a("b-col",[a("b-toast",{attrs:{visible:!0,title:"M6.1",static:"","no-auto-hide":"","no-close-button":""}},[e._v("\n                          "+e._s(e.pounds.M6_1)+"\n                        ")])],1),a("b-col",[a("b-toast",{attrs:{visible:!0,title:"Avg.",static:"","no-auto-hide":"","no-close-button":""}},[e._v("\n                          "+e._s(e.pounds.avg)+"\n                        ")])],1)],1)],1)],2)],1),a("b-col",{attrs:{md:""}},[a("card",[a("template",{slot:"header"},[a("strong",[e._v("Nutrient Gauge")])]),a("div",{staticClass:"card-body"},[a("b-row",[a("b-col",{attrs:{md:""}},[a("NiftyGauge",{attrs:{angle:e.gauge_value,size:"50%",subl:e.lower_limit,subm:e.ppm.avg+" (PPM)",subr:e.upper_limit,label:e.nutrient_label}})],1)],1)],1)],2)],1)],1)],1)],2),a("card",{attrs:{"body-classes":"px-0 py-0"}},[a("template",{slot:"header"},[a("h3",{staticClass:"mb-0"},[e._v("Graph Configuration")])]),a("div",{staticClass:"card-body"},[a("validation-observer",{ref:"nform",attrs:{slim:""}},[a("b-row",{attrs:{"align-v":"center"}},[a("b-col",{attrs:{md:""}},[a("base-input",{attrs:{label:"Graph Type",name:"graph type",rules:"required",vid:"graph_type"}},[a("el-select",{attrs:{filterable:"",placeholder:"Graph Type"},on:{change:e.syncFields},model:{value:e.model.graph_type,callback:function(t){e.$set(e.model,"graph_type",t)},expression:"model.graph_type"}},[a("el-option",{attrs:{label:"Nutrients (RAW)",value:"nutrient"}}),a("el-option",{attrs:{label:"Nutrients (PPM)",value:"nutrient_ppm"}}),a("el-option",{attrs:{label:"Nutrients (PPM Average)",value:"nutrient_ppm_avg"}})],1)],1)],1),a("b-col",{attrs:{md:""}},[a("base-input",{attrs:{label:"Graph Start Date",name:"start date",vid:"graph_start_date"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.focus,i=t.blur;return a("flat-picker",{staticClass:"form-control datepicker",attrs:{placeholder:"Graph Start Date",config:e.flatPickrConfig},on:{"on-open":l,"on-close":i,"on-change":e.syncFields},model:{value:e.model.graph_start_date,callback:function(t){e.$set(e.model,"graph_start_date",t)},expression:"model.graph_start_date"}})}}])})],1)],1)],1)],1)],2)],1)])],1)],1)},s=[],n=(a("20d6"),a("bd86")),o=(a("6611"),a("450d"),a("e772")),r=a.n(o),d=(a("7f7f"),a("1f1a"),a("4e4b")),p=a.n(d),m=a("c38f"),c=a.n(m),u=(a("0952"),a("3d20")),b=a.n(u),_=a("8fe0"),v=a("b7a2"),h={mixins:[_["a"]],components:(l={},Object(n["a"])(l,p.a.name,p.a),Object(n["a"])(l,r.a.name,r.a),Object(n["a"])(l,"flatPicker",c.a),Object(n["a"])(l,"NiftyGauge",v["a"]),l),data:function(){return{initial:!0,loading:!1,date_now:"",applied_template:"",company_id:null,field_id:"",field_name:"",browseTemplatesModalVisible:!1,manageTemplateModalVisible:!1,templateTableColumns:[{key:"name",label:"Template",sortable:!0,tdClass:"valign"},{key:"created_at",label:"Date Created",sortable:!0,tdClass:"valign"},{key:"user_name",label:"Created By",sortable:!0,tdClass:"valign"},{key:"actions",label:"Actions"}],currentMode:"Add",loadedTemplates:[],loadedTemplateId:null,loadedTemplateName:"Default Template",latestDateReported:"1970-01-01 00:00:00",totalRows:1,currentPage:1,perPage:10,filterText:"",gauge_value:0,raw:{M3_1:0,M4_1:0,M5_1:0,M6_1:0,avg:0},ppm:{M3_1:0,M4_1:0,M5_1:0,M6_1:0,avg:0},pounds:{M3_1:0,M4_1:0,M5_1:0,M6_1:0,avg:0},model:{node_id:null,node_address:null,install_depth:2.4,graph_type:"nutrients",graph_start_date:""},template_name:null,template_model:{id:null,poly1:0,poly2:0,lower_limit:0,upper_limit:0,metric:"",soil_type:"",crop_name:""},lower_limit:0,upper_limit:0,nutrient_label:"",soilTypes:[{value:1,label:"Sand"},{value:2,label:"Loamy Sand"},{value:3,label:"Sandy Loam"},{value:4,label:"Loam"},{value:5,label:"Silt Loam"},{value:6,label:"Silt"},{value:7,label:"Sandy Clay Loam"},{value:8,label:"Clay Loam"},{value:9,label:"Silty Clay Loam"},{value:10,label:"Sandy Clay"},{value:11,label:"Silty Clay"},{value:12,label:"Clay"}],metrics:[{value:"ppm",label:"Parts per million (PPM)"},{value:"pounds",label:"Pounds"}],install_depths:[{value:1.8,label:'4" - 1.8 Pound Factor'},{value:2.1,label:'6" - 2.1 Pound Factor'},{value:2.4,label:'8" - 2.4 Pound Factor'}]}},computed:{flatPickrConfig:function(){return{maxDate:this.date_now}}},methods:{loadNutrients:function(){var e=this;this.gauge_value=0,this.loading=!0,this.$axios.get(this.$store.state.baseUrl+"/api/ManageNutrients/"+this.$route.params.node_address).then((function(t){e.loading=!1,t.data&&(e.company_id=t.data.company_id,e.field_id=t.data.field_id,e.field_name=t.data.field_name,e.lower_limit=t.data.lower_limit,e.upper_limit=t.data.upper_limit,e.nutrient_label=t.data.nutrient_label,e.metric=t.data.metric,e.gauge_value=t.data.gauge_value,e.raw=t.data.raw,e.ppm=t.data.ppm,e.pounds=t.data.pounds,e.loadedTemplateId=t.data.active_template_id,e.loadedTemplateName=t.data.active_template_name,e.latestDateReported=t.data.latest_date_reported,e.initial&&(e.model.node_id=t.data.node_id,e.model.node_address=t.data.node_address,e.model.install_depth=t.data.install_depth,e.model.graph_type=t.data.graph_type,e.model.graph_start_date=t.data.graph_start_date),e.date_now=t.data.date_now,setTimeout((function(){e.initial=!1}),1e3))}))},loadNutrientTemplates:function(){var e=this;this.loading=!0,this.$axios.get(this.$store.state.baseUrl+"/api/loadNutrientTemplates/"+this.company_id).then((function(t){e.loading=!1,e.loadedTemplates=t.data.templates,e.totalRows=e.loadedTemplates.length}))},syncFields:function(){var e=this;this.initial||this.$refs.nform.validate().then((function(t){t?(e.loading=!0,e.$axios.post(e.$store.state.baseUrl+"/api/SaveNutrients",{model:e.model}).then((function(t){e.loading=!1,"field_updated"==t.data.message&&(e.loadNutrients(),e.$notify({title:"Saved",message:"Changes were saved",type:"success",verticalAlign:"top",horizontalAlign:"right"}),e.$refs.nform.reset())}))):e.$notify({title:"Required",message:"Please fill in all fields",type:"danger",verticalAlign:"top",horizontalAlign:"right",duration:1e3,clean:!0})}))},addNutrientTemplate:function(){this.currentMode="Add",this.clearNutrientTemplateModel(),this.openManageNutrientTemplateModal()},editNutrientTemplate:function(e,t){this.currentMode="Edit";var a=JSON.parse(t.template);this.template_name=t.name,this.template_model=Object.assign({},a),this.template_model.id=t.id,this.openManageNutrientTemplateModal()},removeNutrientTemplate:function(e,t){var a=this;b.a.fire({title:"Remove Template?",text:"Template will be permanently deleted",showCancelButton:!0,confirmButtonText:"Remove Template",buttonsStyling:!1,customClass:{cancelButton:"btn btn-outline-primary",confirmButton:"btn btn-primary"}}).then((function(e){e.value&&(a.loading=!0,a.$axios.post(a.$store.state.baseUrl+"/api/removeNutrientTemplate",{id:t.id}).then((function(e){if(a.loading=!1,"template_removed"==e.data.status){a.loadNutrients();var l=a.loadedTemplates.findIndex((function(e){return e.id===t.id}));l>=0&&a.loadedTemplates.splice(l,1),a.$notify({title:"Success",message:"Template Removed",type:"success",verticalAlign:"top",horizontalAlign:"right"})}})))}))},saveNutrientTemplate:function(){var e=this;this.$refs.managetpl.validate().then((function(t){t&&(e.loading=!0,e.$axios.post(e.$store.state.baseUrl+"/api/saveNutrientTemplate",{name:e.template_name,template:JSON.stringify(e.template_model),new:null===e.template_model.id?"yes":"no",company_id:e.company_id,id:e.template_model.id}).then((function(t){e.loading=!1,"template_saved"==t.data.status?(e.loadNutrients(),e.loadNutrientTemplates(),e.$notify({title:"Success",message:"Template "+("Add"==e.currentMode?"Added":"Updated"),type:"success",verticalAlign:"top",horizontalAlign:"right"}),e.closeManageNutrientTemplateModal()):"template_save_error"==t.data.status&&e.$notify({title:"Failed",message:"Failed to save template. Contact your admin.",type:"warning",verticalAlign:"top",horizontalAlign:"right"})})))}))},applyNutrientTemplate:function(e,t){var a=this;b.a.fire({title:"Apply Template?",text:"Template will be applied to the current nutrient configuration",showCancelButton:!0,confirmButtonText:"Apply Template",buttonsStyling:!1,customClass:{cancelButton:"btn btn-outline-primary",confirmButton:"btn btn-primary"}}).then((function(e){e.value&&(a.loading=!0,a.$axios.post(a.$store.state.baseUrl+"/api/applyNutrientTemplate",{id:t.id,node_address:a.model.node_address}).then((function(e){a.loading=!1,a.loadedTemplateId=t.id,a.loadedTemplateName=t.name,"template_applied"==e.data.status&&(a.closeBrowseTemplatesModal(),a.loadNutrients(),a.$notify({title:"Success",message:"Template applied",type:"success",verticalAlign:"top",horizontalAlign:"right"}))})))}))},clearNutrientTemplateModel:function(){this.currentMode="Add",this.template_model.id=null,this.template_model.poly1=0,this.template_model.poly2=0,this.template_model.lower_limit=0,this.template_model.upper_limit=0,this.template_model.metric="",this.template_model.soil_type="",this.template_model.crop_name="","undefined"!==typeof this.$refs["managetpl"]&&this.$refs["managetpl"].reset()},openNutrientTemplatesModal:function(){this.loadNutrientTemplates(),this.browseTemplatesModalVisible=!0},closeBrowseTemplatesModal:function(){this.browseTemplatesModalVisible=!1},openManageNutrientTemplateModal:function(){this.manageTemplateModalVisible=!0},closeManageNutrientTemplateModal:function(){this.clearNutrientTemplateModel(),this.manageTemplateModalVisible=!1},goToGraph:function(){this.$router.push({name:"nutrients_graph",params:{node_id:this.model.node_id,node_address:this.model.node_address,field_id:this.field_id,field_name:this.field_name,graph_type:this.model.graph_type,graph_start_date:this.model.graph_start_date}})}},created:function(){this.loadNutrients()}},g=h,f=a("2877"),y=Object(f["a"])(g,i,s,!1,null,null,null);t["default"]=y.exports}}]);
//# sourceMappingURL=chunk-ff04aacc.2b0ece80.js.map