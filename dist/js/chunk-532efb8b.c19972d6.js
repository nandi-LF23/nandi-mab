(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-532efb8b"],{"407a":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"map_container"},[s("FocusMenu",{ref:"focusmenu",on:{focusMenuChanged:e.toggleBurger},scopedSlots:e._u([{key:"header",fn:function(){return[s("div",{staticClass:"search_wrapper clearfix"},[s("b-form-input",{staticClass:"form-control-flush fields_search",attrs:{disabled:!e.visibleMarkers,placeholder:"Search..."},on:{input:function(t){return e.doTextSearch()}},model:{value:e.fieldNameSearch,callback:function(t){e.fieldNameSearch=t},expression:"fieldNameSearch"}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.fieldNameSearch,expression:"fieldNameSearch"}],staticClass:"fields_search_clear_btn",on:{click:function(t){e.fieldNameSearch="",e.filterFields()}}})],1),s("b-form-group",{staticClass:"type_filter_menu"},[s("b-form-checkbox-group",{staticStyle:{width:"100%"},attrs:{options:e.nodeFilterTypes,size:"sm",buttons:"","button-variant":"primary"},on:{change:e.filterNodeType,click:function(e){return e.stopPropagation(),e.preventDefault(),function(){}.apply(null,arguments)}},model:{value:e.nodeFilterType,callback:function(t){e.nodeFilterType=t},expression:"nodeFilterType"}})],1)]},proxy:!0}])},[e._l(e.markers,(function(t,i){return[t.visible?s("div",{key:e.nodeFilterType.join("")+e.infoFilterType.join("")+i,staticClass:"field_record",class:t.node_address==e.selectedNode?"field_record_selected":"",on:{click:function(s){return e.focusMarker(t)}}},[s("div",{staticClass:"field_name"},[e._v(e._s(t.field_name))]),s("div",{staticClass:"node_address"},[e._v(e._s(t.node_address))]),s("div",{staticClass:"last_reading_date",style:"color:"+e.calcLastReadingColor(t)},[e._v(e._s(t.date_time))]),"sm"==t.node_type&&t.status?s("div",{staticClass:"field_sm_status"},[e._v("Status: "+e._s(t.status)+"%")]):e._e(),s("div",{staticClass:"indicators"},["sm"==t.node_type&&t.status?s("SMStatusGraph",{attrs:{full:t.full,status:t.status,refill:t.refill,size:"35%",tooltip:"F: "+t.full+"%, S: "+t.status+"%, R: "+t.refill+"%",label:"S.M"},on:{clicked:function(s){return e.goToGraph(t)}}}):s("div",{staticStyle:{width:"35%"}}),s("BVIndicator",{attrs:{level:t.battLevel,size:"35%",charging:t.charging,tooltip:"Level: "+t.battLevel+"%"}})],1)]):e._e()]}))],2),s("MglMap",{attrs:{repaint:!0,mapboxGl:e.mapboxObj,accessToken:e.$store.state.mapBoxAccessToken,mapStyle:e.mapStyle,attributionControl:!1,center:e.startPos,logoPosition:"bottom-right"},on:{"update:mapStyle":function(t){e.mapStyle=t},"update:map-style":function(t){e.mapStyle=t},load:e.mapLoaded,zoom:e.scaleMarkers,zoomend:e.filterFields,dragend:e.filterFields}},[e._l(e.markers,(function(t){return[t.visible?s("MglMarker",{key:t.node_address,ref:t.node_address,refInFor:!0,attrs:{coordinates:t.position,anchor:"top"},on:{click:function(s){return e.toggleMarkerPopup(t)}}},[s("div",{staticClass:"field_marker",attrs:{slot:"marker"},slot:"marker"},[s("div",{staticClass:"marker",style:"color:"+e.calcMarkerIconColor(t,t.status,t.node_type)+"; transform:scale("+e.markerScale+"); transform-origin:top center;"+e.calcMarkerBorderColor(t)},["well"==t.node_type?[s("svg",{attrs:{"stroke-linejoin":"bevel","fill-rule":"evenodd",xmlns:"http://www.w3.org/2000/svg",overflow:"visible",width:"100%",height:"100%",viewBox:"0 0 165 187.5"}},[s("path",{attrs:{"stroke-width":"0",d:"M.001 187.5v-7.499h7.484v-52.499h7.482v-7.501h7.482V67.5H7.484v-7.499h14.965V39.002L7.484 45.001H0V30h7.484v.001l74.829-30 74.83 30h7.483v15.001h-7.484l-.001-.001-14.964-5.998.001 20.998h7.857v-.002h7.482V75H165v7.499h-7.483v.001h-7.482v-15h-7.857v52.501h7.482v7.501h7.483v52.499h7.482v7.499H.001zm119.728-59.998v-7.501h7.482V67.5h-14.967v7.501h-26.04v15h18.558l-7.484 30h-29.93l-7.483-30h18.857v-15h-26.34V67.5H37.416v52.501h7.482v7.501h74.831zM52.382 60.001v-7.499h59.862v7.499h14.967V33.002L82.313 15.001l-44.897 18v27h14.966z",fill:"currentColor",stroke:"white","font-family":"Times New Roman","font-size":"16"}})])]:"meter"==t.node_type?[s("svg",{attrs:{"stroke-linejoin":"bevel","fill-rule":"evenodd",xmlns:"http://www.w3.org/2000/svg",overflow:"visible",width:"100%",height:"100%",viewBox:"0 0 225 150"}},[s("path",{attrs:{"stroke-width":"0",d:"M43.746 105.001H22.499V120H0V29.999h22.499V45h21.246C55.326 18.519 81.762 0 112.498 0c30.735 0 57.171 18.519 68.752 45h21.249V29.999h22.499V120h-22.499v-14.999h-21.25C169.669 131.482 143.233 150 112.498 150c-30.736 0-57.172-18.518-68.752-44.999zM179.998 75c0-37.26-30.24-67.5-67.5-67.5-37.26 0-67.5 30.24-67.5 67.5 0 37.26 30.24 67.5 67.5 67.5 37.26 0 67.5-30.24 67.5-67.5zm-127.5 0c0-33.12 26.88-60 60-60 33.12 0 60 26.88 60 60 0 33.12-26.88 60-60 60-33.12 0-60-26.88-60-60zm37.5 22.5V82.501H74.999V97.5h14.999zm30-.001V82.5h-14.999v14.999h14.999zm30 0V82.5h-14.999v14.999h14.999zm.001-30V52.5H74.998v14.999h75.001z",fill:"currentColor",stroke:"white","font-family":"Times New Roman","font-size":"16"}})])]:"sm"==t.node_type?[s("svg",{attrs:{"stroke-width":".501","stroke-linejoin":"bevel","fill-rule":"evenodd",xmlns:"http://www.w3.org/2000/svg",overflow:"visible",width:"100%",height:"100%",viewBox:"0 0 90 187.5"}},[s("g",{attrs:{"stroke-linecap":"round",stroke:"none",fill:"none","font-size":"16"}},[s("path",{attrs:{d:"m37.499 187.5-15-15V45l-7.5-7.5V7.499H0V0h74.999v7.499H59.998v7.502h22.5v-7.5h7.501V37.5h-7.501V30h-22.5l.001 7.5-7.5 7.5v127.5l-15 15Z",fill:"currentColor"}}),s("path",{attrs:{d:"m7.177 124.653 15.222-1.48c.916 5.109 2.776 8.861 5.576 11.258 2.801 2.396 6.579 3.595 11.338 3.595 5.038 0 8.835-1.066 11.39-3.198 2.554-2.132 3.83-4.625 3.832-7.48-.002-1.831-.538-3.39-1.613-4.677-1.074-1.285-2.95-2.404-5.629-3.355-1.831-.635-6.008-1.762-12.527-3.383-8.386-2.079-14.27-4.635-17.653-7.665-4.757-4.263-7.135-9.461-7.135-15.592 0-3.946 1.119-7.637 3.356-11.072 2.237-3.437 5.462-6.053 9.673-7.85 4.211-1.796 9.294-2.695 15.247-2.695 9.726 0 17.046 2.132 21.962 6.395 4.915 4.264 7.496 9.954 7.743 17.072l-15.645.687c-.669-3.981-2.104-6.844-4.307-8.588-2.202-1.744-5.506-2.617-9.911-2.617-4.544 0-8.104.935-10.677 2.802-1.657 1.198-2.483 2.801-2.483 4.81 0 1.832.774 3.4 2.325 4.704 1.973 1.655 6.766 3.381 14.376 5.179 7.612 1.797 13.241 3.656 16.888 5.576 3.647 1.922 6.501 4.547 8.562 7.875 2.061 3.33 3.092 7.444 3.092 12.342 0 4.439-1.232 8.598-3.699 12.474-2.466 3.877-5.956 6.757-10.466 8.641-4.51 1.885-10.13 2.828-16.861 2.828-9.796 0-17.319-2.264-22.569-6.792-5.25-4.527-8.386-11.126-9.407-19.794Z","fill-rule":"nonzero","stroke-linejoin":"round","stroke-width":".375",fill:"#fff","stroke-miterlimit":"79.84"}})])])]:"nut"==t.node_type?[s("svg",{attrs:{"stroke-width":".501","stroke-linejoin":"bevel","fill-rule":"evenodd",xmlns:"http://www.w3.org/2000/svg",overflow:"visible",width:"100%",height:"100%",viewBox:"0 0 90 187.5"}},[s("g",{attrs:{"stroke-linecap":"round",stroke:"none",fill:"none","font-size":"16"}},[s("path",{attrs:{d:"m37.499 187.5-15-15V45l-7.5-7.5V7.499H0V0h74.999v7.499H59.998v7.502h22.5v-7.5h7.501V37.5h-7.501V30h-22.5l.001 7.5-7.5 7.5v127.5l-15 15Z",fill:"currentColor"}}),s("path",{attrs:{d:"M9.001 147.09V75.155h14.132l29.441 48.039V75.155h13.493v71.935H51.494l-28.999-46.909v46.909H9.001Z","fill-rule":"nonzero","stroke-linejoin":"round","stroke-width":".375",fill:"#fff","stroke-miterlimit":"79.84"}})])])]:e._e()],2)]),s("MglPopup",{attrs:{closeButton:!0,anchor:"bottom",maxWidth:"auto",closeOnClick:!1},on:{close:e.popupClosed}},[s("div",{staticClass:"marker_info_wrap"},["well"==t.node_type?s("div",{staticClass:"pump_control"},[s("div",{staticClass:"field_name"},[e._v(e._s(t.field_name))]),s("div",{staticClass:"node_address"},[e._v(e._s(t.node_address))]),s("div",{staticClass:"last_reading_date"},[e._v(e._s(t.date_time))]),s("div",{staticClass:"pump_control_inner"},[s("b-form-checkbox",{attrs:{disabled:!e.userCan("Toggle","Well Controls",t.id,"O"),switch:"",size:"lg"},on:{change:function(s){return e.togglePump(t)}},model:{value:t.pump_status,callback:function(s){e.$set(t,"pump_status",s)},expression:"marker.pump_status"}},[e._v("\n                  "+e._s(t.pump_status?"Pump: On":"Pump: Off")+"\n                ")])],1)]):e._e(),"meter"==t.node_type?s("div",{staticClass:"meter_control"},[s("div",{staticClass:"field_name"},[e._v(e._s(t.field_name))]),s("div",{staticClass:"node_address"},[e._v(e._s(t.node_address))]),s("div",{staticClass:"last_reading_date"},[e._v(e._s(t.date_time))]),s("MeterReading",{attrs:{reading:t.last_reading,suffix:e.formatUOM(t.measurement_type)}})],1):e._e(),"sm"==t.node_type?s("div",{staticClass:"sm_control"},[e._l(e.markers,(function(i,a){return[i.base_node_address==t.base_node_address&&"sm"==i.node_type&&"1970-01-01 00:00:00"!=i.date_time&&Math.abs(i.latt-t.latt)<1e-5&&Math.abs(i.lng-t.lng)<1e-5?s("div",{key:a,staticClass:"sm_control_item",class:i.node_address==e.selectedNode?"selected_node":""},[s("div",{staticClass:"field_name"},[e._v(e._s(i.field_name))]),s("div",{staticClass:"node_address"},[e._v(e._s(i.node_address))]),s("div",{staticClass:"last_reading_date"},[e._v(e._s(i.date_time))]),s("div",{staticClass:"marker_info_horz"},[e.infoFilterType.includes("sm_status")&&i.status?s("SMStatusIndicator",{attrs:{size:"5em",full:i.full,status:i.status,refill:i.refill,accordion:!0,showNumbers:!0}}):e._e(),e.infoFilterType.includes("sm_levels")&&i.sm1?s("SMLevelsIndicator",{attrs:{size:"5em",tooltip:"S.M Levels",sm1:i.sm1,sm2:i.sm2,sm3:i.sm3,sm4:i.sm4,sm5:i.sm5,sm6:i.sm6,sm7:i.sm7,sm8:i.sm8,sm9:i.sm9,sm10:i.sm10,sm11:i.sm11,sm12:i.sm12,sm13:i.sm13,sm14:i.sm14,sm15:i.sm15}}):e._e(),e.infoFilterType.includes("soil_temp")&&i.t1?s("SoilTempIndicator",{attrs:{size:"5em",tooltip:"Soil Temperatures",t1:i.t1,t2:i.t2,t3:i.t3,t4:i.t4,t5:i.t5,t6:i.t6,t7:i.t7,t8:i.t8,t9:i.t9,t10:i.t10,t11:i.t11,t12:i.t12,t13:i.t13,t14:i.t14,t15:i.t15,suffix:e.$store.getters.getUOMEntity,uom:e.$store.getters.getUOM}}):e._e()],1)]):e._e()]}))],2):e._e(),"nut"==t.node_type?s("div",{staticClass:"sm_control"},[e._l(e.markers,(function(i,a){return[i.base_node_address==t.base_node_address&&"nut"==i.node_type&&"1970-01-01 00:00:00"!=i.date_time&&Math.abs(i.latt-t.latt)<1e-4&&Math.abs(i.lng-t.lng)<1e-4?s("div",{key:a,staticClass:"sm_control_item",class:i.node_address==e.selectedNode?"selected_node":""},[s("div",{staticClass:"field_name"},[e._v(e._s(i.field_name))]),s("div",{staticClass:"node_address"},[e._v(e._s(i.node_address))]),s("div",{staticClass:"last_reading_date"},[e._v(e._s(i.date_time))]),s("div",{staticClass:"marker_info_horz"})]):e._e()]}))],2):e._e()])])],1):e._e()]}))],2),s("b-form-group",{staticClass:"info_filter_menu"},[s("b-form-checkbox-group",{attrs:{options:e.infoFilterTypes,stacked:"",buttons:"","button-variant":"primary",size:"sm"},on:{change:e.filterNodeType,click:function(e){return e.stopPropagation(),e.preventDefault(),function(){}.apply(null,arguments)}},model:{value:e.infoFilterType,callback:function(t){e.infoFilterType=t},expression:"infoFilterType"}})],1),s("base-button",{staticClass:"legend_btn",attrs:{icon:"",type:"primary",size:"sm"},on:{click:function(t){return e.toggleLegendModal()}}},[s("span",{staticClass:"cirle"},[e._v("?")])]),s("b-modal",{attrs:{"dialog-class":"legend_modal",centered:"","hide-backdrop":"","no-close-on-esc":"","no-close-on-backdrop":""},scopedSlots:e._u([{key:"modal-header",fn:function(t){t.close;return[s("h6",{staticClass:"modal-title",attrs:{slot:"header",id:"modal-title-default"},slot:"header"},[e._v("Legend")])]}},{key:"default",fn:function(t){t.hide;return[s("div",{staticClass:"legend_box"},[s("b-row",[s("b-col",{attrs:{md:""}},[s("h3",[e._v("Soil Moisture Probes")]),s("div",{staticClass:"line"},[s("span",{staticClass:"licon blue",domProps:{innerHTML:e._s(e.renderSvgIcon("sm"))}}),e._v(" 75%+   Moisture ")]),s("div",{staticClass:"line"},[s("span",{staticClass:"licon green",domProps:{innerHTML:e._s(e.renderSvgIcon("sm"))}}),e._v(" 50-75% Moisture ")]),s("div",{staticClass:"line"},[s("span",{staticClass:"licon orange",domProps:{innerHTML:e._s(e.renderSvgIcon("sm"))}}),e._v(" 25-50% Moisture ")]),s("div",{staticClass:"line"},[s("span",{staticClass:"licon red",domProps:{innerHTML:e._s(e.renderSvgIcon("sm"))}}),e._v(" 0-25%  Moisture ")])]),s("b-col",{attrs:{md:""}},[s("h3",[e._v("Nutrient Probes")]),s("div",{staticClass:"line"},[s("span",{staticClass:"licon blue",domProps:{innerHTML:e._s(e.renderSvgIcon("nut"))}}),e._v(" Coming Soon ")])])],1),s("b-row",[s("b-col",{attrs:{md:""}},[s("h3",[e._v("Wells")]),s("div",{staticClass:"line"},[s("span",{staticClass:"licon green",domProps:{innerHTML:e._s(e.renderSvgIcon("well"))}}),e._v(" Pump Running ")]),s("div",{staticClass:"line"},[s("span",{staticClass:"licon red",domProps:{innerHTML:e._s(e.renderSvgIcon("well"))}}),e._v(" Pump Idle ")])])],1),s("b-row",[s("b-col",{attrs:{md:""}},[s("h3",[e._v("Meters")]),s("div",{staticClass:"line"},[s("span",{staticClass:"licon blue",domProps:{innerHTML:e._s(e.renderSvgIcon("meter"))}}),e._v(" Water Meter ")])])],1)],1)]}},{key:"modal-footer",fn:function(t){t.ok,t.cancel,t.hide;return[s("base-button",{staticClass:"ml-auto",attrs:{type:"link",variant:"outline-primary"},on:{click:function(t){return e.toggleLegendModal()}}},[e._v("Close")])]}}]),model:{value:e.showLegendModal,callback:function(t){e.showLegendModal=t},expression:"showLegendModal"}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"mab_spinner light center large"})],1)},a=[],o=(s("6762"),s("2fdb"),s("ac6a"),s("e192")),n=s.n(o),r=s("baf6"),l=s("5e6e"),d=s("9cdb"),c=s("6a71"),u=s("afcf"),m=s("d358"),h=s("1a19"),p=s("2e9b"),f=s("e839"),v=s("6682"),_=s("8fe0"),g=s("3d20"),b=s.n(g),k={mixins:[_["a"]],components:{MglMap:l["c"],MglMarker:l["d"],MglPopup:l["f"],FocusMenu:d["a"],BVIndicator:c["a"],SMStatusGraph:u["a"],SMStatusIndicator:m["a"],SMLevelsIndicator:h["a"],SoilTempIndicator:p["a"],MeterReading:f["a"]},data:function(){return{loading:!1,startPos:[0,0],startZoom:3,mapboxObj:null,map:null,markers:[],markerScale:0,toggleVisible:0,visibleMarkers:0,visiblePopups:[],fieldNameSearch:"",mapActions:null,mapStyle:"",fieldsData:null,bounds:null,showLegendModal:!1,refreshTimer:null,bInitialQuery:!0,selectedNode:null,infoFilterType:["sm_status","labels"],infoFilterTypes:[{text:"S.M. Status",value:"sm_status"},{text:"S.M. Levels",value:"sm_levels"},{text:"Soil Temp",value:"soil_temp"},{text:"Rain Gauge",value:"rain_gauge"},{text:"Wells",value:"wells"},{text:"Weather S.",value:"weather_s"},{text:"Labels",value:"labels"}],nodeFilterType:["sm","nut","well","meter"],nodeFilterTypes:[{text:"S.M",value:"sm"},{text:"Nutrient",value:"nut"},{text:"Well",value:"well"},{text:"Meter",value:"meter"}]}},created:function(){},mounted:function(){this.mapStyle=r["a"]},methods:{mapLoaded:function(e){e.map._isVue=!0,this.map=e.map,n.a._isVue=!0,this.mapboxObj=n.a,this.mapActions=e.component.actions,this.loadFieldsData()},loadFieldsData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loading=!0,this.$axios.post("/api/map_data",{is_refresh:t}).then((function(t){e.loading=!1,t.data&&t.data.nodes&&t.data.nodes.length?(e.fieldsData=t.data.nodes,e.populateMarkers(),e.calcBounds(),e.setupMap(),e.bInitialQuery?(e.$store.state.mapSettingsCache.visited?e.focusMarkersFly():e.focusMarkersEase(),e.bInitialQuery=!1):e.doTextSearch()):b.a.fire({title:"No nodes found",text:"Please add one or more nodes.",showCancelButton:!1,confirmButtonText:"OK",buttonsStyling:!1,customClass:{cancelButton:"btn btn-outline-primary",confirmButton:"btn btn-primary"}})})).catch((function(t){e.loading=!1}))},setupMap:function(){document.querySelector(".sidenav-toggler").addEventListener("click",this.resizeTheMap),this.scaleMarkers()},resizeTheMap:function(){var e=this;setTimeout((function(){e.map.resize()}),500)},scaleMarkers:function(){this.markerScale=this.map.getZoom()/22},saveMapSettings:function(){var e={visited:!0,zoom:this.map.getZoom(),center:this.map.getCenter(),infoFilterType:this.infoFilterType,nodeFilterType:this.nodeFilterType};this.$store.dispatch("save_map_settings",e)},focusMarkersEase:function(){var e=this;this.mapActions.easeTo({center:this.bounds.getCenter(),duration:2e3,animate:!0,easing:v["a"].easeInOutQuad,essential:!0}).then((function(){e.$store.state.mapSettingsCache.infoFilterType&&e.$store.state.mapSettingsCache.nodeFilterType&&(e.infoFilterType=e.$store.state.mapSettingsCache.infoFilterType,e.nodeFilterType=e.$store.state.mapSettingsCache.nodeFilterType),e.$refs.focusmenu.expandMenu(),e.filterFields()}))},focusMarkersFly:function(){var e=this;this.mapActions.flyTo({zoom:this.$store.state.mapSettingsCache.zoom,center:this.$store.state.mapSettingsCache.center,duration:2e3,animate:!0,easing:v["a"].easeInOutQuad,essential:!0}).then((function(){e.$store.state.mapSettingsCache.infoFilterType&&e.$store.state.mapSettingsCache.nodeFilterType&&(e.infoFilterType=e.$store.state.mapSettingsCache.infoFilterType,e.nodeFilterType=e.$store.state.mapSettingsCache.nodeFilterType),e.$refs.focusmenu.expandMenu(),e.filterFields()}))},toggleMarkerPopup:function(e){var t=this;"undefined"===typeof this.visiblePopups[e.node_address]||!1===this.visiblePopups[e.node_address]?(this.visiblePopups[e.node_address]=!0,this.selectedNode=e.node_address):!0===this.visiblePopups[e.node_address]&&(this.visiblePopups[e.node_address]=!1,this.selectedNode=null,setTimeout((function(){t.$refs[e.node_address][0].marker._popup.remove()}),200))},popupClosed:function(){this.selectedNode=null},filterNodeType:function(){this.fieldNameSearch="",this.filterLabels(),this.filterFields()},filterLabels:function(){var e=this;this.map.getStyle().layers.forEach((function(t,s){(t.id.includes("-label")||t.id.includes("-shield"))&&(e.infoFilterType.includes("labels")?e.map.setLayoutProperty(t.id,"visibility","visible"):e.map.setLayoutProperty(t.id,"visibility","none"))}))},filterFields:function(e){var t=this;if(""==this.fieldNameSearch){var s=this.map.getBounds();this.visibleMarkers=0,this.markers.forEach((function(e,i){t.markers[i].visible=!(!t.nodeFilterType.includes(e.node_type)||!s.contains(e.position)),t.markers[i].visible&&t.visibleMarkers++}))}this.saveMapSettings(),document.querySelector(".focus_menu .items_section").scrollTop=0},populateMarkers:function(){var e=this;this.fieldsData.length&&(this.markers=[],this.fieldsData.forEach((function(t,s){t.lng&&t.latt&&e.markers.push({id:t.id,link:"/soil_moisture/graph/"+t.node_address,status:t.status,full:t.full,refill:t.refill,date_time:t.date_time,date_diff:t.date_diff,node_id:t.node_id,node_address:t.node_address,base_node_address:t.base_node_address,field_id:t.field_id,field_name:t.field_name,graph_type:t.graph_type,graph_start_date:t.graph_start_date,node_type:e.formatNodeType(t.node_type),position:[parseFloat(t.lng),parseFloat(t.latt)],latt:parseFloat(t.lng),lng:parseFloat(t.latt),battLevel:t.bp,pump_status:!1,visible:!0,sm1:t.sm1,sm2:t.sm2,sm3:t.sm3,sm4:t.sm4,sm5:t.sm5,sm6:t.sm6,sm7:t.sm7,sm8:t.sm8,sm9:t.sm9,sm10:t.sm10,sm11:t.sm11,sm12:t.sm12,sm13:t.sm13,sm14:t.sm14,sm15:t.sm15,t1:t.t1,t2:t.t2,t3:t.t3,t4:t.t4,t5:t.t5,t6:t.t6,t7:t.t7,t8:t.t8,t9:t.t9,t10:t.t10,t11:t.t11,t12:t.t12,t13:t.t13,t14:t.t14,t15:t.t15,measurement_type:t.measurement_type,last_reading:t.pulse_1?t.pulse_1:"00000000",charging:t.charging,nutrient_lower:"nutrient_lower"in t?t.nutrient_lower:null,nutrient_upper:"nutrient_upper"in t?t.nutrient_upper:null,nutrient_gauge:"nutrient_gauge"in t?t.nutrient_gauge:null,nutrient_avg:"nutrient_avg"in t?t.nutrient_avg:null,marker_outline_color:t.marker_outline_color})})))},toggleBurger:function(){document.querySelector(".custom-nav-toggler").className=this.toggleVisible?"custom-nav-toggler visible":"custom-nav-toggler hidden",this.toggleVisible=!this.toggleVisible},doTextSearch:function(){var e=this;if(""!=this.fieldNameSearch){var t=0;this.markers.forEach((function(s,i){e.nodeFilterType.includes(s.node_type)&&(s.field_name.toLowerCase().indexOf(e.fieldNameSearch.toLowerCase())>-1||s.node_address.toLowerCase().indexOf(e.fieldNameSearch.toLowerCase())>-1)?(e.markers[i].visible=!0,t++):e.markers[i].visible=!1})),t&&this.markers.length&&(this.calcBounds(),this.map.fitBounds(this.bounds,{linear:!0,maxZoom:13,duration:2e3,animate:!0,padding:100,easing:v["a"].easeInOutQuad,essential:!0}))}else this.showAllMarkers(),this.filterFields()},focusMarker:function(e){var t=this;e.node_address==this.selectedNode?this.selectedNode=null:this.selectedNode=e.node_address,this.mapActions.flyTo({center:e.position,duration:1e3,animate:!0,easing:v["a"].easeInOutQuad,essential:!0}).then((function(){t.$refs[e.node_address][0].togglePopup()}))},showAllMarkers:function(){var e=this;this.markers.forEach((function(t,s){e.markers[s].visible=!0})),this.visibleMarkers=this.markers.length},calcBounds:function(){var e=this,t=new this.mapboxObj.LngLatBounds,s=49.3457868,i=24.7433195,a=-124.7844079,o=-66.9513812;this.markers.forEach((function(n,r){e.markers[r].visible&&e.markers[r].position[0]>a&&e.markers[r].position[0]<o&&e.markers[r].position[1]>i&&e.markers[r].position[1]<s&&t.extend(e.markers[r].position)})),this.bounds=t},calcMarkerIconColor:function(e,t,s){if("sm"==s){var i="white";return i=t>=0&&t<25?"red":t>=25&&t<50?"orange":t>=50&&t<75?"green":t>=75&&t<=100?"blue":"black",e.date_diff.days>=3&&(i="black"),i}return"well"==s?"red":"meter"==s?"blue":"black"},calcMarkerBorderColor:function(e){return"border: 2px solid "+e.marker_outline_color},formatNodeType:function(e){return"Soil Moisture"==e?"sm":"Nutrients"==e?"nut":"Wells"==e?"well":"Water Meter"==e?"meter":"sm"},formatUOM:function(e){return 1==e?"cm3":2==e?"gal":""},togglePump:function(e){var t=this;this.loading=!0,e.node_address&&this.$axios.get("/api/toggleWM/"+e.node_address).then((function(e){t.loading=!1,t.$notify({title:"Status",message:"Pump Toggled",type:"info",verticalAlign:"top",horizontalAlign:"right"})}))},toggleLegendModal:function(){this.showLegendModal=!this.showLegendModal},renderSvgIcon:function(e){return"well"==e?'<svg stroke-linejoin="bevel" fill-rule="evenodd" xmlns="http://www.w3.org/2000/svg" overflow="visible" width="100%" height="100%" viewBox="0 0 165 187.5"><path stroke-width="0" d="M.001 187.5v-7.499h7.484v-52.499h7.482v-7.501h7.482V67.5H7.484v-7.499h14.965V39.002L7.484 45.001H0V30h7.484v.001l74.829-30 74.83 30h7.483v15.001h-7.484l-.001-.001-14.964-5.998.001 20.998h7.857v-.002h7.482V75H165v7.499h-7.483v.001h-7.482v-15h-7.857v52.501h7.482v7.501h7.483v52.499h7.482v7.499H.001zm119.728-59.998v-7.501h7.482V67.5h-14.967v7.501h-26.04v15h18.558l-7.484 30h-29.93l-7.483-30h18.857v-15h-26.34V67.5H37.416v52.501h7.482v7.501h74.831zM52.382 60.001v-7.499h59.862v7.499h14.967V33.002L82.313 15.001l-44.897 18v27h14.966z" fill="currentColor" stroke="white" font-family="Times New Roman" font-size="16"/></svg>':"sm"==e?'<svg stroke-width=".501" stroke-linejoin="bevel" fill-rule="evenodd" xmlns="http://www.w3.org/2000/svg" overflow="visible" width="100%" height="100%" viewBox="0 0 90 187.5"><g stroke-linecap="round" stroke="none" fill="none" font-size="16"><path d="m37.499 187.5-15-15V45l-7.5-7.5V7.499H0V0h74.999v7.499H59.998v7.502h22.5v-7.5h7.501V37.5h-7.501V30h-22.5l.001 7.5-7.5 7.5v127.5l-15 15Z" fill="currentColor"/><path d="m7.177 124.653 15.222-1.48c.916 5.109 2.776 8.861 5.576 11.258 2.801 2.396 6.579 3.595 11.338 3.595 5.038 0 8.835-1.066 11.39-3.198 2.554-2.132 3.83-4.625 3.832-7.48-.002-1.831-.538-3.39-1.613-4.677-1.074-1.285-2.95-2.404-5.629-3.355-1.831-.635-6.008-1.762-12.527-3.383-8.386-2.079-14.27-4.635-17.653-7.665-4.757-4.263-7.135-9.461-7.135-15.592 0-3.946 1.119-7.637 3.356-11.072 2.237-3.437 5.462-6.053 9.673-7.85 4.211-1.796 9.294-2.695 15.247-2.695 9.726 0 17.046 2.132 21.962 6.395 4.915 4.264 7.496 9.954 7.743 17.072l-15.645.687c-.669-3.981-2.104-6.844-4.307-8.588-2.202-1.744-5.506-2.617-9.911-2.617-4.544 0-8.104.935-10.677 2.802-1.657 1.198-2.483 2.801-2.483 4.81 0 1.832.774 3.4 2.325 4.704 1.973 1.655 6.766 3.381 14.376 5.179 7.612 1.797 13.241 3.656 16.888 5.576 3.647 1.922 6.501 4.547 8.562 7.875 2.061 3.33 3.092 7.444 3.092 12.342 0 4.439-1.232 8.598-3.699 12.474-2.466 3.877-5.956 6.757-10.466 8.641-4.51 1.885-10.13 2.828-16.861 2.828-9.796 0-17.319-2.264-22.569-6.792-5.25-4.527-8.386-11.126-9.407-19.794Z" fill-rule="nonzero" stroke-linejoin="round" stroke-width=".375" fill="#fff" stroke-miterlimit="79.84"/></g></svg>':"nut"==e?'<svg stroke-width=".501" stroke-linejoin="bevel" fill-rule="evenodd" xmlns="http://www.w3.org/2000/svg" overflow="visible" width="100%" height="100%" viewBox="0 0 90 187.5"><g stroke-linecap="round" stroke="none" fill="none" font-size="16"><path d="m37.499 187.5-15-15V45l-7.5-7.5V7.499H0V0h74.999v7.499H59.998v7.502h22.5v-7.5h7.501V37.5h-7.501V30h-22.5l.001 7.5-7.5 7.5v127.5l-15 15Z" fill="currentColor"/><path d="M9.001 147.09V75.155h14.132l29.441 48.039V75.155h13.493v71.935H51.494l-28.999-46.909v46.909H9.001Z" fill-rule="nonzero" stroke-linejoin="round" stroke-width=".375" fill="#fff" stroke-miterlimit="79.84"/></g></svg>':"meter"==e?'<svg stroke-linejoin="bevel" fill-rule="evenodd" xmlns="http://www.w3.org/2000/svg" overflow="visible" width="100%" height="100%" viewBox="0 0 225 150"><path stroke-width="0" d="M43.746 105.001H22.499V120H0V29.999h22.499V45h21.246C55.326 18.519 81.762 0 112.498 0c30.735 0 57.171 18.519 68.752 45h21.249V29.999h22.499V120h-22.499v-14.999h-21.25C169.669 131.482 143.233 150 112.498 150c-30.736 0-57.172-18.518-68.752-44.999zM179.998 75c0-37.26-30.24-67.5-67.5-67.5-37.26 0-67.5 30.24-67.5 67.5 0 37.26 30.24 67.5 67.5 67.5 37.26 0 67.5-30.24 67.5-67.5zm-127.5 0c0-33.12 26.88-60 60-60 33.12 0 60 26.88 60 60 0 33.12-26.88 60-60 60-33.12 0-60-26.88-60-60zm37.5 22.5V82.501H74.999V97.5h14.999zm30-.001V82.5h-14.999v14.999h14.999zm30 0V82.5h-14.999v14.999h14.999zm.001-30V52.5H74.998v14.999h75.001z" fill="currentColor" stroke="white" font-family="Times New Roman" font-size="16"/></svg>':void 0},goToGraph:function(e){this.userCan("Graph","Soil Moisture",e.node_id,"O")&&this.$router.push({name:"soil_moisture_graph",params:{node_address:e.node_address}})}},beforeRouteLeave:function(e,t,s){s()}},w=k,y=(s("434c"),s("2877")),M=Object(y["a"])(w,i,a,!1,null,"d72bed0e",null);t["default"]=M.exports},"434c":function(e,t,s){"use strict";s("a3bf")},a3bf:function(e,t,s){}}]);
//# sourceMappingURL=chunk-532efb8b.c19972d6.js.map