(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d7522f0"],{"016f":function(e,t,s){},"108c":function(e,t,s){"use strict";s.r(t);var a,l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[s("base-header",{staticClass:"pb-6",attrs:{type:"roles"}},[s("b-row",{staticClass:"py-4",attrs:{"align-v":"center"}},[s("b-col",[s("h6",{directives:[{name:"show",rawName:"v-show",value:e.company_name&&e.role_model.role_name,expression:"company_name && role_model.role_name"}],staticClass:"h2 text-white d-inline-block mb-0 mr-5"},[e._v("\n          "+e._s("Role Management - "+e.company_name+" - "+e.role_model.role_name)+"\n        ")]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"mab_spinner light right"})])],1)],1),s("div",{staticClass:"container-fluid mt--6"},[s("b-modal",{attrs:{centered:"","no-close-on-esc":"","no-close-on-backdrop":"",size:"lg"},scopedSlots:e._u([{key:"modal-header",fn:function(t){t.close;return[s("h6",{staticClass:"modal-title"},[e._v("Security Templates")])]}},{key:"default",fn:function(t){t.hide;return[s("b-row",{staticClass:"nomargin"},[s("b-col",[s("b-form-select",{model:{value:e.perPage,callback:function(t){e.perPage=t},expression:"perPage"}},[s("b-form-select-option",{attrs:{value:5}},[e._v("5")]),s("b-form-select-option",{attrs:{value:10,selected:""}},[e._v("10")]),s("b-form-select-option",{attrs:{value:25}},[e._v("25")]),s("b-form-select-option",{attrs:{value:50}},[e._v("50")])],1)],1),s("b-col",{attrs:{md:""}}),s("b-col",[s("base-input",{attrs:{"prepend-icon":"fas fa-search",placeholder:"Search..."},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}})],1)],1),s("b-row",[s("b-col",{attrs:{md:""}},[s("b-table",{attrs:{striped:"",bordered:"",outlined:"",small:"",stacked:"md",responsive:"","show-empty":"","primary-key":"id","per-page":e.perPage,"current-page":e.currentPage,filter:e.filterText,fields:e.templateTableColumns,items:e.loadedTemplates,busy:e.loading},on:{"update:busy":function(t){e.loading=t}},scopedSlots:e._u([{key:"cell()",fn:function(t){return[e._v(e._s(t.value))]}},{key:"cell(actions)",fn:function(t){return[s("div",{staticClass:"d-flex justify-content-center"},[s("b-button",{staticClass:"btn",attrs:{disabled:!e.userCan("Edit","Security Templates",t.item.id,"O")||e.loading,variant:"outline-primary",size:"sm",icon:""},on:{click:function(s){return e.confirmSecurityTemplateApply(t.index,t.item)}}},[e._v("\n                  Apply Template\n                  ")]),s("b-button",{staticClass:"btn",attrs:{disabled:!e.userCan("Delete","Security Templates",t.item.id,"O")||e.loading,variant:"outline-primary",size:"sm",icon:""},on:{click:function(s){return e.confirmSecurityTemplateRemoval(t.index,t.item)}}},[e._v("\n                  Remove\n                  ")])],1)]}},{key:"table-busy",fn:function(){return[s("div",{staticClass:"text-center"},[s("div",{staticClass:"mab_spinner"})])]},proxy:!0},{key:"empty",fn:function(t){return[s("div",{staticClass:"text-center"},[e._v("\n                  No templates found\n                ")])]}}],null,!0)})],1)],1),s("b-row",[s("b-col",{attrs:{md:""}},[e._v("\n            Showing "+e._s(Math.min(1+e.perPage*(e.currentPage-1),e.totalRows))+" to "+e._s(Math.min(e.perPage*(e.currentPage-1)+e.perPage,e.totalRows))+" of "+e._s(e.totalRows)+" templates\n          ")]),s("b-col",{attrs:{md:""}},[s("b-pagination",{attrs:{"total-rows":e.totalRows,"per-page":e.perPage,align:"right"},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1)],1)]}},{key:"modal-footer",fn:function(t){t.ok,t.cancel,t.hide;return[s("b-button",{staticClass:"ml-auto",attrs:{variant:"outline-primary"},on:{click:e.closeBrowseTemplatesModal}},[e._v("\n          Close\n        ")])]}}]),model:{value:e.browseTemplatesModalVisible,callback:function(t){e.browseTemplatesModalVisible=t},expression:"browseTemplatesModalVisible"}}),s("b-modal",{attrs:{centered:"","no-close-on-esc":"","no-close-on-backdrop":""},scopedSlots:e._u([{key:"modal-header",fn:function(t){t.close;return[s("h6",{staticClass:"modal-title"},[e._v("Save Security Template")])]}},{key:"default",fn:function(t){t.hide;return[s("validation-observer",{ref:"savetpl",attrs:{slim:""}},[s("base-input",{attrs:{label:"Template Name",name:"Template Name",rules:"required",vid:"template_name",placeholder:"Template Name"},model:{value:e.saveTemplateName,callback:function(t){e.saveTemplateName=t},expression:"saveTemplateName"}})],1),s("b-row",[s("b-col",[e._v("\n          "+e._s(e.templateSaveStatus)+"\n          ")])],1)]}},{key:"modal-footer",fn:function(t){t.ok,t.cancel,t.hide;return[s("b-button",{staticClass:"ml-auto",attrs:{variant:"outline-primary"},on:{click:e.closeSaveTemplatesModal}},[e._v("\n          Close\n        ")]),s("b-button",{attrs:{variant:"primary",disabled:!e.saveTemplateName},on:{click:e.saveSecurityTemplate}},[e._v("\n          Save\n        ")])]}}]),model:{value:e.saveTemplatesModalVisible,callback:function(t){e.saveTemplatesModalVisible=t},expression:"saveTemplatesModalVisible"}}),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("card",{attrs:{"body-classes":"px-0 py-0"}},[s("template",{slot:"header"},[s("h3",{staticClass:"mb-0"},[e._v("Role Details")])]),s("div",{staticClass:"card-body"},[s("validation-observer",{ref:"form",attrs:{slim:""}},[s("form",{attrs:{role:"form"},on:{submit:function(e){return e.preventDefault(),function(){return!1}.apply(null,arguments)}}},[s("b-row",[s("b-col",{attrs:{md:""}},[s("base-input",{attrs:{name:"role_name",rules:"required",label:"Name",placeholder:"Name",vid:"role_name"},on:{change:e.syncFields},model:{value:e.role_model.role_name,callback:function(t){e.$set(e.role_model,"role_name",t)},expression:"role_model.role_name"}})],1)],1)],1)])],1)],2),s("card",{attrs:{"body-classes":"px-0 py-0"}},[s("template",{slot:"header"},[s("h3",{staticClass:"mb-0"},[e._v("Role Members "),s("b-badge",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",modifiers:{hover:!0,top:!0}}],attrs:{title:"Members of this role"}},[e._v(e._s(e.members.length))])],1)]),s("div",{staticClass:"card-body"},[s("b-row",[s("b-col",{attrs:{md:""}},e._l(e.members,(function(t,a){return s("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",modifiers:{hover:!0,top:!0}}],key:a,staticClass:"mb-2",attrs:{to:"/users_manage/edit/"+t.label,disabled:!e.userCan("Edit","Users",t.id,"O"),variant:"success",title:"Edit "+t.label,size:"sm"}},[e._v("\n                  "+e._s(t.label)+"\n                ")])})),1)],1)],1)],2),s("card",{attrs:{"body-classes":"px-0 py-0"}},[s("template",{slot:"header"},[s("h3",{staticClass:"mb-2"},[e._v("Role Permissions")]),s("b-row",[s("b-col",{attrs:{md:""}},[s("base-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",modifiers:{hover:!0,top:!0}}],staticClass:"btn",attrs:{disabled:!e.userCan("View","Security Templates")||e.loading,type:"primary",size:"sm",title:"Load a security template for this role. Warning: All existing role permissions would be replaced.",icon:""},on:{click:e.showBrowseTemplatesModal}},[e._v("\n                  Load Template\n                ")]),s("base-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",modifiers:{hover:!0,top:!0}}],staticClass:"btn",attrs:{disabled:!e.userCan("Add","Security Templates")||!e.userCan("Edit","Security Templates")||!e.security_rules||e.loading,type:"primary",size:"sm",title:"Save the below role permissions as a reusable template (to apply to other roles).",icon:""},on:{click:e.showSaveTemplatesModal}},[e._v("\n                  Save Template\n                ")])],1)],1)],1),s("div",{staticClass:"card-body"},[s("validation-observer",{ref:"updaterules",attrs:{slim:""}},[e.security_rules&&e.security_rules.length?[e._l(e.security_rules,(function(t){return[s("b-row",{key:t.id,attrs:{"align-v":"center"}},[s("b-col",{attrs:{md:""}},[s("base-input",{attrs:{label:"Module",name:"module",rules:"required",vid:"subsystem"}},[s("el-select",{attrs:{disabled:"","value-key":"id",filterable:"",placeholder:"Choose"},on:{change:function(s){return e.filterChanges("subsystem",t)}},model:{value:t.subsystem,callback:function(s){e.$set(t,"subsystem",s)},expression:"rule.subsystem"}},e._l(e.subsystem_meta,(function(e){return s("el-option",{key:e.id,attrs:{label:e.subsystem_name,value:e}})})),1)],1)],1),s("b-col",{attrs:{md:""}},[s("base-input",{attrs:{label:"Permissions",name:"permissions",rules:"required",vid:"permissions"}},[s("el-select",{attrs:{disabled:!t.subsystem,"value-key":"id",multiple:"",filterable:"",placeholder:"Choose"},on:{change:function(s){return e.filterChanges("permissions",t)}},model:{value:t.permissions,callback:function(s){e.$set(t,"permissions",s)},expression:"rule.permissions"}},[t&&t.subsystem&&t.subsystem.id?e._l(e.subsystem_meta[t.subsystem.id.toString()].permissions,(function(e){return s("el-option",{key:e.id,attrs:{label:e.permission_name,value:e}})})):e._e()],2)],1)],1),s("b-col",{attrs:{md:""}},[s("base-input",{attrs:{label:"Limits",disabled:!t.permissions.length}},[s("el-select",{attrs:{disabled:!t.permissions.length,"value-key":"id",multiple:"",filterable:"",name:"limits",rules:"required",vid:"limits",placeholder:"Choose"},model:{value:t.limits,callback:function(s){e.$set(t,"limits",s)},expression:"rule.limits"}},[t&&t.subsystem&&t.subsystem.id?[e.subsystem_meta[t.subsystem.id.toString()].limits.companies?s("el-option-group",{attrs:{label:"Entities"}},[e._l(e.subsystem_meta[t.subsystem.id.toString()].limits.companies,(function(e){return[s("el-option",{key:e.id,attrs:{label:e.label,value:e}})]}))],2):e._e(),e.subsystem_meta[t.subsystem.id.toString()].limits.groups?s("el-option-group",{attrs:{label:e.subsystem_meta[t.subsystem.id.toString()].subsystem_name+" Groups"}},[e._l(e.subsystem_meta[t.subsystem.id.toString()].limits.groups,(function(t){return[s("el-option",{key:t.id,attrs:{label:t.label,value:t}},[s("span",{staticStyle:{float:"left"}},[e._v(e._s(t.label))]),s("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px","margin-right":"1em"}},[e._v(e._s(t.meta))])])]}))],2):e._e()]:e._e()],2)],1)],1),s("b-col",{attrs:{md:""}},[s("base-button",{staticClass:"btn",attrs:{disabled:!e.userCan("Edit","Security Rules")||e.loading,type:"primary",size:"sm",icon:""},nativeOn:{click:function(s){return e.updateSecurityRule(t)}}},[e._v("\n                        Update\n                      ")]),s("base-button",{staticClass:"btn",attrs:{disabled:!e.userCan("Delete","Security Rules")||e.loading,type:"primary",size:"sm",icon:""},nativeOn:{click:function(s){return e.deletionPrompt(t)}}},[e._v("\n                        Delete\n                      ")])],1)],1)]}))]:e._e()],2),s("validation-observer",{ref:"addrules",attrs:{slim:""}},[e.subsystem_meta?s("b-row",{attrs:{"align-v":"center"}},[s("b-col",{attrs:{md:""}},[s("base-input",{attrs:{label:"Module",name:"module",rules:"required",vid:"subsystem"}},[s("el-select",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",modifiers:{hover:!0,top:!0}}],attrs:{"value-key":"id",filterable:"",title:"Choose a system module to which this security rule will apply to.",placeholder:"Choose"},on:{change:function(t){return e.filterChanges("subsystem",e.rule_model)}},model:{value:e.rule_model.subsystem,callback:function(t){e.$set(e.rule_model,"subsystem",t)},expression:"rule_model.subsystem"}},e._l(e.subsystem_meta,(function(e){return s("el-option",{key:e.id,attrs:{label:e.subsystem_name,value:e}})})),1)],1)],1),s("b-col",{attrs:{md:""}},[s("base-input",{attrs:{label:"Permissions",name:"permissions",rules:"required",vid:"permissions"}},[s("el-select",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",modifiers:{hover:!0,top:!0}}],attrs:{disabled:!e.rule_model.subsystem.id,"value-key":"id",multiple:"",filterable:"",title:"Choose the desired permissions to grant for the chosen module. Multiple permissions can be added per module.",placeholder:"Choose"},on:{change:function(t){return e.filterChanges("permissions",e.rule_model)}},model:{value:e.rule_model.permissions,callback:function(t){e.$set(e.rule_model,"permissions",t)},expression:"rule_model.permissions"}},[e.rule_model&&e.rule_model.subsystem&&e.rule_model.subsystem.id?e._l(e.subsystem_meta[e.rule_model.subsystem.id.toString()].permissions,(function(e){return s("el-option",{key:e.id,attrs:{label:e.permission_name,value:e}})})):e._e()],2)],1)],1),s("b-col",{attrs:{md:""}},[s("base-input",{attrs:{label:"Limits",disabled:!e.rule_model.permissions.length}},[s("el-select",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",modifiers:{hover:!0,top:!0}}],attrs:{disabled:!e.rule_model.permissions.length,"value-key":"id",multiple:"",filterable:"",name:"limits",rules:"required",vid:"limits",title:"Specify the entities/group(s) to which these permissions apply to.",placeholder:"Choose"},model:{value:e.rule_model.limits,callback:function(t){e.$set(e.rule_model,"limits",t)},expression:"rule_model.limits"}},[e.rule_model&&e.rule_model.subsystem&&e.rule_model.subsystem.id?[e.subsystem_meta[e.rule_model.subsystem.id.toString()].limits.companies?s("el-option-group",{attrs:{label:"Entities"}},[e._l(e.subsystem_meta[e.rule_model.subsystem.id.toString()].limits.companies,(function(e,t){return[s("el-option",{key:e.id,attrs:{label:e.label,value:e}})]}))],2):e._e(),e.subsystem_meta[e.rule_model.subsystem.id.toString()].limits.groups?s("el-option-group",{attrs:{label:e.subsystem_meta[e.rule_model.subsystem.id.toString()].subsystem_name+" Groups"}},[e._l(e.subsystem_meta[e.rule_model.subsystem.id.toString()].limits.groups,(function(t,a){return[s("el-option",{key:t.id,attrs:{label:t.label,value:t}},[s("span",{staticStyle:{float:"left"}},[e._v(e._s(t.label))]),s("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px","margin-right":"1em"}},[e._v(e._s(t.meta))])])]}))],2):e._e()]:e._e()],2)],1)],1),s("b-col",{attrs:{md:""}},[s("base-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.top",modifiers:{hover:!0,top:!0}}],staticClass:"btn",attrs:{disabled:!e.userCan("Add","Security Rules")||e.loading,type:"primary",size:"sm",title:"Add the security rule. Warning: changes would effect immediately.",icon:""},nativeOn:{click:function(t){return e.addSecurityRule.apply(null,arguments)}}},[e._v("\n                    Add Rule\n                  ")])],1)],1):e._e()],1)],1)],2)],1)])],1)],1)},i=[],o=(s("20d6"),s("ac6a"),s("bd86")),r=(s("016f"),s("450d"),s("486c")),n=s.n(r),u=(s("6611"),s("e772")),d=s.n(u),m=(s("7f7f"),s("1f1a"),s("4e4b")),c=s.n(m),p=s("714b"),b=s("3d20"),f=s.n(b),v=s("8fe0"),h={mixins:[v["a"]],components:(a={},Object(o["a"])(a,c.a.name,c.a),Object(o["a"])(a,d.a.name,d.a),Object(o["a"])(a,n.a.name,n.a),Object(o["a"])(a,"Modal",p["a"]),a),data:function(){return{loading:!1,role_model:{id:null,role_name:""},rule_model:{role_id:this.$route.params.id,subsystem:{id:null,subsystem_name:""},permissions:[],limits:{companies:[],groups:[]}},company_name:"",security_rules:null,subsystem_meta:null,members:[],saveTemplatesModalVisible:!1,browseTemplatesModalVisible:!1,templateTableColumns:[{key:"name",label:"Template",sortable:!0,tdClass:"valign"},{key:"company_name",label:"Entity",sortable:!0,tdClass:"valign"},{key:"actions",label:"Actions"}],loadedTemplates:[],loadedTemplateName:"",loadedTemplateId:null,saveTemplateName:"",templateSaveStatus:"",templateLoaded:!1,totalRows:1,currentPage:1,perPage:10,filterText:""}},methods:{loadRole:function(){var e=this;this.loading=!0,this.$axios.get("/api/role/"+this.$route.params.id).then((function(t){e.loading=!1,e.role_model=t.data.role,e.company_name=t.data.role.company_name,e.members=t.data.members}))},loadRules:function(){var e=this;return this.loading=!0,this.$axios.get("/api/role_rules_get/"+this.$route.params.id).then((function(t){return e.loading=!1,e.security_rules=t.data.security_rules,e.subsystem_meta=t.data.subsystem_meta,t}))},loadTemplates:function(){var e=this;this.loading=!0,this.$axios.get("/api/sec_tpl_get").then((function(t){e.loading=!1,e.loadedTemplates=t.data.templates,e.totalRows=e.loadedTemplates.length}))},syncFields:function(){var e=this;this.$refs.form.validate().then((function(t){t?(e.loading=!0,e.$axios.post("/api/role_update",e.role_model).then((function(t){e.loading=!1,"role_updated"==t.data.message&&e.$notify({title:"Saved",message:"Changes were saved",type:"success",verticalAlign:"top",horizontalAlign:"right"})})).catch((function(t){e.loading=!1,t.response.data.errors&&e.$refs.form.setErrors(t.response.data.errors)}))):e.$notify({title:"Required",message:"Please complete all fields",type:"danger",verticalAlign:"top",horizontalAlign:"right",duration:1e3,clean:!0})}))},addSecurityRule:function(){var e=this;this.$refs.addrules.validate().then((function(t){t?(e.loading=!0,e.$axios.post("/api/role_rule_add",e.rule_model).then((function(t){e.loading=!1,"rule_added"==t.data.message&&(e.clearRuleModel(e.rule_model),e.$refs.addrules.reset(),e.loadRules(),e.$notify({title:"Added",message:"Rule was added",type:"success",verticalAlign:"top",horizontalAlign:"right"}))})).catch((function(t){e.loading=!1,t.response.data.errors&&e.$refs.addrules.setErrors(t.response.data.errors)}))):e.$notify({title:"Required",message:"Please complete all fields",type:"danger",verticalAlign:"top",horizontalAlign:"right",duration:1e3,clean:!0})}))},updateSecurityRule:function(e){var t=this;this.$refs.updaterules.validate().then((function(s){s?(t.loading=!0,t.$axios.post("/api/role_rule_update",e).then((function(e){t.loading=!1,"rule_updated"==e.data.message&&t.$notify({title:"Updated",message:"Rule was updated",type:"success",verticalAlign:"top",horizontalAlign:"right"})})).catch((function(e){t.loading=!1,e.response.data.errors&&t.$refs.updaterules.setErrors(e.response.data.errors)}))):t.$notify({title:"Required",message:"Please complete all fields",type:"danger",verticalAlign:"top",horizontalAlign:"right",duration:1e3,clean:!0})}))},deletionPrompt:function(e){var t=this;f.a.fire({title:"Are you sure?",text:"Please confirm rule removal",showCancelButton:!0,confirmButtonText:"Remove",buttonsStyling:!1,customClass:{cancelButton:"btn btn-outline-primary",confirmButton:"btn btn-primary"}}).then((function(s){s.value&&t.deleteSecurityRule(e)}))},deleteSecurityRule:function(e){var t=this;this.loading=!0,this.$axios.post("/api/role_rule_destroy",{id:e.id}).then((function(e){t.loading=!1,"rule_removed"==e.data.message&&(t.loadRules(),t.$notify({title:"Removed",message:"Rule was removed",type:"success",verticalAlign:"top",horizontalAlign:"right"}))}))},filterChanges:function(e,t){if("subsystem"==e){while(t.limits.length)t.limits.pop();while(t.permissions.length)t.permissions.pop()}},clearRuleModel:function(e){e.role_id=this.$route.params.id,e.subsystem={id:null,subsystem_name:""},e.permissions=[],e.limits=[]},resetValidation:function(){var e=this;this.$nextTick((function(){e.$refs.form.reset(),e.$refs.addrules.reset(),e.$refs.updaterules.reset()}))},saveSecurityTemplate:function(){var e=this;this.$refs.savetpl.validate().then((function(t){if(t){var s={name:e.saveTemplateName,rules:[]};e.security_rules.forEach((function(e){s.rules.push({subsystem_id:e.subsystem.id,permission_ids:e.permissions.map((function(e){return e.id}))})})),e.loading=!0,e.$axios.post("/api/sec_tpl_save",{role_id:e.role_model.id,template:s}).then((function(t){e.loading=!1,"template_saved"==t.data.message?(e.closeSaveTemplatesModal(),e.loadTemplates(),e.$notify({title:"Success",message:"Template Saved",type:"success",verticalAlign:"top",horizontalAlign:"right"})):"template_save_error"==t.data.message&&(e.closeSaveTemplatesModal(),e.$notify({title:"Failed",message:"Save Error. Pleae notify your sysadmin.",type:"warning",verticalAlign:"top",horizontalAlign:"right"}))})).catch((function(t){e.loading=!1,t.response.data.errors&&e.$refs.savetpl.setErrors(t.response.data.errors)}))}else e.$notify({title:"Required",message:"Please complete all fields",type:"danger",verticalAlign:"top",horizontalAlign:"right",duration:1e3,clean:!0})}))},confirmSecurityTemplateApply:function(e,t){var s=this;f.a.fire({title:"Please Confirm",text:"Existing rules will be replaced",showCancelButton:!0,confirmButtonText:"Apply Template",buttonsStyling:!1,customClass:{cancelButton:"btn btn-outline-primary",confirmButton:"btn btn-primary"}}).then((function(a){a.value&&s.applySecurityTemplate(e,t)}))},applySecurityTemplate:function(e,t){var s=this;t&&(this.loading=!0,this.$axios.post("/api/sec_tpl_apply",{id:t.id,role_id:this.role_model.id}).then((function(e){s.loading=!1,"template_applied"==e.data.message&&(s.loading=!0,s.loadRules().then((function(e){s.loading=!1,s.$notify({title:"Success",message:"Template Applied",type:"success",verticalAlign:"top",horizontalAlign:"right"})})))})),this.closeBrowseTemplatesModal(),this.templateLoaded=!0,this.loadedTemplateName=t.name,this.loadedTemplateId=t.id)},confirmSecurityTemplateRemoval:function(e,t){var s=this;f.a.fire({title:"Remove Template?",text:"Template will be permanently deleted",showCancelButton:!0,confirmButtonText:"Remove Template",buttonsStyling:!1,customClass:{cancelButton:"btn btn-outline-primary",confirmButton:"btn btn-primary"}}).then((function(a){a.value&&s.removeSecurityTemplate(e,t)}))},removeSecurityTemplate:function(e,t){var s=this;this.loading=!0,this.$axios.post("/api/sec_tpl_destroy",{id:t.id}).then((function(e){if(s.loading=!1,"template_removed"==e.data.message){var a=s.loadedTemplates.findIndex((function(e){return e.id===t.id}));a>=0&&s.loadedTemplates.splice(a,1),s.$notify({title:"Success",message:"Template Removed",type:"success",verticalAlign:"top",horizontalAlign:"right"})}}))},showBrowseTemplatesModal:function(){this.browseTemplatesModalVisible=!0},closeBrowseTemplatesModal:function(){this.browseTemplatesModalVisible=!1},showSaveTemplatesModal:function(){this.saveTemplatesModalVisible=!0,this.saveTemplateName=this.loadedTemplateName},closeSaveTemplatesModal:function(){this.saveTemplatesModalVisible=!1}},mounted:function(){this.resetValidation()},created:function(){this.loadRole(),this.loadRules(),this.loadTemplates()}},y=h,_=(s("89c4"),s("2877")),g=Object(_["a"])(y,l,i,!1,null,null,null);t["default"]=g.exports},"486c":function(e,t,s){e.exports=function(e){var t={};function s(a){if(t[a])return t[a].exports;var l=t[a]={i:a,l:!1,exports:{}};return e[a].call(l.exports,l,l.exports,s),l.l=!0,l.exports}return s.m=e,s.c=t,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/dist/",s(s.s=147)}({0:function(e,t){e.exports=function(e,t,s,a,l,i){var o,r=e=e||{},n=typeof e.default;"object"!==n&&"function"!==n||(o=e,r=e.default);var u,d="function"===typeof r?r.options:r;if(t&&(d.render=t.render,d.staticRenderFns=t.staticRenderFns,d._compiled=!0),s&&(d.functional=!0),l&&(d._scopeId=l),i?(u=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},d._ssrRegister=u):a&&(u=a),u){var m=d.functional,c=m?d.render:d.beforeCreate;m?(d._injectStyles=u,d.render=function(e,t){return u.call(t),c(e,t)}):d.beforeCreate=c?[].concat(c,u):[u]}return{esModule:o,exports:r,options:d}}},1:function(e,t){e.exports=s("d010")},147:function(e,t,s){"use strict";t.__esModule=!0;var a=s(148),l=i(a);function i(e){return e&&e.__esModule?e:{default:e}}l.default.install=function(e){e.component(l.default.name,l.default)},t.default=l.default},148:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(149),l=s.n(a),i=s(150),o=s(0),r=!1,n=null,u=null,d=null,m=o(l.a,i["a"],r,n,u,d);t["default"]=m.exports},149:function(e,t,s){"use strict";t.__esModule=!0;var a=s(1),l=i(a);function i(e){return e&&e.__esModule?e:{default:e}}t.default={mixins:[l.default],name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:{type:Boolean,default:!1}},data:function(){return{visible:!0}},watch:{disabled:function(e){this.broadcast("ElOption","handleGroupDisabled",e)}},methods:{queryChange:function(){this.visible=this.$children&&Array.isArray(this.$children)&&this.$children.some((function(e){return!0===e.visible}))}},created:function(){this.$on("queryChange",this.queryChange)},mounted:function(){this.disabled&&this.broadcast("ElOption","handleGroupDisabled",this.disabled)}}},150:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"el-select-group__wrap"},[s("li",{staticClass:"el-select-group__title"},[e._v(e._s(e.label))]),s("li",[s("ul",{staticClass:"el-select-group"},[e._t("default")],2)])])},l=[],i={render:a,staticRenderFns:l};t["a"]=i}})},"89c4":function(e,t,s){"use strict";s("ee44")},"8fe0":function(e,t,s){"use strict";s("a481");t["a"]={methods:{calcLastReadingColor:function(e){var t="black";return"undefined"!==typeof e.date_diff&&"N/A"!=e.date_diff&&(e.date_diff.h<3&&(t="green"),e.date_diff.h>=3&&e.date_diff.h<6&&(t="orange"),e.date_diff.h>=6&&(t="red"),(e.date_diff.d>0||e.date_diff.days>0)&&(t="red"),(e.date_diff.y>0||e.date_diff.m>0||e.date_diff.d>0||e.date_diff.days>0)&&(t="red")),t},isAdmin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.$store.getters.isAdmin(e)},isDistributor:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.$store.getters.isDistributor(e)},isRestricted:function(){return this.$store.getters.isRestricted()},userCan:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return this.$store.getters.userCan(e,t,s,a)},userLimits:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return this.$store.getters.userLimits(e,t,s)},convertNodeTypeToGraphRouteName:function(e){return"Soil Moisture"==e?"soil_moisture_graph":"Nutrients"==e?"nutrients_graph":"Wells"==e?"well_controls_graph":"Water Meter"==e?"meters_graph":""},convertNodeTypeToSubsystem:function(e){return"Soil Moisture"==e?"Soil Moisture":"Nutrients"==e?"Nutrients":"Wells"==e?"Well Controls":"Water Meter"==e?"Meters":""},convertToInches:function(e){return e=e.replace("mm",""),e=parseInt(parseInt(e)/25)+'"',e},convertToIndex:function(e){return e=e.replace("mm",""),e=parseInt(parseInt(e)/100),e},truncateString:function(e){return e.length<=24?e:e.substring(0,21)+"..."}}}},ee44:function(e,t,s){}}]);
//# sourceMappingURL=chunk-5d7522f0.676d202d.js.map