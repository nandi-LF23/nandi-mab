{"version":3,"sources":["webpack:///./src/views/Pages/MetersGraph.vue?fcc1","webpack:///src/views/Pages/MetersGraph.vue","webpack:///./src/views/Pages/MetersGraph.vue?5444","webpack:///./src/views/Pages/MetersGraph.vue","webpack:///./node_modules/core-js/modules/_string-pad.js","webpack:///./node_modules/core-js/modules/_string-repeat.js","webpack:///./node_modules/core-js/modules/es7.string.pad-start.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","_s","field_name","directives","name","rawName","value","expression","slot","modifiers","userCan","node_id","nativeOn","$event","goToManage","loading","model","callback","$$v","graph_type","sub_days","scopedSlots","_u","key","fn","ref","focus","blur","maxDate","date_now","on","graph_start_date","chartOptions","chartUpdateArgs","staticRenderFns","mixins","components","flatPicker","data","in_progress","bInitialQuery","bNotified","related_nodes","series","duration","seriesAdjusted","zoomOrDrag","lastDate","exportFileName","initial_start_date","initial_end_date","selection_start","selection_end","yMin","yMax","xMin","xMax","full","refill","plotOptions","states","inactive","opacity","chartTitle","text","widthAdjust","plotLines","resetButton","enabled","onclick","computed","credits","chart","type","zoomType","panning","panKey","height","resetZoomButton","position","x","y","exporting","buttons","contextButton","exportButton","menuItems","printButton","filename","xAxis","min","max","tickInterval","dateTimeLabelFormats","millisecond","second","minute","hour","day","week","month","year","labels","rotation","crosshair","events","setExtremes","c","setTimeout","e","afterSetExtremes","yAxis","title","legend","layout","align","verticalAlign","tooltip","shared","watch","val","handler","deep","changeDateRange","maybeReloadGraphData","methods","loadGraphData","$refs","hchart","showLoading","$axios","post","$store","state","baseUrl","node_address","is_initial","then","swal","showCancelButton","confirmButtonText","buttonsStyling","customClass","cancelButton","confirmButton","resp","enableSeriesDragDrop","forEach","moved","draggableX","draggableY","dragMinY","dragMaxY","groupBy","dragStart","options","custom","pointFormatter","color","chartTriggerChange","disableSeriesDragDrop","toggleSeriesDragDrop","showPlotLines","hidePlotLines","push","pop","exportGraphCSV","resetSeriesData","downloadCSV","$router","params","created","today","Date","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","$route","mounted","component","toLength","repeat","defined","module","exports","that","maxLength","fillString","left","S","stringLength","length","fillStr","undefined","intMaxLength","fillLen","stringFiller","call","Math","ceil","slice","toInteger","count","str","res","n","Infinity","RangeError","$export","$pad","userAgent","WEBKIT_BUG","test","P","F","arguments"],"mappings":"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","file":"js/chunk-4c9a14a0.7da50f54.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"content\"},[_c('base-header',{staticClass:\"pb-6\",attrs:{\"type\":\"meters\"}},[_c('b-row',{staticClass:\"py-4\",attrs:{\"align-v\":\"center\"}},[_c('b-col',[_c('h6',{staticClass:\"h2 text-white d-inline-block mb-0 mr-5\"},[_vm._v(\"Meters - \"+_vm._s(_vm.field_name)+\" - Graph\")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"mab_spinner light right\"})])],1)],1),_c('div',{staticClass:\"container-fluid mt--6\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-12\"},[_c('card',{attrs:{\"body-classes\":\"px-0 py-0\"}},[_c('template',{slot:\"header\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-md-12\"},[_c('base-button',{directives:[{name:\"b-tooltip\",rawName:\"v-b-tooltip.hover.top\",modifiers:{\"hover\":true,\"top\":true}}],staticClass:\"btn\",attrs:{\"disabled\":!_vm.userCan('Edit', 'Meters', _vm.node_id, 'O'),\"size\":\"sm\",\"type\":\"primary\",\"title\":\"Navigate to the meter's management screen\",\"icon\":\"\"},nativeOn:{\"click\":function($event){return _vm.goToManage()}}},[_vm._v(\"\\n                  Manage\\n                \")])],1)])]),_c('div',{staticClass:\"card-body\"},[_c('b-row',[_c('b-col',[_c('base-input',{attrs:{\"label\":\"Graph Type\"}},[_c('el-select',{attrs:{\"disabled\":_vm.loading},model:{value:(_vm.graph_type),callback:function ($$v) {_vm.graph_type=$$v},expression:\"graph_type\"}},[_c('el-option',{attrs:{\"label\":\"Pulse\",\"value\":\"pulse\",\"selected\":\"\"}}),_c('el-option',{attrs:{\"label\":\"Technical\",\"value\":\"tech\"}})],1)],1)],1),_c('b-col',[_c('base-input',{attrs:{\"label\":\"Range\"}},[_c('el-select',{directives:[{name:\"b-tooltip\",rawName:\"v-b-tooltip.hover.top\",modifiers:{\"hover\":true,\"top\":true}}],attrs:{\"title\":\"Choose the time range of data to view.\"},model:{value:(_vm.sub_days),callback:function ($$v) {_vm.sub_days=$$v},expression:\"sub_days\"}},[_c('el-option',{attrs:{\"label\":\"Last 24 Hours\",\"value\":\"1\"}}),_c('el-option',{attrs:{\"label\":\"Last Week\",\"value\":\"7\"}}),_c('el-option',{attrs:{\"label\":\"Last Two Weeks\",\"value\":\"14\"}}),_c('el-option',{attrs:{\"label\":\"Last Month\",\"value\":\"31\"}}),_c('el-option',{attrs:{\"label\":\"Last Year\",\"value\":\"365\"}}),_c('el-option',{attrs:{\"label\":\"Custom\",\"value\":\"custom\"}})],1)],1)],1),_c('b-col',[_c('base-input',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.sub_days=='custom'),expression:\"sub_days=='custom'\"}],attrs:{\"label\":\"Start Date\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar focus = ref.focus;\nvar blur = ref.blur;\nreturn _c('flat-picker',{directives:[{name:\"b-tooltip\",rawName:\"v-b-tooltip.hover.top\",modifiers:{\"hover\":true,\"top\":true}}],staticClass:\"form-control datepicker\",attrs:{\"config\":{maxDate: _vm.date_now },\"placeholder\":\"Custom Date\",\"title\":\"A custom start date allows a custom range of data to be viewed.\"},on:{\"on-open\":focus,\"on-close\":blur},model:{value:(_vm.graph_start_date),callback:function ($$v) {_vm.graph_start_date=$$v},expression:\"graph_start_date\"}})}}])})],1)],1),_c('highcharts',{ref:\"hchart\",staticClass:\"hc\",attrs:{\"options\":_vm.chartOptions,\"update-args\":_vm.chartUpdateArgs}})],1)],2)],1)])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"content\">\r\n    <base-header class=\"pb-6\" type=\"meters\">\r\n      <b-row align-v=\"center\" class=\"py-4\">\r\n        <b-col>\r\n          <h6 class=\"h2 text-white d-inline-block mb-0 mr-5\">Meters - {{ field_name }} - Graph</h6>\r\n          <div v-show='loading' class='mab_spinner light right'></div>\r\n        </b-col>\r\n      </b-row>\r\n    </base-header>\r\n\r\n    <div class='container-fluid mt--6'>\r\n      <div class='row'>\r\n        <div class='col-md-12'>\r\n          <card body-classes=\"px-0 py-0\">\r\n\r\n            <template slot=\"header\">\r\n              <div class='row'>\r\n                <div class='col-md-12'>\r\n                  <base-button\r\n                    :disabled=\"!userCan('Edit', 'Meters', node_id, 'O')\"\r\n                    @click.native=\"goToManage()\"\r\n                    class=\"btn\"\r\n                    size=\"sm\"\r\n                    type=\"primary\"\r\n                    v-b-tooltip.hover.top title=\"Navigate to the meter's management screen\"\r\n                    icon>\r\n                    Manage\r\n                  </base-button>\r\n                </div>\r\n              </div>\r\n            </template>\r\n\r\n            <div class=\"card-body\">\r\n\r\n              <b-row>\r\n\r\n                <b-col>\r\n                  <base-input label=\"Graph Type\">\r\n                    <el-select v-model=\"graph_type\" :disabled=\"loading\">\r\n                      <el-option label=\"Pulse\" value='pulse' selected></el-option>\r\n                      <el-option label=\"Technical\" value='tech'></el-option>\r\n                    </el-select>\r\n                  </base-input>\r\n                </b-col>\r\n\r\n                <b-col>\r\n                  <base-input label=\"Range\">\r\n                    <el-select \r\n                      v-b-tooltip.hover.top title=\"Choose the time range of data to view.\"\r\n                      v-model=\"sub_days\">\r\n                      <el-option label=\"Last 24 Hours\" value='1'></el-option>\r\n                      <el-option label=\"Last Week\" value='7'></el-option>\r\n                      <el-option label=\"Last Two Weeks\" value='14'></el-option>\r\n                      <el-option label=\"Last Month\" value='31'></el-option>\r\n                      <el-option label=\"Last Year\" value='365'></el-option>\r\n                      <el-option label=\"Custom\" value='custom'></el-option>\r\n                    </el-select>\r\n                  </base-input>\r\n                </b-col>\r\n\r\n                <b-col>\r\n                  <base-input v-show=\"sub_days=='custom'\" label=\"Start Date\">\r\n                    <flat-picker \r\n                      slot-scope=\"{focus, blur}\"\r\n                      @on-open=\"focus\"\r\n                      @on-close=\"blur\"\r\n                      v-model=\"graph_start_date\"\r\n                      :config=\"{maxDate: date_now }\"\r\n                      placeholder=\"Custom Date\"\r\n                      class=\"form-control datepicker\"\r\n                      v-b-tooltip.hover.top title=\"A custom start date allows a custom range of data to be viewed.\">\r\n                    </flat-picker>\r\n                  </base-input>\r\n                </b-col>\r\n              </b-row>\r\n\r\n              <highcharts class=\"hc\" :options=\"chartOptions\" :update-args=\"chartUpdateArgs\" ref=\"hchart\"></highcharts>\r\n              \r\n            </div>\r\n          </card>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n/* eslint-disable no-new */\r\nimport { Select, Option } from 'element-ui'\r\nimport flatPicker from \"vue-flatpickr-component\";\r\nimport \"flatpickr/dist/flatpickr.css\";\r\nimport Highcharts from 'highcharts';\r\nimport mab_utils from '../../util/mab-utils';\r\nimport swal from 'sweetalert2';\r\n\r\nexport default {\r\n\r\n  mixins: [ mab_utils ],\r\n\r\n  components: {\r\n    [Select.name]: Select,\r\n    [Option.name]: Option,\r\n    flatPicker\r\n  },\r\n  \r\n  data() {\r\n    return {\r\n      loading: false,\r\n      in_progress: true,\r\n\r\n      node_id: null,\r\n      field_name: null,\r\n\r\n      graph_start_date: '',\r\n      graph_type: '',\r\n      sub_days: '',\r\n\r\n      bInitialQuery: true,\r\n      bNotified: false,\r\n\r\n      related_nodes: [],\r\n\r\n      date_now: '',\r\n      series: [],\r\n      chartUpdateArgs: [ true, true, { duration: 1000 } ],\r\n      seriesAdjusted: false,\r\n      zoomOrDrag: false, /* false == zoom, true == drag */\r\n      lastDate: null,\r\n      exportFileName: '',\r\n\r\n      initial_start_date: null,\r\n      initial_end_date: null,\r\n\r\n      selection_start: null,\r\n      selection_end:   null,\r\n\r\n      yMin: 0,\r\n      yMax: 0,\r\n\r\n      xMin: 0,\r\n      xMax: 0,\r\n\r\n      full: 0,\r\n      refill: 0,\r\n      plotOptions: {\r\n        series: {\r\n          states: {\r\n            inactive: {\r\n              opacity: 1\r\n            }\r\n          }\r\n        }\r\n      },\r\n      chartTitle: {\r\n        text: \"Loading..\",\r\n        widthAdjust: -300\r\n      },\r\n      plotLines: [],\r\n      resetButton: {\r\n        text: \"Reset\",\r\n        enabled: true,\r\n        onclick: (e) => {\r\n          this.resetSeriesData();\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    chartOptions(){\r\n      return {\r\n        credits:{ enabled: false },\r\n        chart: {\r\n          type: 'line',\r\n          zoomType: this.zoomOrDrag == false ? 'x' : false,\r\n          panning: true,\r\n          panKey:'shift',\r\n          height: 600,\r\n          resetZoomButton: { position: { x: 0, y: -50 } }\r\n        },\r\n        exporting: {\r\n          buttons: {\r\n            contextButton: { enabled: false },\r\n            exportButton: { text: 'Export', menuItems: ['downloadPNG', 'downloadJPEG', 'downloadPDF', 'downloadSVG'] },\r\n            printButton: { text: 'Print', onclick: function () { this.print(); } },\r\n            resetButton: this.resetButton\r\n          },\r\n          filename: this.exportFileName\r\n        },\r\n        series: this.series,\r\n        xAxis: {\r\n          min: this.xMin,\r\n          max: this.xMax,\r\n          type: 'datetime',\r\n          tickInterval:1,\r\n          // maxPadding:0,\r\n          dateTimeLabelFormats: {\r\n            millisecond: '%H:%M:%S.%L',\r\n            second: '%H:%M:%S',\r\n            minute: '%H:%M',\r\n            hour: '%H:%M',\r\n            day: '%e %b',\r\n            week: '%e %b',\r\n            month: '%b %Y',\r\n            year: '%Y'\r\n          },\r\n          labels: {\r\n            rotation:-45\r\n          },\r\n          crosshair: true,\r\n\r\n          events: {\r\n            setExtremes: function(e){\r\n              var c = this;\r\n              setTimeout(function() {\r\n                if (typeof e.min == 'undefined' && typeof e.max == 'undefined') {\r\n                  // 'zoom-reset'\r\n                  c.chart.yAxis[0].setExtremes(c.chart.yAxis[0].min, c.chart.yAxis[0].max);\r\n                } else {\r\n                  // 'zoom-in'\r\n                  c.chart.yAxis[0].setExtremes();\r\n                }\r\n              }, 1);\r\n            },\r\n            afterSetExtremes: this.afterSetExtremes\r\n          }\r\n\r\n        },\r\n        yAxis: {\r\n          /* min: this.yMin,\r\n          max: this.yMax, */\r\n          title: { text: '' },\r\n          plotLines: this.plotLines\r\n        },\r\n        legend: {\r\n          layout: 'horizontal',\r\n          align: 'center',\r\n          verticalAlign: 'bottom'\r\n        },\r\n        tooltip: {\r\n          shared: true\r\n        },\r\n        plotOptions: this.plotOptions,\r\n        title: this.chartTitle\r\n      }\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    title: function(val){\r\n      this.chartOptions.title = val;\r\n    },\r\n    plotOptions: {\r\n      handler: function(val){\r\n        if(val.length){\r\n          this.chartOptions.plotOptions = val;\r\n        }\r\n      },\r\n      deep: true\r\n    },\r\n    series: {\r\n      handler: function(val){\r\n        if(val.length){\r\n          this.chartOptions.series = val;\r\n        }\r\n      },\r\n      deep: true\r\n    },\r\n    graph_start_date: function(val){\r\n      this.changeDateRange();\r\n    },\r\n    graph_type: function(val){\r\n      this.maybeReloadGraphData();\r\n    },\r\n    sub_days: function(val){\r\n      if(val == 'custom' && !this.graph_start_date){ return; }\r\n      if(val != 'custom'){ this.graph_start_date = ''; }\r\n      // Experimental\r\n      this.initial_start_date = null;\r\n      this.initial_end_date = null;\r\n      this.maybeReloadGraphData();\r\n    }\r\n  },\r\n\r\n  methods: {\r\n\r\n    loadGraphData() {\r\n\r\n      this.loading = true;\r\n      this.in_progress = true;\r\n\r\n      this.$refs.hchart.chart.showLoading(this.bInitialQuery ? \"Loading...\" : \"Refreshing...\");\r\n\r\n      return this.$axios.post(this.$store.state.baseUrl+\"/api/GraphWMV1\", {\r\n        node_address: this.$route.params.node_address,\r\n        graph_type: this.graph_type,\r\n        graph_start_date: this.graph_start_date,\r\n        sub_days: this.sub_days,\r\n        is_initial: this.bInitialQuery,\r\n        selection_start: this.selection_start,\r\n        selection_end: this.selection_end\r\n      }).then(resp => {\r\n\r\n        this.loading = false;\r\n        this.in_progress = true;\r\n        this.$refs.hchart.chart.hideLoading();\r\n\r\n        if(resp.data){\r\n\r\n          if(resp.data.message && resp.data.message == 'no_data'){\r\n            swal.fire({\r\n              title: 'No data found',\r\n              text: \"This node currently has no data to plot.\",\r\n              showCancelButton: false,\r\n              confirmButtonText: 'OK',\r\n              buttonsStyling: false,\r\n              customClass: {\r\n                cancelButton: 'btn btn-outline-primary',\r\n                confirmButton: 'btn btn-primary'\r\n              }\r\n            });\r\n            this.chartTitle.text = \"No data found\";\r\n            return;\r\n          }\r\n\r\n          if(!this.bNotified && resp.data.not_current && resp.data.last_date){\r\n            swal.fire({\r\n              title: 'No recent data found',\r\n              text: \"Last readings up to \" + resp.data.last_date + \" could be displayed.\",\r\n              showCancelButton: false,\r\n              confirmButtonText: 'OK',\r\n              buttonsStyling: false,\r\n              customClass: {\r\n                cancelButton: 'btn btn-outline-primary',\r\n                confirmButton: 'btn btn-primary'\r\n              }\r\n            });\r\n            this.bNotified = true;\r\n          }\r\n\r\n          this.selection_start = null;\r\n          this.selection_end = null;\r\n\r\n          // COMMON DATA\r\n          this.field_name = resp.data.field_name;\r\n          this.node_id = resp.data.node_id;\r\n          // Experimental\r\n          if(this.bInitialQuery){\r\n            this.graph_start_date = resp.data.graph_start_date;\r\n            this.graph_type = resp.data.graph_type;\r\n            this.sub_days = resp.data.sub_days;\r\n          }\r\n\r\n          this.bInitialQuery = false;\r\n\r\n          this.xMin = resp.data.x_min;\r\n          this.xMax = resp.data.x_max;\r\n          this.yMin = resp.data.y_min;\r\n          this.yMax = resp.data.y_max;\r\n\r\n          this.lastDate = resp.data.last_date.replace(\":\", '-');\r\n          this.exportFileName = resp.data.graph.field_name + '-' + this.graph_type + '-' + this.$route.params.node_address + '-' + this.lastDate;\r\n\r\n          this.plotOptions = resp.data.graph.plotOptions;\r\n          this.chartTitle = resp.data.graph.title;\r\n\r\n          this.series = resp.data.graph.series.filter( (series) => { if(series.data){ return series.data.length > 0; } else return false; });\r\n        }\r\n        setTimeout(() => { this.in_progress = false; }, 1);\r\n        return resp;\r\n      });\r\n    },\r\n\r\n    maybeReloadGraphData(){\r\n      if(this.in_progress == true){ return; }\r\n      this.loadGraphData();\r\n    },\r\n\r\n    changeDateRange(){\r\n      if(this.in_progress == true){ return; }\r\n      if(this.graph_start_date == ''){ return; }\r\n      this.loadGraphData();\r\n    },\r\n\r\n    enableSeriesDragDrop(){\r\n      if(this.series && this.series.length){\r\n        \r\n        // Enable shared tooltip\r\n        this.chartOptions.tooltip = { shared: true };\r\n        // Enable custom Reset button\r\n        this.resetButton.enabled = true;\r\n\r\n        this.series.forEach((series, idx) => {\r\n          // Set custom Per Series Data\r\n          this.series[idx].custom = {\r\n            moved: false\r\n          };\r\n          // Enable DnD for this range of series only\r\n          this.series[idx].dragDrop = {\r\n            draggableX: false,\r\n            draggableY: true,\r\n            dragMinY:   0,\r\n            dragMaxY:   100,\r\n            groupBy:    'grp'\r\n          };\r\n          // Track changes\r\n          this.series[idx].point = {\r\n            events: {\r\n              dragStart: function(){ \r\n                this.series.options.custom.moved = true;\r\n              },\r\n            }\r\n          };\r\n          // Format tooltip: Hide value once series was moved\r\n          this.series[idx].tooltip = {\r\n            pointFormatter: function() { \r\n              return '<span style=\"color:' + this.series.color + ';\">●</span> ' + this.series.name + ': <b>' + \r\n                (this.series.options.custom.moved ? '' : Highcharts.numberFormat(this.y, 2)) + '</b><br/>';\r\n            }\r\n          };\r\n        });\r\n\r\n        this.chartTriggerChange();\r\n      }\r\n    },\r\n\r\n    disableSeriesDragDrop(){\r\n      if(this.series && this.series.length){\r\n        // Disable drag\r\n        this.series.forEach((series, idx) => {\r\n          this.series[idx].dragDrop = {\r\n            draggableX: false,\r\n            draggableY: false,\r\n          };\r\n        });\r\n        // Disable shared tooltip\r\n        this.chartOptions.tooltip = { shared: false };\r\n        // Disable custom Reset button\r\n        this.resetButton.enabled = false;\r\n\r\n        this.chartTriggerChange();\r\n      }\r\n    },\r\n\r\n    toggleSeriesDragDrop(){\r\n      // Zoom\r\n      if(this.zoomOrDrag){\r\n        this.enableSeriesDragDrop();\r\n      // Drag\r\n      } else {\r\n        this.disableSeriesDragDrop();\r\n      }\r\n    },\r\n\r\n    showPlotLines(){\r\n      // this.plotLines = [\r\n      //   { /* Full Line */\r\n      //     value: this.full,\r\n      //     color: '#00F',\r\n      //     width: 2,\r\n      //     label: {\r\n      //       x:0,\r\n      //       align:'right',\r\n      //       formatter: () => { return 'Full: ' + this.full; }\r\n      //     }\r\n      //   },\r\n      //   { /* Refill Line */\r\n      //     value: this.refill,\r\n      //     color: '#D26761',\r\n      //     width: 2,\r\n      //     label: {\r\n      //       x:0,\r\n      //       align:'right',\r\n      //       formatter: () => { return 'Refill: ' + this.refill; }\r\n      //     }\r\n      //   }\r\n      // ];\r\n    },\r\n\r\n    hidePlotLines(){\r\n      this.plotLines = [];\r\n    },\r\n\r\n    // Hack to trigger chart update via faux change\r\n    chartTriggerChange(){\r\n      this.series.push({ type:'line', name: 'Faux', data:[] });\r\n      this.series.pop();\r\n    },\r\n\r\n    exportGraphCSV(){\r\n\r\n      this.zoomOrDrag = false;\r\n\r\n      // accessing internal series data from the outside\r\n      let series = this.$refs.hchart.chart.series;\r\n      try {\r\n        for(var i = 0; i < series.length; i++){\r\n          if(typeof series[i].options.custom.moved !== \"undefined\"){\r\n            if(series[i].options.custom.moved == true){\r\n              this.seriesAdjusted = true;\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      } catch(err){}\r\n\r\n      if(this.seriesAdjusted){\r\n        this.resetSeriesData().then((resp) => {\r\n          this.$refs.hchart.chart.downloadCSV();\r\n        });\r\n      } else {\r\n        this.$refs.hchart.chart.downloadCSV();\r\n      }\r\n    },\r\n\r\n    resetSeriesData(){\r\n      this.seriesAdjusted = false;\r\n      return this.loadGraphData();\r\n    },\r\n\r\n    goToManage(){\r\n      this.$router.push({\r\n        name: 'meters_edit',\r\n        params: { node_address: this.$route.params.node_address }\r\n      });\r\n    },\r\n\r\n    afterSetExtremes(e)\r\n    {\r\n      // initial load\r\n      if(e.trigger == null && this.bInitialQuery){ \r\n        this.initial_start_date = this.xMin;\r\n        this.initial_end_date = this.xMax;\r\n        this.bInitialQuery = false;\r\n      } else {\r\n        if(e.target.chart.resetZoomButton){\r\n          this.selection_start = e.min;\r\n          this.selection_end = e.max;\r\n        } else {\r\n          this.selection_start = this.initial_start_date;\r\n          this.selection_end = this.initial_end_date;\r\n        }\r\n\r\n        this.maybeReloadGraphData();\r\n      }\r\n    }\r\n  },\r\n\r\n  created() {\r\n    var today = new Date();\r\n    var dd = String(today.getDate()).padStart(2, '0');\r\n    var mm = String(today.getMonth() + 1).padStart(2, '0'); //January is 0!\r\n    var yyyy = today.getFullYear();\r\n    this.date_now = today = yyyy + '-' + mm + '-' + dd;\r\n    if(this.$route.params.graph_start_date){\r\n      this.sub_days = 'custom';\r\n      this.graph_start_date = this.$route.params.graph_start_date;\r\n    } else {\r\n      this.sub_days = '7';\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    this.loadGraphData();\r\n  }\r\n};\r\n</script>\r\n<style></style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MetersGraph.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MetersGraph.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MetersGraph.vue?vue&type=template&id=08826772&\"\nimport script from \"./MetersGraph.vue?vue&type=script&lang=js&\"\nexport * from \"./MetersGraph.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// https://github.com/tc39/proposal-string-pad-start-end\nvar toLength = require('./_to-length');\nvar repeat = require('./_string-repeat');\nvar defined = require('./_defined');\n\nmodule.exports = function (that, maxLength, fillString, left) {\n  var S = String(defined(that));\n  var stringLength = S.length;\n  var fillStr = fillString === undefined ? ' ' : String(fillString);\n  var intMaxLength = toLength(maxLength);\n  if (intMaxLength <= stringLength || fillStr == '') return S;\n  var fillLen = intMaxLength - stringLength;\n  var stringFiller = repeat.call(fillStr, Math.ceil(fillLen / fillStr.length));\n  if (stringFiller.length > fillLen) stringFiller = stringFiller.slice(0, fillLen);\n  return left ? stringFiller + S : S + stringFiller;\n};\n","'use strict';\nvar toInteger = require('./_to-integer');\nvar defined = require('./_defined');\n\nmodule.exports = function repeat(count) {\n  var str = String(defined(this));\n  var res = '';\n  var n = toInteger(count);\n  if (n < 0 || n == Infinity) throw RangeError(\"Count can't be negative\");\n  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) res += str;\n  return res;\n};\n","'use strict';\n// https://github.com/tc39/proposal-string-pad-start-end\nvar $export = require('./_export');\nvar $pad = require('./_string-pad');\nvar userAgent = require('./_user-agent');\n\n// https://github.com/zloirock/core-js/issues/280\nvar WEBKIT_BUG = /Version\\/10\\.\\d+(\\.\\d+)?( Mobile\\/\\w+)? Safari\\//.test(userAgent);\n\n$export($export.P + $export.F * WEBKIT_BUG, 'String', {\n  padStart: function padStart(maxLength /* , fillString = ' ' */) {\n    return $pad(this, maxLength, arguments.length > 1 ? arguments[1] : undefined, true);\n  }\n});\n"],"sourceRoot":""}